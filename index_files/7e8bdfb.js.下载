(window.webpackJsonp=window.webpackJsonp||[]).push([[19,53,58,205,277,284,291],{1128:function(t,e,o){"use strict";o.r(e);var n={props:{centered:{type:Boolean,default:!1}}},r=o(23),component=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex justify-content-between data-row my-2",class:{"align-items-center":t.centered,"align-items-baseline":!t.centered}},[e("div",[t._t("label")],2),t._v(" "),e("div",{staticClass:"text-right"},[t._t("value")],2)])}),[],!1,null,null,null);e.default=component.exports},1129:function(t,e,o){"use strict";o.r(e);var n={props:{hideText:{type:Boolean,default:!1}}},r=o(23),component=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex align-items-center"},[e("div",{staticClass:"spinner-border",attrs:{role:"status"}}),t._v(" "),t.hideText?t._e():e("span",{staticClass:"ml-2"},[t._v("Processing...")])])}),[],!1,null,null,null);e.default=component.exports},1130:function(t,e,o){"use strict";e.a={data:()=>({header:null,steps:[],successMessage:null,totalTxs:0}),computed:{},watch:{},methods:{initLoading(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$store.commit("loading-modal/RESET"),this.$bvModal.show("loading-modal"),this.header&&this.$store.commit("loading-modal/UPDATE_HEADER",this.header),this.successMessage&&this.$store.commit("loading-modal/UPDATE_SUCCESS_MESSAGE",this.successMessage),this.steps&&this.$store.commit("loading-modal/UPDATE_STEPS",this.steps),this.totalTxs>0&&this.$store.commit("loading-modal/UPDATE_TOTAL_TXS",this.totalTxs),this.$bvModal.hide(t)},async checkTx(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.error)return this.txError(t.error),!0;const o=await t.tx.wait();return!o.status||Number(1!==o.status)?(this.txError("Transaction rejected."),!0):(this.$store.commit("loading-modal/PUSH_PASSED_TX",t.tx),e&&this.txSuccess(),!1)},incrementStep(){this.$store.commit("loading-modal/INCREMENT_ACTIVE_STEP")},setTxsLength(t){this.$store.commit("loading-modal/UPDATE_TOTAL_TXS",t)},confirmPassedTx(t){this.$store.commit("loading-modal/PUSH_PASSED_TX",t)},txSuccess(){this.$store.commit("loading-modal/UPDATE_SUCCESS",!0)},txError(t){this.$store.commit("loading-modal/UPDATE_ERROR",t)}}}},1133:function(t,e,o){"use strict";o.r(e);var n={props:{label:{type:String,default:null},value:{type:String||Number,default:null},forceBetween:{type:Boolean,default:!1},flexGrowRight:{type:Boolean,default:!1}},data:()=>({isOpen:!1})},r=o(23),component=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"d-flex align-items-center hover-slight cursor-pointer",class:{"justify-content-between":t.value,"justify-content-center":!t.value},on:{click:function(e){t.isOpen=!t.isOpen}}},[e("div",{staticClass:"d-flex align-items-center justify-content-between",class:{"w-100":t.forceBetween&&!t.flexGrowRight}},[t._t("label",(function(){return[e("span",{staticClass:"text-decoration-underline"},[t._v(t._s(t.label))])]})),t._v(" "),t.isOpen?e("i",{staticClass:"mdi mdi-chevron-up font-size-22 ml-1"}):e("i",{staticClass:"mdi mdi-chevron-down font-size-22 ml-1"})],2),t._v(" "),e("div",{class:{"flex-grow-1 text-right":t.flexGrowRight}},[t._t("value",(function(){return[t._v(t._s(t.value))]}))],2)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}]},[t._t("default")],2)])}),[],!1,null,null,null);e.default=component.exports},1729:function(t,e,o){"use strict";o.r(e);var n=o(416),r=o(1128),l=o(103),c=o(1129),m=o(17),d=o(1130),h=o(54),T=o(244),k={components:{Processing:c.default,Modal:l.default,TokenImg:n.default,DataRow:r.default},mixins:[d.a],props:{exchangeType:{type:String,default:null},fromToken:{type:Object,default:null},toToken:{type:Object,default:null},fromTokenAmount:{type:String,default:""},toTokenAmount:{type:String,default:""},maxFromTokenAmount:{type:String,default:""},minToTokenAmount:{type:String,default:""},priceImpact:{type:Number,default:()=>0},swapFeesAmount:{type:Number,default:()=>0},swapBasedOnFromToken:{type:Boolean,default:()=>!0},path:{type:Array,default:()=>[]},approvedValid:{type:Boolean,required:!0}},setup:()=>({SWAP_STRINGS:T.d}),data:()=>({swapLoading:!1,isStale:!1}),computed:{isV2(){return"v2"===this.exchangeType},isInvalidPriceImpact(){return null===this.priceImpact}},watch:{fromTokenAmount(){this.swapLoading||(this.isStale=!0)},toTokenAmount(){this.swapLoading||(this.isStale=!0)}},methods:{async swap(){this.header={swap:!0,fromToken:this.fromToken,toToken:this.toToken,version:this.isV2?"v2":"v3"},this.steps=[{description:"Swapping ".concat(Object(m.b)(this.fromTokenAmount,2,8)," ").concat(this.fromToken.symbol," for ").concat(Object(m.b)(this.toTokenAmount,2,8)," ").concat(this.toToken.symbol,"..."),label:"spnft",icon:"mdi mdi-tray-arrow-down"}],this.successMessage={title:'You\'ve successfully swapped <span class="text-primary text-weight-500">~$'.concat(Object(m.b)(this.fromTokenAmount,2,8)," ").concat(this.fromToken.symbol," for ").concat(Object(m.b)(this.toTokenAmount,2,8)," ").concat(this.toToken.symbol,"</span>")},this.initLoading(this.id),this.swapLoading=!0;const t=this.$store.getters["web3-provider/accountProvider"],e=this.$store.getters["exchange-config/deadlineDuration"]/1e3;if(!t)return;const o=this.$store.getters["web3-provider/account"];let n=null;if((this.fromToken.isWNative||this.toToken.isWNative)&&(this.fromToken.isNative||this.toToken.isNative))return n=this.fromToken.isNative?await this.fromToken.wrap(t,this.fromTokenAmount):await this.toToken.unwrap(t,this.fromTokenAmount),this.swapLoading=!1,void(n.error||this.$bvModal.hide("swap-confirmation"));const r=this.isV2?this.$contracts.router:this.$contracts.routerV3;n=this.swapBasedOnFromToken?await r.swap(t,this.fromToken,this.toToken,this.fromTokenAmount,this.minToTokenAmount,this.path,o,e,!0):await r.swap(t,this.fromToken,this.toToken,this.maxFromTokenAmount,this.toTokenAmount,this.path,o,e,!1),n.error||n.tx&&(await n.tx.wait(),this.$bvModal.hide("swap-confirmation")),n.error===h.c.RATE_CHANGED&&this.refresh(),this.approvedValid||n.error!==h.c.ERC20_FAIL||(n.error=h.c.INSUFFICIENT_ALLOWANCE),this.swapLoading=!1;const l=!n.error;await this.checkTx(n,l)},reset(){this.swapLoading=!1,this.isStale=!1}}},f=o(23),component=Object(f.a)(k,(function(){var t=this,e=t._self._c;return e("modal",{attrs:{id:"swap-confirmation",title:"Swap"},on:{shown:function(e){return t.reset()}},scopedSlots:t._u([{key:"action",fn:function(){return[e("b-button",{staticClass:"w-50",attrs:{variant:"primary",disabled:t.swapLoading||t.isStale},on:{click:function(e){return t.swap()}}},[t.swapLoading?e("Processing"):e("span",[t._v(t._s(t.SWAP_STRINGS.SWAP))])],1)]},proxy:!0}])},[t.fromToken&&t.toToken?e("div",[e("div",{staticClass:"d-flex align-items-center"},[e("token-img",{staticClass:"mr-2",attrs:{token:t.fromToken,size:"lg"}}),t._v(" "),e("div",[e("div",{staticClass:"text-secondary"},[t._v(t._s(t.fromToken.symbol))]),t._v(" "),e("div",{staticClass:"items-center"},[e("h3",{staticClass:"d-inline-flex flex-row align-items-baseline"},[t._v("\n            "+t._s(t.fromTokenAmount)+"\n          ")])])])],1),t._v(" "),e("div",{staticClass:"d-flex align-items-center pl-1"},[e("i",{staticClass:"mdi mdi-arrow-down text-muted font-size-24 p-1"})]),t._v(" "),e("div",{staticClass:"d-flex align-items-center"},[e("token-img",{staticClass:"mr-2",attrs:{token:t.toToken,size:"lg"}}),t._v(" "),e("div",[e("div",{staticClass:"text-secondary"},[t._v(t._s(t.toToken.symbol))]),t._v(" "),e("div",{staticClass:"items-center"},[e("h3",{staticClass:"d-inline-flex flex-row align-items-baseline"},[t._v("\n            "+t._s(t.toTokenAmount)+"\n          ")])])])],1),t._v(" "),e("div",{staticClass:"pt-4"},[!t.swapBasedOnFromToken||(t.fromToken.isWNative||t.toToken.isWNative)&&(t.fromToken.isNative||t.toToken.isNative)?t._e():e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.SWAP_STRINGS.MINIMUM_RECEIVED))]},proxy:!0},{key:"value",fn:function(){return[t._v("\n          "+t._s(t.getLocaleString(t.minToTokenAmount,4,4))+" "+t._s(t.toToken.symbol)+"\n        ")]},proxy:!0}],null,!1,859526249)}),t._v(" "),t.swapBasedOnFromToken||(t.fromToken.isWNative||t.toToken.isWNative)&&(t.fromToken.isNative||t.toToken.isNative)?t._e():e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.SWAP_STRINGS.MAXIMUM_SOLD))]},proxy:!0},{key:"value",fn:function(){return[t._v("\n          "+t._s(t.getLocaleString(t.maxFromTokenAmount,4,4))+"\n          "+t._s(t.fromToken.symbol)+"\n        ")]},proxy:!0}],null,!1,243508608)}),t._v(" "),e("data-row",{scopedSlots:t._u([t.isInvalidPriceImpact?null:{key:"label",fn:function(){return[t._v(t._s(t.SWAP_STRINGS.PRICE_IMPACT))]},proxy:!0},{key:"value",fn:function(){return[t.isInvalidPriceImpact?t._e():e("span",[t._v("\n            "+t._s(Number(t.priceImpact)<0?"-":"+")+"\n          ")]),t._v(" "),e("span",{class:{"text-danger":t.isInvalidPriceImpact}},[t._v("\n            "+t._s("".concat(t.getLocaleString(Math.abs(t.priceImpact),4,4)," %"))+"\n          ")])]},proxy:!0}],null,!0)}),t._v(" "),t.isInvalidPriceImpact?e("b-alert",{staticClass:"d-flex align-items-center mt-3 px-2 mb-0 border-danger",attrs:{show:"",variant:"warning"}},[e("i",{staticClass:"mdi mdi-alert-circle-outline align-self-start text-danger mr-2"}),t._v(" "),e("div",[t._v("\n          At least one token hasn't been priced yet, making it impossible to evaluate the price\n          impact. Please confirm only if you're happy with the current swap rate.\n        ")])]):t._e()],1)]):t._e(),t._v(" "),t.isStale?e("b-alert",{staticClass:"d-flex justify-content-between align-items-center mt-3 mb-0",attrs:{show:"",variant:"warning"}},[e("div",[e("i",{staticClass:"iexc-danger mr-1 icon-fix"}),t._v("\n      "+t._s(t.SWAP_STRINGS.RATE_UPDATED)+"\n    ")]),t._v(" "),e("b-button",{staticClass:"btn-sm",on:{click:function(e){return t.reset()}}},[t._v("\n      "+t._s(t.SWAP_STRINGS.ACCEPT)+"\n    ")])],1):t._e()],1)}),[],!1,null,null,null);e.default=component.exports},1955:function(t,e,o){"use strict";o.r(e);var n=o(420),r=o(1729),l=o(1128),c=o(1177),m=o(416),d=o(1151),h=o(1170),T=o(1184),k=o(21),f=o(1162),v=o(1133),_=o(1129),A=o(244),x=o(54);const{RATE:y,MINIMUM_RECEIVED:w,MAXIMUM_SOLD:I,PRICE_IMPACT:S,PROCESSING:C,SELL_TAX:R,BUY_TAX:P,SWAP:E,WRAP:O,UNWRAP:N,APPROVE_TOKEN:F}=A.d;var L={components:{Processing:_.default,Accordion:v.default,TokenInputFull:f.default,DataRow:l.default,SettingsModal:c.default,ConfirmModal:r.default,TokenImg:m.default,TokenSelect:d.default,TokenImportModal:h.default,Refresh:T.default},props:{exchangeType:{type:String,default:"v2"},lastRefreshTime:{type:Number,default:0},forceRefreshFunc:{type:Function,default:null},tokenAddress1:{type:String,default:null},tokenAddress2:{type:String,default:null}},data:()=>({selectFromToken:null,selectToToken:null,fromTokenAmount:null,fromTokenUSD:null,toTokenUSD:null,toTokenAmount:null,tokensToImport:[],maxFromTokenInputAmount:null,minToTokenInputAmount:null,fromTokenApproved:!0,swapBasedOnFromToken:!0,error:null,approveLoading:!1,swapLoading:!1,swapRoute:[],path:[],feeRoute:[],priceImpact:0,feePercent:0,inputStyle:{},updatingInput:!1,updatingOutput:!1,updateRouteWithDebounceFunc:null,ALGEBRA:A.c.ALGEBRA,RATE:y,MINIMUM_RECEIVED:w,MAXIMUM_SOLD:I,PRICE_IMPACT:S,PROCESSING:C,SELL_TAX:R,BUY_TAX:P,SWAP:E,WRAP:O,UNWRAP:N,APPROVE_TOKEN:F,ERROR_TEMPLATE:x.c.ERROR_TEMPLATE}),computed:{account(){return this.$store.getters["web3-provider/account"]},slippage(){return this.$store.getters["exchange-config/slippage"]},maxHops(){return this.$store.getters["exchange-config/maxHops"]},tokens(){return this.$contracts.supportedTokens.tokens.filter((t=>!t.excludeFromExchange))},fromToken(){var t;return null===(t=this.selectFromToken)||void 0===t?void 0:t.selectedToken},toToken(){var t;return null===(t=this.selectToToken)||void 0===t?void 0:t.selectedToken},feeUSD(){return this.swapRoute&&this.swapRoute.length>0?this.feePercent*this.fromTokenAmount*this.fromToken.price/100:0},maxFromTokenAmount(){return this.fromToken&&this.account?this.fromToken.accountBalanceFormatted:null},maxToTokenAmount(){return this.toToken&&this.account?this.toToken.accountBalanceFormatted:null},fromTokenSymbol(){return this.fromToken?this.fromToken.symbol:null},isDataInitialized(){return this.$store.getters["general/isDataInitialized"]},toTokenSymbol(){return this.toToken?this.toToken.symbol:null},fromTokenInputBottomInfos(){return"balance: ".concat(this.getLocaleString(this.maxFromTokenAmount,18)||"0"," ").concat(this.fromTokenSymbol||"")},toTokenInputBottomInfos(){return"balance: ".concat(this.getLocaleString(this.maxToTokenAmount,18)||"0"," ").concat(this.toTokenSymbol||"")},fromTokenValueInToToken(){return this.toTokenAmount/this.fromTokenAmount},toTokenValueInToToken(){return this.fromTokenAmount/this.toTokenAmount},isV2(){return"v2"===this.exchangeType},mode(){return this.isV2?"V2 mode":"V3 mode"},isHighPriceImpact(){return!this.isInvalidPriceImpact&&(Number(this.priceImpact)<0&&Math.abs(this.priceImpact)>5)},isInvalidPriceImpact(){return null===this.priceImpact},priceImpactDisplay(){return this.isInvalidPriceImpact?"Price couldn't be determined":"".concat(this.getLocaleString(Math.abs(this.priceImpact),4,4)," %")}},watch:{lastRefreshTime(){this.updateRouteWithDebounce()},slippage(){this.updateRouteWithDebounce()},maxHops(){this.updateRouteWithDebounce()},fromToken(t,e){var o,n;t&&(null===(o=this.toToken)||void 0===o?void 0:o.address)===t.address&&(null===(n=this.toToken)||void 0===n?void 0:n.symbol)===t.symbol&&(this.selectToToken.selectedToken=e),this.onUserInputFromTokenAmount(),this.updateInputWidth()},toToken(t,e){var o,n;t&&(null===(o=this.fromToken)||void 0===o?void 0:o.address)===t.address&&(null===(n=this.fromToken)||void 0===n?void 0:n.symbol)===t.symbol&&(this.selectFromToken.selectedToken=e),this.toTokenAmount=null,this.onUserInputFromTokenAmount(),this.updateInputWidth()},isDataInitialized(){this.init()},exchangeType(){this.swapBasedOnFromToken?this.onUserInputFromTokenAmount():this.onUserInputToTokenAmount()}},async mounted(){this.selectFromToken=this.$refs.selectFromToken,this.selectToToken=this.$refs.selectToToken,this.isDataInitialized&&await this.init()},methods:{async connectWallet(){await this.$connectWallet.connect()},async init(){await this.checkInitTokens(),this.tokensToImport.length>0&&this.$bvModal.show("importTokens"),this.updateInputWidth()},async checkInitTokens(){if(this.tokenAddress1){const t=await Object(k.e)(this.$store.app,this.tokenAddress1);t&&t.external&&!t.imported?this.tokensToImport.push(t):this.selectFromToken.selectedToken=t}else{let t=this.tokens.find((i=>i.defaultSwapInput));t=t&&t.isWNative?t.native:t,this.selectFromToken.selectedToken=t||this.tokens[0]}if(this.tokenAddress2&&this.tokenAddress2!==this.tokenAddress1){const t=await Object(k.e)(this.$store.app,this.tokenAddress2);t&&t.external&&!t.imported?this.tokensToImport.push(t):this.selectToToken.selectedToken=t}else{let t=this.tokens.find((i=>i.defaultSwapOutput));t=t&&t.isWNative?this.$contracts.nativeToken:t,this.selectToToken.selectedToken=t||this.$contracts.grailToken}},invertTokens(){const t=this.fromToken;this.selectFromToken.selectedToken=this.toToken,this.selectToToken.selectedToken=t},onUserInputFromTokenAmount(){this.swapBasedOnFromToken=!0,this.toTokenAmount=null,this.minToTokenInputAmount=null,this.maxFromTokenInputAmount=this.fromTokenAmount,this.updatingInput=!0,this.updateRouteWithDebounce()},updateRouteWithDebounce(){var t;null===(t=this.updateRouteWithDebounceFunc)||void 0===t||t.cancel();const e=Object(n.debounce)(this.updateRoute,1e3);this.updateRouteWithDebounceFunc=e,e()},onUserInputToTokenAmount(){this.swapBasedOnFromToken=!1,this.fromTokenAmount=null,this.maxFromTokenInputAmount=null,this.minToTokenInputAmount=this.toTokenAmount,this.updatingOutput=!0,this.updateRouteWithDebounce()},isUnwrapOrWrap(){return this.toToken&&this.fromToken&&(this.fromToken.isNative||this.toToken.isNative)&&this.toToken.address===this.fromToken.address},async updateRoute(){if(this.error=null,this.toToken&&this.fromToken){Object(k.d)({store:this.$store,$contracts:this.$contracts},[this.fromToken,this.toToken],!0);let t=null;const e=this.isV2?this.$contracts.factory:this.$contracts.quoter;if(this.isUnwrapOrWrap()){const path=[{symbol:this.fromTokenSymbol,address:this.fromToken.address},{symbol:this.toTokenSymbol,address:this.fromToken.address}];this.swapBasedOnFromToken&&this.fromTokenAmount&&this.fromTokenAmount>0?(this.toTokenAmount=this.fromTokenAmount,this.minToTokenInputAmount=this.fromTokenAmount,t={bestRoute:[],path:path,feeRoute:[0],totalSwapFee:0,priceImpact:0}):!this.swapBasedOnFromToken&&this.toTokenAmount&&this.toTokenAmount>0&&(this.fromTokenAmount=this.toTokenAmount,this.maxFromTokenInputAmount=this.toTokenAmount,t={bestRoute:[],path:path,feeRoute:[0],totalSwapFee:0,priceImpact:0})}else this.swapBasedOnFromToken&&this.fromTokenAmount&&this.fromTokenAmount>0?(t=await e.getBestRouteExactIn(this.fromToken,this.toToken,this.fromTokenAmount,this.slippage,this.maxHops,20),t&&t.outputAmount>0?(this.toTokenAmount=t.outputAmount,this.minToTokenInputAmount=t.minOutputAmount):(this.toTokenAmount=null,this.minToTokenInputAmount=null,t?t.outputAmount<=0&&(this.error="Insufficient liquidity"):this.error="No route found")):!this.swapBasedOnFromToken&&this.toTokenAmount&&this.toTokenAmount>0&&(t=await e.getBestRouteExactOut(this.fromToken,this.toToken,this.toTokenAmount,this.slippage,this.maxHops),t&&t.inputAmount>0?(this.fromTokenAmount=t.inputAmount,this.maxFromTokenInputAmount=t.maxInputAmount):(this.fromTokenAmount=null,this.maxFromTokenInputAmount=null,t?t.inputAmount<=0&&(this.error="Insufficient liquidity"):this.error="No route found"));t?(this.swapRoute=t.bestRoute,this.path=t.path,this.feeRoute=t.feeRoute,this.fromTokenUSD=t.inputUSD,this.toTokenUSD=t.outputUSD,this.priceImpact=t.priceImpact,this.feePercent=t.totalSwapFee,this.account&&!this.error&&(this.fromToken.hasSufficientBalance(this.fromTokenAmount)||(this.error="Insufficient balance")),!this.error&&this.priceImpact>20&&(this.error="Price impact too high")):(this.swapRoute=[],this.path=[],this.feeRoute=[],this.fromTokenUSD=null,this.toTokenUSD=null,this.priceImpact=0,this.feePercent=0,(null!==this.fromTokenAmount&&!this.fromToken.isValidAmount(this.fromTokenAmount)||null!==this.toTokenAmount&&!this.toToken.isValidAmount(this.toTokenAmount))&&(this.error="Invalid amount")),this.updatingInput=!1,this.updatingOutput=!1,await this.refreshApprove()}},async refreshApprove(){if(this.account){const t=this.isV2?this.$contracts.router.address:this.$contracts.routerV3.address;this.fromTokenApproved=await this.fromToken.hasAccountApproval(this.account,t,this.fromTokenAmount),this.approveLoading&&this.fromTokenApproved&&(this.approveLoading=!1)}},async fromTokenApprove(){if(!this.$store.getters["web3-provider/accountProvider"])return;const t=this.isV2?this.$contracts.router.address:this.$contracts.routerV3.address;this.approveLoading=!0,this.approveLoading=await this.fromToken.approveMax(t)},updateInputWidth(){const t=this;this.$nextTick((()=>{const e=document.querySelector("#token-input-0").offsetWidth,o=document.querySelector("#token-input-1").offsetWidth;t.inputStyle=e>o?{"max-width":"".concat(o,"px")}:{"max-width":"".concat(e,"px")}}))}}},U=o(23),component=Object(U.a)(L,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("div",{staticClass:"d-flex align-items-center justify-content-between mb-3"},[e("div",[e("h3",[t._v(t._s(t.$t("pages.exchange.title")))]),t._v(" "),e("span",{staticClass:"text-primary"},[t._v(t._s(t.mode))])]),t._v(" "),e("div",[e("refresh",{attrs:{"force-refresh-func":t.forceRefreshFunc}}),t._v(" "),e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.exchange-settings",modifiers:{"exchange-settings":!0}}],staticClass:"right-bar-toggle",attrs:{type:"button",variant:"icon"}},[e("i",{staticClass:"mdi mdi-cog"})]),t._v(" "),e("settings-modal")],1)]),t._v(" "),e("b-row",{staticClass:"d-flex align-items-center bg-darker rounded full-token-input-widget gx-0"},[e("b-col",{staticClass:"bg-dark hover-slight h-100 p-0 rounded-left token-select-widget",attrs:{cols:"5",sm:"4"}},[e("token-select",{ref:"selectFromToken",staticClass:"h-100 w-100 px-3",attrs:{id:"select-from-token",tokens:t.tokens,label:t.$t("components.swap.swapFrom")}})],1),t._v(" "),e("b-col",{staticClass:"flex-grow-1 pr-3"},[e("token-input-full",{staticClass:"flex-grow-1 ml-1",attrs:{id:"token-input-0",unit:t.fromTokenSymbol,"max-amount":t.maxFromTokenAmount,"usd-value":t.fromTokenUSD,"safe-max":!!t.fromToken&&t.fromToken.isNative},on:{input:t.onUserInputFromTokenAmount},model:{value:t.fromTokenAmount,callback:function(e){t.fromTokenAmount=e},expression:"fromTokenAmount"}})],1)],1),t._v(" "),e("b-row",{staticClass:"d-flex align-items-center token-input-between-icon"},[e("b-col",{staticClass:"d-flex justify-content-center",attrs:{cols:"4"}},[e("div",{staticClass:"d-flex align-items-center justify-content-center rounded-circle bg-black cursor-pointer hover-slight position-relative icon-container",on:{click:function(e){return t.invertTokens()}}},[e("i",{staticClass:"mdi mdi-swap-vertical-variant text-primary font-size-16",staticStyle:{transform:"rotateY(180deg)"}})])])],1),t._v(" "),e("b-row",{staticClass:"d-flex align-items-center bg-darker rounded gx-0 full-token-input-widget"},[e("b-col",{staticClass:"bg-dark hover-slight h-100 p-0 rounded-left token-select-widget",attrs:{cols:"5",sm:"4"}},[e("token-select",{ref:"selectToToken",staticClass:"h-100 w-100 px-3",attrs:{id:"select-to-token",tokens:t.tokens,label:t.$t("components.swap.swapTo")}})],1),t._v(" "),e("b-col",{staticClass:"flex-grow-1 pr-3"},[e("token-input-full",{staticClass:"flex-grow-1 ml-1 text-secondary",attrs:{id:"token-input-1",unit:t.toTokenSymbol,disabled:t.isV2,"max-amount":t.maxToTokenAmount,"hide-max":"","usd-value":t.toTokenUSD},on:{input:t.onUserInputToTokenAmount},model:{value:t.toTokenAmount,callback:function(e){t.toTokenAmount=e},expression:"toTokenAmount"}})],1)],1),t._v(" "),e("div",{staticClass:"my-2"},[t.fromToken&&t.fromToken.sellTax>0?e("div",{staticClass:"d-flex align-items-center justify-content-center my-2 p-1 bg-primary-opacity rounded-sm text-center"},[e("i",{staticClass:"mdi mdi-transfer text-primary mr-2 font-size-20"}),t._v("\n      "+t._s(t.SELL_TAX(t.fromToken.symbol,t.fromToken.sellTax/100))+"\n    ")]):t._e(),t._v(" "),t.toToken&&t.toToken.buyTax>0?e("div",{staticClass:"d-flex align-items-center justify-content-center my-2 p-1 bg-primary-opacity rounded-sm text-center"},[e("i",{staticClass:"mdi mdi-transfer text-primary mr-2 font-size-20"}),t._v("\n      "+t._s(t.BUY_TAX(t.toToken.symbol,t.toToken.buyTax/100))+"\n    ")]):t._e(),t._v(" "),!t.updatingInput&&!t.updatingOutput&&t.fromTokenAmount&&t.toTokenAmount?e("accordion",{staticClass:"bg-darker border-lighter rounded-sm my-2",attrs:{"force-between":""},scopedSlots:t._u([{key:"label",fn:function(){return[e("div",{staticClass:"w-100 p-2 d-flex align-items-center"},[e("span",[t._v("\n            1 "+t._s(t.fromTokenSymbol)+" =\n            "+t._s(t.getLocaleString(t.fromTokenValueInToToken,4))+"\n            "+t._s(t.toTokenSymbol)+"\n            "),e("span",{staticClass:"text-secondary text-small"},[t._v("\n              ($"+t._s(t.getLocaleString(t.fromToken.price,2,2))+")\n            ")])]),t._v(" "),t.isHighPriceImpact||t.isInvalidPriceImpact?e("i",{staticClass:"mdi mdi-alert-circle-outline text-danger ml-1 font-size-16"}):t._e()])]},proxy:!0}],null,!1,839399955)},[t._v(" "),e("div",{staticClass:"bg-darker"},[e("div",{staticClass:"bg-darker border-lighter border-left-0 border-right-0 border-bottom-0 p-2"},[e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.fromTokenSymbol)+"/"+t._s(t.toTokenSymbol)+" "+t._s(t.RATE))]},proxy:!0},{key:"value",fn:function(){return[e("span",[t._v("1 "+t._s(t.fromTokenSymbol))]),t._v(" "),e("i",{staticClass:"mdi mdi-arrow-right"}),t._v("\n              "+t._s(t.getLocaleString(t.fromTokenValueInToToken,3,4))+"\n              "+t._s(t.toTokenSymbol)+"\n            ")]},proxy:!0}],null,!1,662065169)}),t._v(" "),e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.toTokenSymbol)+"/"+t._s(t.fromTokenSymbol)+" Rate")]},proxy:!0},{key:"value",fn:function(){return[e("span",[t._v("1 "+t._s(t.toTokenSymbol))]),t._v(" "),e("i",{staticClass:"mdi mdi-arrow-right"}),t._v("\n              "+t._s(t.getLocaleString(t.toTokenValueInToToken,3,4))+"\n              "+t._s(t.fromTokenSymbol)+"\n            ")]},proxy:!0}],null,!1,500125274)}),t._v(" "),t.swapBasedOnFromToken&&!t.isUnwrapOrWrap()?e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.MINIMUM_RECEIVED))]},proxy:!0},{key:"value",fn:function(){return[t._v("\n              "+t._s(t.toSignificantDigits(t.minToTokenInputAmount))+"\n              "+t._s(t.toTokenSymbol)+"\n            ")]},proxy:!0}],null,!1,604898712)}):t._e(),t._v(" "),t.swapBasedOnFromToken||t.isUnwrapOrWrap()?t._e():e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.MAXIMUM_SOLD))]},proxy:!0},{key:"value",fn:function(){return[t._v("\n              "+t._s(t.getLocaleString(t.maxFromTokenInputAmount,4,4))+"\n              "+t._s(t.fromTokenSymbol)+"\n            ")]},proxy:!0}],null,!1,2754842266)}),t._v(" "),e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.PRICE_IMPACT))]},proxy:!0},{key:"value",fn:function(){return[e("span",{class:{"text-danger":t.isHighPriceImpact||t.isInvalidPriceImpact,"text-success":Number(t.priceImpact)>0}},[t.isInvalidPriceImpact?t._e():e("span",[t._v("\n                  "+t._s(Number(t.priceImpact)<0?"-":"+")+"\n                ")]),t._v("\n                "+t._s(t.priceImpactDisplay)+"\n              ")])]},proxy:!0}],null,!1,4092382278)})],1),t._v(" "),!t.updatingInput&&!t.updatingOutput&&t.fromTokenAmount&&t.toTokenAmount?e("div",{staticClass:"d-flex flex-row align-items-center justify-content-between bg-dark overflow-hidden border-lighter border-left-0 border-right-0 border-bottom-0 p-2"},t._l(t.path,(function(o,n){return e("div",{key:n,staticClass:"d-flex align-items-center",class:{"flex-grow-1":n!==Object.keys(t.path).length-1}},[e("div",{staticClass:"text-center"},[e("token-img",{staticClass:"pb-1 d-flex justify-content-center",attrs:{token:t.$contracts.supportedTokens.tokens.find((t=>t.address===o.address)),size:"sm"}}),t._v(" "),e("span",{staticClass:"d-none d-sm-inline-flex font-size-13 text-weight-500"},[t._v("\n                "+t._s(o.symbol)+"\n              ")]),t._v(" "),e("span",{staticClass:"d-inline-flex d-sm-none"},[t._v(t._s(o.symbol))])],1),t._v(" "),n!==Object.keys(t.path).length-1?e("div",{staticClass:"d-flex align-items-center justify-content-center flex-grow-1 px-1 px-sm-2 px-md-3 px-lg-1 px-xl-2"},[e("div",{staticClass:"text-center"},[e("i",{staticClass:"mdi mdi-arrow-right text-secondary"}),t._v(" "),e("br"),t._v(" "),e("span",{staticClass:"text-secondary text-small text-subvalue font-size-11 pt-1"},[t._v("\n                  "+t._s(t.getLocaleString(t.feeRoute[n],2))+"%\n                ")])])]):t._e()])})),0):t._e()])]):t._e(),t._v(" "),t.updatingInput&&Number(t.fromTokenAmount)>0||t.updatingOutput&&Number(t.toTokenAmount)>0?e("div",{staticClass:"d-flex align-items-center justify-content-center my-2 py-2 text-secondary"},[e("div",{staticClass:"spinner-border",attrs:{role:"status"}}),t._v(" "),e("span",{staticClass:"ml-2"},[t._v(t._s(t.PROCESSING))])]):t._e()],1),t._v(" "),e("div",{staticClass:"text-center mt-0"},[t.account?e("div",[t.fromTokenApproved||!t.fromToken||!t.toToken||null!==t.error||t.isUnwrapOrWrap()?e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.swap-confirmation",modifiers:{"swap-confirmation":!0}}],staticClass:"btn-lg w-100",attrs:{disabled:!t.fromToken||!t.toToken||!t.fromTokenAmount||Number(t.fromTokenAmount)<=0||null!==t.error||t.swapLoading||t.updatingInput||t.updatingOutput,variant:null!==t.error?"danger":"primary"}},[t.swapLoading?e("Processing"):e("span",[null!==t.error?e("span",[t._v(t._s(t.ERROR_TEMPLATE(t.error)))]):t.isUnwrapOrWrap()?t.fromToken.isNative?e("span",[t._v(t._s(t.WRAP))]):e("span",[t._v(t._s(t.UNWRAP))]):e("span",[t._v(t._s(t.SWAP))])])],1):e("b-button",{staticClass:"btn-lg w-100",attrs:{variant:"primary",disabled:t.approveLoading},on:{click:function(e){return t.fromTokenApprove()}}},[t.approveLoading?e("Processing"):e("span",[t._v(t._s(t.APPROVE_TOKEN(t.fromToken.symbol)))])],1)],1):e("b-button",{staticClass:"btn-lg w-100",attrs:{variant:"primary"},on:{click:function(e){return t.connectWallet()}}},[t._v("\n      "+t._s(t.CONNECT_WALLET_GLOBAL)+"\n    ")])],1),t._v(" "),t.isV2?t._e():e("div",{staticClass:"d-flex align-items-center justify-content-center text-small text-secondary mt-3"},[t._v("\n    Powered by\n    "),e("a",{attrs:{href:t.ALGEBRA,target:"_blank"}},[e("img",{staticClass:"ml-2",staticStyle:{position:"relative",top:"-2px"},attrs:{src:"/images/ext/algebra.svg",alt:"algebra",height:"12"}})])]),t._v(" "),e("confirm-modal",{attrs:{"from-token":t.fromToken,"to-token":t.toToken,"from-token-amount":t.fromTokenAmount,"to-token-amount":t.toTokenAmount,"max-from-token-amount":t.maxFromTokenInputAmount,"min-to-token-amount":t.minToTokenInputAmount,"price-impact":t.priceImpact,"swap-fees-amount":t.feeUSD,"swap-based-on-from-token":t.swapBasedOnFromToken,path:t.path,"exchange-type":t.exchangeType,"approved-valid":t.fromTokenApproved}}),t._v(" "),e("TokenImportModal",{attrs:{id:"importTokens",tokens:t.tokensToImport},on:{"confirm-import":t.checkInitTokens}})],1)}),[],!1,null,null,null);e.default=component.exports}}]);