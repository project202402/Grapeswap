(window.webpackJsonp=window.webpackJsonp||[]).push([[13,271,274,276],{1144:function(t,e,n){"use strict";n.r(e);n(8);var o=n(27),l=n(1146),r=n(21),c=n(103),d=n(416),k=n(17),m={components:{Modal:c.default,TokenImg:d.default,ParticularTokensList:l.default},props:{modalId:{type:String,default:null},tokens:{type:Array,default:()=>[]},importMode:{type:Boolean,default:!1},showTopTraded:{type:Boolean,default:!0}},data:()=>({search:"",isSearching:!1,searchedTokens:[],isImporting:!1}),computed:{filteredTokens(){const t=this.tokens.concat(this.searchedTokens).filter((t=>t.symbol.toLowerCase().includes(this.search.toLowerCase())||t.address.toLowerCase()===this.search.toLowerCase()));return this.sortTokens(t)},commonTokens(){return[...this.tokens.filter((t=>t.isNative||t.isWNative)),...this.tokens.filter((t=>t.common&&!t.isNative&&!t.isWNative)).sort(((a,b)=>a.symbol.localeCompare(b.symbol)))]},topTradedTokens(){return Object.values(this.tokens).filter((t=>!t.common&&!t.isNative&&!t.isWNative)).sort(((a,b)=>b.volumeUSD-a.volumeUSD)).slice(0,4)},chainConfig(){return this.$store.getters["web3-provider/chainConfig"]}},watch:{search(){!this.filteredTokens.length&&Object(o.isAddress)(this.search)?this.searchForToken(this.search):this.searchedTokens.splice(0,this.searchedTokens.length)}},methods:{getLocaleString:k.b,clearFilters(){(""!==this.search||this.searchedTokens.length>0)&&(this.search="",this.searchedTokens=[])},sortTokens:t=>t.sort(((t,e)=>{if(t.accountBalanceUSD===e.accountBalanceUSD){const n=t.symbol.toLowerCase(),o=e.symbol.toLowerCase();return n<o?-1:n>o?1:0}return Number(t.accountBalanceUSD)<=Number(e.accountBalanceUSD)?1:-1})),selectToken(t){t.external&&!t.imported||this.isImporting?this.isImporting=!1:(this.$bvModal.hide(this.modalId),this.$emit("update-selected-token",t))},async searchForToken(address){this.isSearching=!0;const t=await Object(r.e)(this.$store.app,address);t&&!this.searchedTokens.find((t=>t.address===address))&&this.searchedTokens.push(t),this.isSearching=!1},async importToken(t){this.isImporting=!0;const e=this.searchedTokens.findIndex((e=>e.address===t.address));this.searchedTokens.splice(e,1);const n=this.chainConfig.frontend.featureFlags;await this.$contracts.pushSupportedToken(t,n)},async removeImportedToken(t){this.isImporting=!0,await this.$contracts.removeSupportedToken(t),await this.searchForToken(t.address)}}},h=n(23),component=Object(h.a)(m,(function(){var t=this,e=t._self._c;return e("modal",{ref:t.modalId,attrs:{id:t.modalId},on:{shown:t.clearFilters},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"w-100"},[e("h3",[t._v(t._s(t.importMode?"Import a token":"Select a token"))]),t._v(" "),e("div",{staticClass:"mt-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.importMode?"Search by address":"Search by name or address",onClick:"this.setSelectionRange(0, this.value.length)"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])])]},proxy:!0},{key:"cancel",fn:function(){return[e("b-button",{staticClass:"w-100",attrs:{variant:"secondary"},on:{click:function(e){return t.$bvModal.hide(t.modalId)}}},[t._v("Close")])]},proxy:!0}])},[t._v(" "),t.commonTokens.length?e("particular-tokens-list",{attrs:{tokens:t.commonTokens,"select-token":t.selectToken}}):t._e(),t._v(" "),t.topTradedTokens.length?e("particular-tokens-list",{attrs:{title:"Top traded",tokens:t.topTradedTokens,"select-token":t.selectToken}}):t._e(),t._v(" "),t.importMode?e("h4",{staticClass:"mt-3"},[t._v("Searched tokens")]):e("h4",{staticClass:"mt-3"},[t._v("Tokens list")]),t._v(" "),e("div",{staticClass:"w-100"},[t.isSearching?e("div",[e("div",{staticClass:"spinner-border"})]):t.filteredTokens.length||t.isSearching?e("div",{staticClass:"btn-group-vertical w-100",attrs:{role:"group"}},t._l(t.filteredTokens,(function(n){return e("div",{key:n.address+n.symbol,staticClass:"w-100 mb-1"},[e("div",{staticClass:"w-100 d-flex justify-content-between align-items-center px-1",class:!n.external||n.imported?"btn btn-simple-link":"",on:{click:function(e){return t.selectToken(n)}}},[e("div",{staticClass:"d-flex text-left align-items-center"},[n.external&&!n.imported?e("div",{staticClass:"mr-3"},[e("b-button",{attrs:{variant:"secondary"},on:{click:function(e){return t.importToken(n)}}},[t._v("Import")])],1):e("token-img",{staticClass:"mr-2",attrs:{token:n}}),t._v(" "),e("div",[e("div",[t._v("\n                "+t._s(n.symbol)+"\n                "),n.imported?e("span",{staticClass:"text-small ml-1 text-weight-300"},[t._v("\n                  (imported)\n                ")]):t._e()]),t._v(" "),e("div",{staticClass:"text-secondary text-weight-400"},[t._v("\n                "+t._s(n.fullname)+"\n              ")]),t._v(" "),n.imported?e("a",{staticClass:"text-small",attrs:{href:"#"},on:{click:function(e){return t.removeImportedToken(n)}}},[t._v("\n                remove token\n              ")]):t._e()])],1),t._v(" "),e("div",{staticClass:"text-right",class:{"text-muted":"0.0"===n.accountBalanceFormatted}},[e("div",[t._v("\n              "+t._s("0.0"===n.accountBalanceFormatted?"0":t.getLocaleString(n.accountBalanceFormatted))+"\n            ")]),t._v(" "),n.accountBalanceUSD>0?e("div",{staticClass:"text-small text-muted"},[t._v("\n              $"+t._s(t.getLocaleString(n.accountBalanceUSD,3,3))+"\n            ")]):t._e()])])])})),0):e("div",[t._v("No result found")])])],1)}),[],!1,null,null,null);e.default=component.exports},1146:function(t,e,n){"use strict";n.r(e);var o={components:{TokenImg:n(416).default},props:{title:{type:String,default:"Common bases"},tokens:{type:Array,default:()=>[]},selectToken:{type:Function,required:!0}}},l=n(23),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-1 mb-3"},[e("h4",[t._v(t._s(t.title))]),t._v(" "),e("b-row",{staticClass:"align-items-center"},t._l(t.tokens,(function(n){return e("b-col",{key:n.address+n.symbol,staticClass:"my-1",attrs:{cols:"4",sm:"3"}},[e("b-button",{staticClass:"align-items-center w-100 justify-content-start px-1 py-1 line-height-reset",attrs:{variant:"simple-link"},on:{click:function(e){return t.selectToken(n)}}},[e("token-img",{staticClass:"mr-2",attrs:{token:n,size:"sm"}}),t._v(" "),e("span",{staticClass:"text-weight-500"},[t._v(t._s(n.symbol))])],1)],1)})),1)],1)}),[],!1,null,null,null);e.default=component.exports},1151:function(t,e,n){"use strict";n.r(e);var o=n(1144),l={components:{TokenImg:n(416).default,TokenListModal:o.default},props:{id:{type:String,required:!0},tokens:{type:Array,default:null},label:{type:String,required:!0},largeDisplay:{type:Boolean,default:!1},defaultSelectedToken:{type:Object,default:null},labelClass:{type:String,default:"text-secondary"}},data:()=>({imageError:!1,selectedToken:null,tokenListModal:null}),mounted(){this.tokenListModal=this.$refs.selectedTokenModal,this.selectedToken=this.defaultSelectedToken},methods:{updateSelectedToken(t){this.selectedToken=t,this.$emit("onSelectToken",t)}}},r=n(23),component=Object(r.a)(l,(function(){var t=this,e=t._self._c;return e("div",[e("div",{directives:[{name:"b-modal",rawName:"v-b-modal",value:t.id,expression:"id"}],staticClass:"h-100"},[t.largeDisplay?e("div",{staticClass:"token-select text-center py-5 px-3"},[e("div",{staticClass:"d-flex justify-content-center"},[e("token-img",{staticClass:"mr-2",attrs:{token:t.selectedToken,size:"xxl"}})],1),t._v(" "),e("div",{staticClass:"items-center mt-3"},[e("h3",{staticClass:"d-inline-flex flex-row align-items-baseline"},[t.selectedToken?e("div",[e("div",[t._v(t._s(t.selectedToken.symbol))]),t._v(" "),t.selectedToken.isLpV3?e("div",{staticClass:"h5 text-weight-400 text-secondary"},[t._v("\n              "+t._s(t.selectedToken.fullname)+"\n            ")]):t._e()]):e("span",{staticClass:"text-secondary"},[t._v("Select")]),t._v(" "),e("i",{staticClass:"mdi mdi-chevron-down text-secondary ml-2 mr-1"})])])]):e("div",{staticClass:"d-flex align-items-center token-select h-100"},[e("token-img",{staticClass:"d-none d-md-flex mr-2",attrs:{token:t.selectedToken,size:"lxl"}}),t._v(" "),e("token-img",{staticClass:"d-flex d-md-none mr-2",attrs:{token:t.selectedToken,size:"lxl"}}),t._v(" "),e("div",[e("div",{staticClass:"d-none d-sm-block",class:t.labelClass},[t._v(t._s(t.label))]),t._v(" "),e("div",{staticClass:"items-center"},[t.selectedToken?e("h4",{staticClass:"d-inline-flex flex-row align-items-baseline mb-0"},[e("span",[t._v(t._s(t.selectedToken.symbol))]),t._v(" "),e("i",{staticClass:"d-none d-sm-flex mdi mdi-chevron-down text-secondary ml-1"})]):e("div",{staticClass:"d-flex align-items-center"},[e("span",{staticClass:"font-size-10"},[t._v("SELECT")]),t._v(" "),e("i",{staticClass:"mdi mdi-chevron-down text-secondary ml-1"})])])])],1)]),t._v(" "),e("token-list-modal",{ref:"selectedTokenModal",attrs:{"modal-id":t.id,tokens:t.tokens},on:{"update-selected-token":t.updateSelectedToken}})],1)}),[],!1,null,null,null);e.default=component.exports},1503:function(t,e,n){"use strict";n.r(e);var o=n(1504),l=n(1128),r=n(1151),c=n(1162),d=n(1133),k=n(1129),m=n(1139),h={components:{Processing:k.default,Accordion:d.default,TokenInputFull:c.default,ConfirmModal:o.default,DataRow:l.default,TokenSelect:r.default,ConnectWallet:m.default},props:{initToken0:{type:Object,default:null},initToken1:{type:Object,default:null}},data:()=>({selectToken0:null,selectToken1:null,token0Amount:null,token1Amount:null,token0MinAmount:null,token1MinAmount:null,token0Approved:!1,token1Approved:!1,token0Approving:!1,token1Approving:!1,ratioBasedOnToken0:!0,error:null,inputStyle:{}}),computed:{chainConfig(){return this.$store.getters["web3-provider/chainConfig"]},account(){return this.$store.getters["web3-provider/account"]},slippage(){return this.$store.getters["exchange-config/slippage"]},tokens(){return this.$contracts.supportedTokens.tokens.filter((t=>!t.excludeFromExchange))},token0(){var t;return null===(t=this.selectToken0)||void 0===t?void 0:t.selectedToken},token1(){var t;return null===(t=this.selectToken1)||void 0===t?void 0:t.selectedToken},token0Symbol(){return this.token0?this.token0.symbol:null},token1Symbol(){return this.token1?this.token1.symbol:null},token0SwapRate(){return this.token1&&this.token0&&this.selectedLp&&this.selectedLp.isInitialized?(1e3*this.token0.getFormattedAmountFromFull(this.selectedLp.getAmountOut(this.token1.address,this.token1.getFullAmountFromFormatted("0.001")))).toFixed(this.token0.decimals):0},token1SwapRate(){return this.token1&&this.token0&&this.selectedLp&&this.selectedLp.isInitialized?(1e3*this.token1.getFormattedAmountFromFull(this.selectedLp.getAmountOut(this.token0.address,this.token0.getFullAmountFromFormatted("0.001")))).toFixed(this.token1.decimals):0},maxToken0Amount(){return this.token0&&this.account?this.token0.accountBalanceFormatted:null},maxToken1Amount(){return this.token1&&this.account?this.token1.accountBalanceFormatted:null},poolShare(){return this.selectedLp?this.selectedLp.token0.address===this.token0.address?this.selectedLp.getPonderatedPoolShareFromPairTokens(this.token0Amount,this.token1Amount):this.selectedLp.getPonderatedPoolShareFromPairTokens(this.token1Amount,this.token0Amount):0},lpAmount(){var t;return null!==(t=this.selectedLp)&&void 0!==t&&t.isInitialized?this.selectedLp.token0.address===this.token0.address?this.selectedLp.getLPAmountFromPairTokensFormatted(this.token0Amount,this.token1Amount):this.selectedLp.getLPAmountFromPairTokensFormatted(this.token1Amount,this.token0Amount):"0"},token0Ratio(){var t;return null!==(t=this.selectedLp)&&void 0!==t&&t.isInitialized?this.selectedLp.getOtherTokenAmountFormatted(this.token0,this.token1,"1"):Number(this.token1Amount/this.token0Amount).toString()},token1Ratio(){var t;return null!==(t=this.selectedLp)&&void 0!==t&&t.isInitialized?this.selectedLp.getOtherTokenAmountFormatted(this.token1,this.token0,"1"):Number(this.token0Amount/this.token1Amount).toString()},selectedLp(){return this.token0&&this.token1?this.$contracts.factory.getLpByTokens(this.token0,this.token1):null},token0InputBottomInfos(){return"balance: ".concat(this.maxToken0Amount||"0"," ").concat(this.token0Symbol||"")},token1InputBottomInfos(){return"balance: ".concat(this.maxToken1Amount||"0"," ").concat(this.token1Symbol||"")},isDataInitialized(){return this.$store.getters["general/isDataInitialized"]}},watch:{"$parent.localActive"(){this.$parent.localActive||this.clearData()},slippage(){this.syncLPRatio()},token0(t,e){t&&this.token1&&t.address===this.token1.address&&(this.selectToken1.selectedToken=e)},token1(t,e){t&&this.token0&&t.address===this.token0.address&&(this.selectToken0.selectedToken=e)},async"selectedLp.kLast"(){var t;null!==(t=this.selectedLp)&&void 0!==t&&t.address&&await this.syncLPRatio()},initToken0(){this.selectToken0.selectedToken=this.initToken0},initToken1(){this.selectToken1.selectedToken=this.initToken1},selectedLp(){this.loadingNftCreate=!1,this.$emit("matchingPosition",this.token0,this.token1,this.selectedLp)}},mounted(){this.selectToken0=this.$refs.selectToken0,this.selectToken1=this.$refs.selectToken1,this.selectToken0.selectedToken=this.initToken0,this.selectToken1.selectedToken=this.initToken1},beforeDestroy(){this.clearData()},methods:{async connectWallet(){await this.$connectWallet.connect()},resetInputAmounts(){this.token1Amount=null,this.token0Amount=null},onUserInputToken0Amount(t){var e;null!==t&&this.token1&&(null!==(e=this.selectedLp)&&void 0!==e&&e.isInitialized&&(this.token1Amount=null),this.ratioBasedOnToken0=!0,this.syncLPRatio())},onUserInputToken1Amount(t){var e;null!=t&&this.token0&&(null!==(e=this.selectedLp)&&void 0!==e&&e.isInitialized&&(this.token0Amount=null),this.ratioBasedOnToken0=!1,this.syncLPRatio())},async syncLPRatio(){var t;if(this.error=null,this.selectedLp){if((null!==this.token0Amount&&!this.token0.isValidAmount(this.token0Amount)||null!==this.token1Amount&&!this.token1.isValidAmount(this.token1Amount))&&(this.error="Invalid amount"),null!==(t=this.selectedLp)&&void 0!==t&&t.isInitialized)if(this.ratioBasedOnToken0){this.token0MinAmount=this.token0Amount;const t=this.selectedLp.getOtherTokenAmountFormatted(this.token0,this.token1,this.token0Amount);this.token1Amount=Number(t)?t:null;const e=this.selectedLp.getOtherTokenAmountLessSlippageFormatted(this.token0,this.token1,this.token0Amount,this.slippage);this.token1MinAmount=Number(e)?e:null}else{this.token1MinAmount=this.token1Amount;const t=this.selectedLp.getOtherTokenAmountFormatted(this.token1,this.token0,this.token1Amount);this.token0Amount=Number(t)?t:null;const e=this.selectedLp.getOtherTokenAmountLessSlippageFormatted(this.token1,this.token0,this.token1Amount,this.slippage);this.token0MinAmount=Number(e)?e:null}this.token0.hasSufficientBalance(this.token0Amount)&&this.token1.hasSufficientBalance(this.token1Amount)||(this.error="Insufficient balance"),await this.refreshApprove()}},async refreshApprove(){if(this.account){const t=this.$contracts.router.address;this.token0Approved=!!this.token0&&await this.token0.hasAccountApproval(this.account,t,this.token0Amount),this.token0Approving&&this.token0Approved&&(this.token0Approving=!1),this.token1Approved=!!this.token1&&await this.token1.hasAccountApproval(this.account,t,this.token1Amount),this.token1Approving&&this.token1Approved&&(this.token1Approving=!1)}},async approve(t){const e=this.$contracts.router.address;t.address===this.token0.address?(this.token0Approving=!0,this.token0Approving=await t.approveMax(e)):(this.token1Approving=!0,this.token1Approving=await t.approveMax(e))},clearData(){this.token0Approved=!1,this.token1Approved=!1,this.token0Approving=!1,this.token1Approving=!1}}},v=n(23),component=Object(v.a)(h,(function(){var t=this,e=t._self._c;return e("div",[e("b-row",{staticClass:"d-flex align-items-center bg-darker rounded full-token-input-widget gx-0"},[e("b-col",{staticClass:"bg-dark hover-slight h-100 p-0 rounded-left token-select-widget",attrs:{cols:"5",sm:"4"}},[e("token-select",{ref:"selectToken0",staticClass:"h-100 w-100 px-3",attrs:{id:"select-token-0",tokens:t.tokens,label:"Token 1"}})],1),t._v(" "),e("b-col",{staticClass:"flex-grow-1 pr-3"},[e("token-input-full",{staticClass:"flex-grow-1 ml-1",attrs:{id:"token-input-0",unit:t.token0Symbol,"max-amount":t.maxToken0Amount,"usd-value":t.token0&&t.token0Amount?(t.token0.price*t.token0Amount).toString():null,"safe-max":!!t.token0&&t.token0.isNative},on:{input:t.onUserInputToken0Amount},model:{value:t.token0Amount,callback:function(e){t.token0Amount=e},expression:"token0Amount"}})],1)],1),t._v(" "),e("b-row",{staticClass:"d-flex align-items-center token-input-between-icon"},[e("b-col",{staticClass:"d-flex justify-content-center",attrs:{cols:"4"}},[e("div",{staticClass:"d-flex align-items-center justify-content-center rounded-circle bg-black hover-slight position-relative icon-container"},[e("i",{staticClass:"mdi mdi-plus text-primary font-size-16"})])])],1),t._v(" "),e("b-row",{staticClass:"d-flex align-items-center bg-darker rounded full-token-input-widget gx-0"},[e("b-col",{staticClass:"bg-dark hover-slight h-100 p-0 rounded-left token-select-widget",attrs:{cols:"5",sm:"4"}},[e("token-select",{ref:"selectToken1",staticClass:"h-100 w-100 px-3",attrs:{id:"select-token-1",tokens:t.tokens,label:"Token 2"}})],1),t._v(" "),e("b-col",{staticClass:"flex-grow-1 pr-3"},[e("token-input-full",{staticClass:"flex-grow-1 ml-1",attrs:{id:"token-input-1",unit:t.token1Symbol,"max-amount":t.maxToken1Amount,"usd-value":t.token1&&t.token1Amount?(t.token1.price*t.token1Amount).toString():null,"safe-max":!!t.token1&&t.token1.isNative},on:{input:t.onUserInputToken1Amount},model:{value:t.token1Amount,callback:function(e){t.token1Amount=e},expression:"token1Amount"}})],1)],1),t._v(" "),t.selectedLp?e("accordion",{staticClass:"bg-darker border-lighter rounded-sm mt-3",attrs:{"force-between":""},scopedSlots:t._u([{key:"label",fn:function(){return[e("div",{staticClass:"w-100 p-2"},[e("div",[t._v("\n          1 "+t._s(t.token0Symbol)+" = "+t._s(t.getLocaleString(t.token0Ratio,4))+"\n          "+t._s(t.token1Symbol)+"\n          "),e("span",{staticClass:"text-secondary text-small"},[t._v("\n            ($"+t._s(t.getLocaleString(t.token0.price,2,2))+")\n          ")])]),t._v(" "),e("div",[t._v("\n          1 "+t._s(t.token1Symbol)+" = "+t._s(t.getLocaleString(t.token1Ratio,4))+"\n          "+t._s(t.token0Symbol)+"\n          "),e("span",{staticClass:"text-secondary text-small"},[t._v("\n            ($"+t._s(t.getLocaleString(t.token1.price,2,2))+")\n          ")])])])]},proxy:!0}],null,!1,3756214197)},[t._v(" "),e("div",{staticClass:"bg-darker border-lighter border-left-0 border-right-0 border-bottom-0 p-2"},[e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v("Pair type")]},proxy:!0},{key:"value",fn:function(){return[e("span",{staticClass:"text-primary"},[t._v("\n            "+t._s(t.selectedLp.isStable?"Stable":"Volatile")+"\n          ")])]},proxy:!0}],null,!1,3837044350)}),t._v(" "),t.selectedLp.isInitialized?e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.token0Symbol)+" swap rate")]},proxy:!0},{key:"value",fn:function(){return[t._v("\n          1 "+t._s(t.token0Symbol)+"\n          "),e("i",{staticClass:"mdi mdi-arrow-right"}),t._v("\n          "+t._s(t.getLocaleString(t.token1SwapRate,7))+"\n          "+t._s(t.token1Symbol)+"\n        ")]},proxy:!0}],null,!1,3020674968)}):t._e(),t._v(" "),t.selectedLp.isInitialized?e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.token1Symbol)+" swap rate")]},proxy:!0},{key:"value",fn:function(){return[t._v("\n          1 "+t._s(t.token1Symbol)+"\n          "),e("i",{staticClass:"mdi mdi-arrow-right"}),t._v("\n          "+t._s(t.getLocaleString(t.token0SwapRate,7))+"\n          "+t._s(t.token0Symbol)+"\n        ")]},proxy:!0}],null,!1,4121845400)}):t._e(),t._v(" "),e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.token0Symbol)+" / "+t._s(t.token1Symbol)+" liquidity ratio")]},proxy:!0},{key:"value",fn:function(){return[t._v(t._s(t.getLocaleString(t.token0Ratio,7)))]},proxy:!0}],null,!1,2407783614)}),t._v(" "),e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.token1Symbol)+" / "+t._s(t.token0Symbol)+" liquidity ratio")]},proxy:!0},{key:"value",fn:function(){return[t._v(t._s(t.getLocaleString(t.token1Ratio,7)))]},proxy:!0}],null,!1,3106485151)}),t._v(" "),e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v("Pool share")]},proxy:!0},{key:"value",fn:function(){return[t.poolShare>0?e("span",[t._v(t._s(t.poolShare)+"%")]):e("span",[t._v("< 0.001%")])]},proxy:!0}],null,!1,4020846498)}),t._v(" "),e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v("LP address")]},proxy:!0},{key:"value",fn:function(){return[e("span",[e("a",{staticClass:"text-secondary",attrs:{href:t.getExplorerAddressUrl(t.chainConfig,t.selectedLp.address),target:"_blank"}},[t._v("\n              "+t._s(t.selectedLp.address.substring(0,6))+"..."+t._s(t.selectedLp.address.substring(36,42))+"\n            ")]),t._v(" "),e("a",{staticClass:"text-secondary",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.copyToClipboard(t.selectedLp.address)}}},[e("i",{staticClass:"mdi mdi-content-copy d-inline-block ml-1"})])])]},proxy:!0}],null,!1,856962530)})],1)]):t._e(),t._v(" "),e("div",[e("b-alert",{staticClass:"mt-3 mb-0",attrs:{show:null!==t.selectedLp&&void 0!==t.selectedLp&&t.selectedLp.isStable,variant:"warning"}},[e("i",{staticClass:"mdi mdi-alert-circle-outline text-primary mr-1"}),t._v("\n      Stable pools may appear imbalanced when providing liquidity. This is by design of the AMM\n      implementation, and won't affect the swap rate of the pool, which will tend to remain close\n      to 1:1.\n    ")]),t._v(" "),e("b-alert",{staticClass:"mt-3 mb-0",attrs:{show:null!==t.selectedLp&&void 0!==t.selectedLp&&!t.selectedLp.isInitialized,variant:"warning"}},[e("i",{staticClass:"mdi mdi-alert-circle-outline text-primary mr-1"}),t._v("\n      You are the first liquidity provider! The token ratio that you choose here will set the\n      price on this pool.\n    ")]),t._v(" "),e("b-alert",{staticClass:"mt-3 mb-0",attrs:{show:null!==t.error,variant:"danger"}},[t._v("\n      Error: "+t._s(t.error)+"\n    ")])],1),t._v(" "),t.account?e("div",{staticClass:"text-center mt-3"},[t.token1Approved&&t.token0Approved||!t.selectedLp?e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.add-confirmation",modifiers:{"add-confirmation":!0}}],staticClass:"btn-lg w-100",attrs:{disabled:!t.selectedLp||!t.token0Amount||!t.token1Amount||null!==t.error,variant:"primary"}},[t._v("\n      Add liquidity\n    ")]):!t.token0Approved&&t.token1Approved?e("b-button",{staticClass:"btn-lg w-100",attrs:{variant:"primary",disabled:!t.account||t.token0Approving},on:{click:function(e){return t.approve(t.token0)}}},[t.token0Approving?e("Processing"):e("span",[t._v("Approve "+t._s(t.token0.symbol))])],1):t.token0Approved&&!t.token1Approved?e("b-button",{staticClass:"btn-lg w-100",attrs:{variant:"primary",disabled:!t.account||t.token1Approving},on:{click:function(e){return t.approve(t.token1)}}},[t.token1Approving?e("Processing"):e("span",[t._v("Approve "+t._s(t.token1.symbol))])],1):e("b-row",[t.token0Approved?t._e():e("b-col",{attrs:{cols:"6"}},[e("b-button",{staticClass:"btn-lg w-100",attrs:{variant:"primary",disabled:!t.account||t.token0Approving},on:{click:function(e){return t.approve(t.token0)}}},[t.token0Approving?e("Processing"):e("span",[t._v("Approve "+t._s(t.token0.symbol))])],1)],1),t._v(" "),t.token1Approved?t._e():e("b-col",{attrs:{cols:"6"}},[e("b-button",{staticClass:"btn-lg w-100",attrs:{variant:"primary",disabled:!t.account||t.token1Approving},on:{click:function(e){return t.approve(t.token1)}}},[t.token1Approving?e("Processing"):e("span",[t._v("Approve "+t._s(t.token1.symbol))])],1)],1)],1)],1):e("connect-wallet",{attrs:{"is-large":""}}),t._v(" "),e("confirm-modal",{attrs:{token0:t.token0,token1:t.token1,"token0-amount":t.token0Amount,"token1-amount":t.token1Amount,"token0-min-amount":t.token0MinAmount,"token1-min-amount":t.token1MinAmount,"token0-ratio":t.token0Ratio,"token1-ratio":t.token1Ratio,"ratio-based-on-token0":t.ratioBasedOnToken0,"pool-share":t.poolShare,"lp-amount":t.lpAmount,"create-position":!1,lp:t.selectedLp},on:{liquidityAdded:t.resetInputAmounts}})],1)}),[],!1,null,null,null);e.default=component.exports},1504:function(t,e,n){"use strict";n.r(e);var o=n(17),l=n(416),r=n(1128),c=n(103),d=n(1133),k=n(1130),m={components:{Accordion:d.default,Modal:c.default,TokenImg:l.default,DataRow:r.default},mixins:[k.a],props:{token0:{type:Object,default:null},token1:{type:Object,default:null},lp:{type:Object,default:null},token0Amount:{type:String,default:""},token1Amount:{type:String,default:""},token0MinAmount:{type:String,default:""},token1MinAmount:{type:String,default:""},ratioBasedOnToken0:{type:Boolean,default:()=>!0},token0Ratio:{type:String,default:""},token1Ratio:{type:String,default:""},poolShare:{type:Number,default:()=>0},lpAmount:{type:String,default:"0"}},data:()=>({id:"add-confirmation",error:null,isStale:!1}),computed:{lpAmountValue(){return this.lp&&this.lpAmount&&this.lp.price?this.lpAmount*this.lp.price:0}},watch:{token0Amount(){this.isStale=!0},token1Amount(){this.isStale=!0}},methods:{getSuccessMessage(){return{title:'You\'ve successfully provided <span class="text-primary text-weight-500">~$'.concat(Object(o.b)(this.lpAmountValue,2,2)," of ").concat(this.lp.symbol,"</span> liquidity."),subtitleLinks:[{url:"/positions",label:"Positions page"},{url:"/pools/".concat(this.lp.address),label:"pool page"}],subtitleMessage:"to check your position"}},action(){this.header={title:this.lp.symbol,token:this.lp,version:"v2"},this.steps=[{description:"Adding liquidity..."}],this.successMessage={title:'You\'ve successfully provided <span class="text-primary text-weight-500">~$'.concat(Object(o.b)(this.lpAmountValue,2,2)," of ").concat(this.lp.symbol,"</span> liquidity."),subtitleLinks:[{url:"/positions",label:"Positions page"},{url:"/pools/".concat(this.lp.address),label:"pool page"}],subtitleMessage:"to check your position"},this.initLoading(this.id),this.addLiquidity()},async addLiquidity(){try{const t=this.$store.getters["web3-provider/account"],e=this.$store.getters["exchange-config/deadlineDuration"]/1e3;let n;this.ratioBasedOnToken0?(n=await this.$contracts.router.addLiquidity(this.token0,this.token1,this.token0Amount,this.token1Amount,this.token0MinAmount,this.token1MinAmount,t,e),n.error&&"Transaction rejected."!==n.error&&(n.error="Estimated "+this.token1.symbol+" amount invalid. Check your slippage configuration")):(n=await this.$contracts.router.addLiquidity(this.token1,this.token0,this.token1Amount,this.token0Amount,this.token1MinAmount,this.token0MinAmount,t,e),n.error&&"Transaction rejected."!==n.error&&(n.error="Estimated "+this.token0.symbol+" amount invalid. Check your slippage configuration")),await this.checkTx(n,!0),setTimeout(this.lp.refreshCreatedStatus(),5e3),this.$emit("liquidityAdded")}catch(t){this.txError("Error while adding liquidity. If the issue persists, please contact our support.")}},reset(){this.isStale=!1}}},h=n(23),component=Object(h.a)(m,(function(){var t=this,e=t._self._c;return e("modal",{attrs:{id:t.id},on:{shown:function(e){return t.reset()}},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"text-center"},[e("h2",{staticClass:"mt-2 mb-1"},[e("span",{staticClass:"text-primary"},[t._v("Add")]),t._v("\n        V2 liquidity\n      ")]),t._v(" "),e("span",{staticClass:"text-large text-secondary"},[t._v("\n        Deposit assets on "+t._s(t.APP_NAME_GLOBAL)+" and start earning yield.\n      ")])])]},proxy:!0},{key:"action",fn:function(){return[e("b-button",{staticClass:"w-50",attrs:{variant:"primary",disabled:t.isStale},on:{click:t.action}},[t._v("\n      Add liquidity\n    ")])]},proxy:!0}])},[t._v(" "),t.token0&&t.token1?e("div",[e("div",{staticClass:"d-flex align-items-center"},[e("token-img",{staticClass:"mr-2",attrs:{token:t.token0,size:"lg"}}),t._v(" "),e("div",[e("div",{staticClass:"text-secondary"},[t._v(t._s(t.token0.symbol))]),t._v(" "),e("div",{staticClass:"items-center"},[e("h3",{staticClass:"d-inline-flex flex-row align-items-baseline"},[t._v("\n            "+t._s(t.token0Amount)+"\n          ")])])])],1),t._v(" "),e("div",{staticClass:"d-flex align-items-center justify-content-center rounded-circle hover-slight position-relative",staticStyle:{width:"25px",height:"25px","margin-left":"7px","margin-top":"0px","margin-bottom":"2px","background-color":"#121212"}},[e("i",{staticClass:"mdi mdi-plus text-primary font-size-16"})]),t._v(" "),e("div",{staticClass:"d-flex align-items-center"},[e("token-img",{staticClass:"mr-2",attrs:{token:t.token1,size:"lg"}}),t._v(" "),e("div",[e("div",{staticClass:"text-secondary"},[t._v(t._s(t.token1.symbol))]),t._v(" "),e("div",{staticClass:"items-center"},[e("h3",{staticClass:"d-inline-flex flex-row align-items-baseline"},[t._v("\n            "+t._s(t.token1Amount)+"\n          ")])])])],1),t._v(" "),e("accordion",{staticClass:"bg-darker border-lighter rounded-sm mt-4 mb-3",attrs:{"force-between":""},scopedSlots:t._u([{key:"label",fn:function(){return[e("div",{staticClass:"w-100 p-2"},[e("div",[t._v("\n            1 "+t._s(t.token0.symbol)+" = "+t._s(t.getLocaleString(t.token0Ratio,4))+"\n            "+t._s(t.token1.symbol)+"\n            "),e("span",{staticClass:"text-secondary text-small"},[t._v("\n              ($"+t._s(t.getLocaleString(t.token0.price,2,2))+")\n            ")])]),t._v(" "),e("div",[t._v("\n            1 "+t._s(t.token1.symbol)+" = "+t._s(t.getLocaleString(t.token1Ratio,4))+"\n            "+t._s(t.token0.symbol)+"\n            "),e("span",{staticClass:"text-secondary text-small"},[t._v("\n              ($"+t._s(t.getLocaleString(t.token1.price,2,2))+")\n            ")])])])]},proxy:!0}],null,!1,4011917301)},[t._v(" "),e("div",{staticClass:"bg-darker border-lighter border-left-0 border-right-0 border-bottom-0 p-2"},[e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v("Pair type")]},proxy:!0},{key:"value",fn:function(){return[e("span",{staticClass:"text-primary"},[t._v("\n              "+t._s(t.lp.isStable?"Stable":"Volatile")+"\n            ")])]},proxy:!0}],null,!1,1337574455)}),t._v(" "),e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.token0.symbol)+" / "+t._s(t.token1.symbol)+" liquidity ratio")]},proxy:!0},{key:"value",fn:function(){return[t._v(t._s(t.getLocaleString(t.token0Ratio,7)))]},proxy:!0}],null,!1,3295185278)}),t._v(" "),e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.token1.symbol)+" / "+t._s(t.token0.symbol)+" liquidity ratio")]},proxy:!0},{key:"value",fn:function(){return[t._v(t._s(t.getLocaleString(t.token1Ratio,7)))]},proxy:!0}],null,!1,2799980479)}),t._v(" "),e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v("Pool share")]},proxy:!0},{key:"value",fn:function(){return[t.poolShare>0?e("span",[t._v(t._s(t.poolShare)+"%")]):e("span",[t._v("< 0.001%")])]},proxy:!0}],null,!1,4020846498)})],1)]),t._v(" "),e("div",[e("h4",{staticClass:"mt-4 mb-3 text-weight-400 bg-dark rounded-sm p-2"},[e("span",[t._v("Estimates")])]),t._v(" "),e("div",{staticClass:"px-2"},[e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"text-white"},[t._v("Deposit value")])]},proxy:!0},{key:"value",fn:function(){return[t._v("$"+t._s(t.getLocaleString(t.lpAmountValue,2,2)))]},proxy:!0}],null,!1,665207142)}),t._v(" "),e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"text-white"},[t._v("Swap fees APR")])]},proxy:!0},{key:"value",fn:function(){return[e("span",{staticClass:"text-primary"},[t._v(t._s(t.getLocaleString(t.lp.feesApr,2,2))+"%")])]},proxy:!0}],null,!1,3198640993)}),t._v(" "),t.lp.campaignsApr>0?e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"text-white"},[t._v("Incentives APR")])]},proxy:!0},{key:"value",fn:function(){return[e("span",{staticClass:"text-primary"},[t._v(t._s(t.getLocaleString(t.lp.campaignsApr,2,2))+"%")])]},proxy:!0}],null,!1,1442858443)}):t._e()],1)])],1):t._e(),t._v(" "),t.isStale?e("b-alert",{staticClass:"d-flex justify-content-between border-primary align-items-center mt-3 mb-0",attrs:{show:"",variant:"warning"}},[e("div",[e("i",{staticClass:"mdi mdi-alert-circle-outline mr-1 text-primary"}),t._v("\n      Price updated\n    ")]),t._v(" "),e("b-button",{staticClass:"btn-sm",attrs:{variant:"dark"},on:{click:function(e){return t.reset()}}},[t._v("Accept")])],1):t._e(),t._v(" "),null!==t.error?e("b-alert",{staticClass:"mt-3 mb-0",attrs:{show:"",variant:"danger"}},[t._v("\n    Error: "+t._s(t.error)+"\n  ")]):t._e()],1)}),[],!1,null,null,null);e.default=component.exports}}]);