(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8503],{88055:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/swap",function(){return t(17726)}])},92182:function(e,n,t){"use strict";var i=t(62206);let o={dexPanelContainer:{position:"relative",width:"100%",height:"94px",background:"white3",padding:"10px",borderRadius:"10px",justifyContent:"space-between",flexDirection:"column"},panelTopContainer:{width:"100%",height:"auto",justifyContent:"space-between"},panelBottomContainer:{width:"100%",justifyContent:"space-between"},panelBottomText:{opacity:.8},swapDirectionText:{fontSize:"16px",position:"absolute",left:0,top:0,transform:"translate(0px, -30px)"},maxButton:{background:"primaryButton",alignItems:"center",justifyContent:"center",borderRadius:"6px",height:"22px",padding:"0px 8px",cursor:"pointer",fontSize:"12px",fontWeight:"600",ml:"10px",transition:"all .3s linear","&:active":{transform:"scale(0.9)"},":hover":i.hk}};n.Z=o},81279:function(e,n,t){"use strict";t.d(n,{U:function(){return i}});let i={INDUSTRY_STATS:"industryStats",HISTORICAL_INDUSTRY_STATS:"historicalIndustryStats",LHD_PROFILES:"lhdProfiles",LHD_PROFILE:"lhdProfile",LHD_PASSWORD_VERIFIED:"lhdPasswordVerified",HOMEPAGE_STATS:"homepageStats",LIVE_AND_UPCOMING:"liveAndUpcoming",TVL_STATS:"tvlStats",WIDO_QUOTE:"widoQuote",WIDO_ALLOWANCE:"widoAllowance",WIDO_APPROVAL:"widoApproval",WIDO_SIGN_APPROVAL:"widoSignApproval",TOKEN_HISTORIC:"tokenHistoric",BONDS_LANDING:"bondsLanding",BOND_POST_REFERENCE:"bondPostReference",WIDO_SUPPORTED_CONTRACTS:"widoSupportedContracts"}},63949:function(e,n,t){"use strict";t.d(n,{c:function(){return r}});var i=t(67294),o=t(96624),l=t(31936);function r(e,n,t){let r=(null==n?void 0:n.isToken)?n:void 0,d=(0,l.L)([r],t)[0],a=(0,o.Vi)((null==n?void 0:n.isNative)?t:void 0);return(0,i.useMemo)(()=>{if(e&&n&&t&&n.chainId===t){if(n.isToken)return d[n.address];if(n.isNative)return a[0]}},[e,t,n,d,a])}},67941:function(e,n,t){"use strict";t.d(n,{H:function(){return o}});var i=t(36517);let o=()=>{let e=(0,i.$o)("hideCircular");return!!e&&JSON.parse(e)}},17726:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return eU}});var i,o,l,r,d,a,u,c,s=t(39977),v=t(98745),p=t(1113),h=t(77985),x=t(77835),m=t(5808),f=t(18078),g=t(24738),C=t(67294),T=t(76606),y=t(89897),w=t(50434),A=t(80535),I=t(96624);(i=d||(d={}))[i.NOT_APPLICABLE=0]="NOT_APPLICABLE",i[i.WRAP=1]="WRAP",i[i.UNWRAP=2]="UNWRAP";let k={wrapType:d.NOT_APPLICABLE};function N(e){let{wrapInputError:n}=e,t=(0,f.Z)(),i=null==t?void 0:t.wrapped;switch(n){case a.NO_ERROR:return null;case a.ENTER_NATIVE_AMOUNT:return(0,s.BX)(m.xv,{children:["Enter ",null==t?void 0:t.symbol," amount"]});case a.ENTER_WRAPPED_AMOUNT:return(0,s.BX)(m.xv,{children:["Enter ",null==i?void 0:i.symbol," amount"]});case a.INSUFFICIENT_NATIVE_BALANCE:return(0,s.BX)(m.xv,{children:["Insufficient ",null==t?void 0:t.symbol," balance"]});case a.INSUFFICIENT_WRAPPED_BALANCE:return(0,s.BX)(m.xv,{children:["Insufficient ",null==i?void 0:i.symbol," balance"]})}}(o=a||(a={}))[o.NO_ERROR=0]="NO_ERROR",o[o.ENTER_NATIVE_AMOUNT=1]="ENTER_NATIVE_AMOUNT",o[o.ENTER_WRAPPED_AMOUNT=2]="ENTER_WRAPPED_AMOUNT",o[o.INSUFFICIENT_NATIVE_BALANCE=3]="INSUFFICIENT_NATIVE_BALANCE",o[o.INSUFFICIENT_WRAPPED_BALANCE=4]="INSUFFICIENT_WRAPPED_BALANCE";var b=t(21125),E=t(72903),Z=t(48317),S=t(23848),B=t(7353),U=t(36236),P=t(65010),_=t(49055),R=t(71891),D=t(30923),O=t(51526),W=t(34343),L=t(70794),X=t(91218),z=e=>{var n,t;let{fromAmount:i,fromToken:o,toAmount:l,toToken:r,discount:d}=e,[a,u]=(0,C.useState)(!1),c=null!==(n=(0,X._i)(i,null==o?void 0:o.decimals))&&void 0!==n?n:new L.Z(0),v=null!==(t=(0,X._i)(l,null==r?void 0:r.decimals))&&void 0!==t?t:new L.Z(0),p=c.div(v),h=v.div(c),x=(0,R.Y5)(d?p.div(1+d/100):p),f=(0,R.Y5)(d?h.multipliedBy(1+d/100):h),g="1 ".concat(null==r?void 0:r.symbol.toUpperCase()," = ").concat(x," ").concat(null==o?void 0:o.symbol.toUpperCase()),T="1 ".concat(null==o?void 0:o.symbol.toUpperCase()," = ").concat(f," ").concat(null==r?void 0:r.symbol.toUpperCase());return(0,s.tZ)(m.kC,{onClick:()=>u(e=>!e),sx:{minWidth:"fit-content",zIndex:1},children:(0,s.tZ)(m.xv,{size:"12px",children:a?g:T})})},F=t(80795),M=e=>{var n,t,i,o,l,r;let{route:d,fee:a}=e,[u,c]=(0,C.useState)(!1),{expectedOutputAmount:v,expectedOutputMin:p,priceImpact:h,routingFee:x}=(0,C.useMemo)(()=>{var e,n,t,i,o,l;return{expectedOutputAmount:(0,R.Y5)(null!==(o=(0,X._i)(null==d?void 0:d.toAmount,null==d?void 0:null===(e=d.toToken)||void 0===e?void 0:e.decimals))&&void 0!==o?o:new L.Z(0)),expectedOutputMin:(0,R.Y5)(null!==(l=(0,X._i)(null==d?void 0:d.toAmountMin,null==d?void 0:null===(n=d.toToken)||void 0===n?void 0:n.decimals))&&void 0!==l?l:new L.Z(0)),priceImpact:(parseFloat(null==d?void 0:d.fromAmountUSD)-parseFloat(null==d?void 0:d.toAmountUSD)*((null!=a?a:0)+1))*100/parseFloat(null==d?void 0:d.fromAmountUSD),routingFee:a?null===(t=(0,X._i)(null==d?void 0:d.fromAmount,null==d?void 0:null===(i=d.fromToken)||void 0===i?void 0:i.decimals))||void 0===t?void 0:t.times(a):new L.Z(0)}},[a,null==d?void 0:d.fromAmount,null==d?void 0:d.fromAmountUSD,null==d?void 0:null===(n=d.fromToken)||void 0===n?void 0:n.decimals,null==d?void 0:d.toAmount,null==d?void 0:d.toAmountMin,null==d?void 0:d.toAmountUSD,null==d?void 0:null===(t=d.toToken)||void 0===t?void 0:t.decimals]),f=(0,C.useMemo)(()=>!h||h<2?"success":h<5?"yellow":100===h?"text":"error",[h]),g=isFinite(h)&&100!==h?h&&h>0?"".concat(h.toFixed(2)," %"):"< 0.001%":"-";return(0,s.BX)(m.kC,{sx:D.Z.dexTradeInfoContainer,children:[(0,s.BX)(m.kC,{sx:{width:"100%",justifyContent:"space-between"},children:[(0,s.tZ)(z,{fromAmount:null==d?void 0:d.fromAmount,fromToken:null==d?void 0:d.fromToken,toAmount:null==d?void 0:d.toAmount,toToken:null==d?void 0:d.toToken}),(0,s.tZ)(m.kC,{sx:{width:"100%",justifyContent:"flex-end"},onClick:()=>c(e=>!e),children:(0,s.tZ)(m.ny,{icon:"caret",direction:u?"up":"down"})})]}),(0,s.tZ)(O.M,{children:u&&(0,s.BX)(W.E.div,{initial:{height:0},animate:{height:"fit-content"},transition:{opacity:{duration:.2}},exit:{height:0},sx:{overflow:"hidden",width:"100%"},children:[(0,s.tZ)(F.iz,{backgroundColor:"white4"}),(0,s.BX)(m.kC,{sx:{alignItems:"center",justifyContent:"space-between"},children:[(0,s.tZ)(m.xv,{size:"12px",children:"Price impact"}),(0,s.tZ)(m.xv,{size:"12px",color:f,children:g})]}),(0,s.BX)(m.kC,{sx:{alignItems:"center",justifyContent:"space-between"},children:[(0,s.tZ)(m.xv,{size:"12px",children:" Routing fee "}),(0,s.BX)(m.xv,{size:"12px",children:[" ",x?(0,R.Y5)(x,3):"-"," ",null==d?void 0:null===(o=d.fromToken)||void 0===o?void 0:null===(i=o.symbol)||void 0===i?void 0:i.toUpperCase()," "]})]}),(0,s.BX)(m.kC,{sx:{alignItems:"center",justifyContent:"space-between"},children:[(0,s.tZ)(m.xv,{size:"12px",children:"Expected output"}),(0,s.tZ)(m.xv,{size:"12px",children:v?"".concat(v,"  ").concat(null==d?void 0:null===(l=d.toToken)||void 0===l?void 0:l.symbol):"-"})]}),(0,s.BX)(m.kC,{sx:{alignItems:"center",justifyContent:"space-between"},children:[(0,s.tZ)(m.xv,{size:"12px",children:"Minimum received"}),(0,s.tZ)(m.xv,{size:"12px",children:"".concat(p," ").concat(null==d?void 0:null===(r=d.toToken)||void 0===r?void 0:r.symbol)})]})]})})]})},j=t(10807),H=t(6781),G=t(98677),V=e=>{var n,t,i,o,l,r,d,a,u,c,v,p,h,x,f,g,C,T;let{selectedRoute:y,fee:w,onConfirm:A}=e,I=(0,j.U8)(null==y?void 0:null===(n=y.fromToken)||void 0===n?void 0:n.address,null==y?void 0:null===(t=y.fromToken)||void 0===t?void 0:t.chainId),k=(0,j.U8)(null==y?void 0:null===(i=y.toToken)||void 0===i?void 0:i.address,null==y?void 0:null===(o=y.toToken)||void 0===o?void 0:o.chainId),N=(0,R.ky)(null==y?void 0:y.fromAmount,null==y?void 0:null===(l=y.fromToken)||void 0===l?void 0:l.decimals,6),b=(0,R.ky)(null==y?void 0:y.toAmount,null==y?void 0:null===(r=y.toToken)||void 0===r?void 0:r.decimals,6),E=(0,R.ky)(null==y?void 0:y.toAmountMin,null==y?void 0:null===(d=y.toToken)||void 0===d?void 0:d.decimals),Z=(null==y?void 0:null===(a=y.fromToken)||void 0===a?void 0:a.chainId)!==(null==y?void 0:null===(u=y.toToken)||void 0===u?void 0:u.chainId),S=(parseFloat(null==y?void 0:y.fromAmountUSD)-parseFloat(null==y?void 0:y.toAmountUSD)*((null!=w?w:0)+1))*100/parseFloat(null==y?void 0:y.fromAmountUSD),B=S>10;return(0,s.BX)(s.HY,{children:[(0,s.BX)(m.kC,{sx:D.Z.inputContainer,children:[(0,s.BX)(m.kC,{sx:{alignItems:"center"},children:[(0,s.tZ)(G.Z,{currency:I,size:30}),(0,s.tZ)(m.xv,{ml:"10px",children:null==I?void 0:I.symbol})]}),(0,s.BX)(m.xv,{children:[N," ",(0,s.BX)("span",{sx:{fontSize:"12px",fontWeight:400},children:["($",parseFloat(null==y?void 0:y.fromAmountUSD).toLocaleString(),")"]})]})]}),(0,s.tZ)(m.kC,{sx:{justifyContent:"center"},children:(0,s.tZ)(m.kC,{sx:D.Z.container,children:(0,s.tZ)(m.kC,{sx:D.Z.subContainer,children:(0,s.tZ)(m.ny,{icon:"arrow",color:"primaryBright"})})})}),(0,s.BX)(m.kC,{sx:D.Z.outputContainer,children:[(0,s.BX)(m.kC,{sx:{alignItems:"center"},children:[(0,s.tZ)(G.Z,{currency:k,size:30}),(0,s.tZ)(m.xv,{ml:"10px",children:null==k?void 0:k.symbol})]}),(0,s.BX)(m.xv,{sx:{color:B?"error":"text"},children:[b," ",(0,s.BX)("span",{sx:{fontSize:"12px",fontWeight:400},children:["($",parseFloat(null==y?void 0:y.toAmountUSD).toLocaleString(),")"]})]})]}),(0,s.tZ)(M,{route:y,fee:w}),Z?(0,s.BX)(m.kC,{sx:{width:"100%",flexDirection:"column",m:"15px 0px"},children:[(0,s.BX)(m.xv,{size:"12px",weight:300,sx:{textAlign:"center",lineHeight:"20px"},children:["You are bridging ",(0,s.BX)("span",{sx:{fontWeight:700},children:[null==y?void 0:null===(v=y.fromToken)||void 0===v?void 0:null===(c=v.symbol)||void 0===c?void 0:c.toUpperCase()," "]}),"in"," ",(0,s.BX)("span",{sx:{fontWeight:700},children:[H.zl[null==y?void 0:null===(p=y.fromToken)||void 0===p?void 0:p.chainId]," "]}),"to ",(0,s.BX)("span",{sx:{fontWeight:700},children:[null==y?void 0:null===(x=y.toToken)||void 0===x?void 0:null===(h=x.symbol)||void 0===h?void 0:h.toUpperCase()," "]}),"in"," ",(0,s.BX)("span",{sx:{fontWeight:700},children:[H.zl[null==y?void 0:null===(f=y.toToken)||void 0===f?void 0:f.chainId]," "]}),"through ",(0,s.BX)("span",{sx:{fontWeight:700},children:[null==y?void 0:null===(g=y.steps[0])||void 0===g?void 0:g.toolDetails.name," "]})," bridge. Estimated time:"," ",(0,s.BX)("span",{sx:{fontWeight:700},children:[Math.round((null==y?void 0:null===(T=y.steps[0])||void 0===T?void 0:null===(C=T.estimate)||void 0===C?void 0:C.executionDuration)/60)," "]}),"minutes."]}),B&&(0,s.BX)(m.xv,{sx:{textAlign:"center",lineHeight:"20px",color:"error",fontSize:"12px"},children:["Price impact is ",S.toFixed(2),"%. Are you sure you want to proceed?"]})]}):(0,s.BX)(m.kC,{sx:{width:"100%",flexDirection:"column",m:"15px 0px"},children:[(0,s.BX)(m.xv,{size:"12px",weight:300,sx:{textAlign:"center",lineHeight:"20px"},children:["Output is estimated. You will receive at least"," ",(0,s.BX)("span",{sx:{fontWeight:700},children:[E," ",null==k?void 0:k.symbol]})," ","or the transaction will be cancelled."]}),B&&(0,s.BX)(m.xv,{sx:{textAlign:"center",lineHeight:"20px",color:"error",fontSize:"12px"},children:["Price impact is ",S.toFixed(2),"%. Are you sure you want to proceed?"]})]}),(0,s.tZ)(m.zx,{fullWidth:!0,onClick:A,children:(0,s.tZ)(m.xv,{color:"primaryBright",children:B?"SWAP ANYWAY":"Confirm"})})]})},q=e=>{var n,t,i,o,l,r,d,a,u;let{selectedRoute:c,attemptingTxn:v,txHash:p,swapErrorMessage:h,onConfirm:x,onDismiss:f,fee:g,newRates:C,confirmNewRates:T}=e,{t:y}=(0,_.$G)(),w=(0,R.ky)(null==c?void 0:c.fromAmount,null==c?void 0:null===(n=c.fromToken)||void 0===n?void 0:n.decimals),A=(0,R.ky)(null!==(d=null==C?void 0:C.newToAmount)&&void 0!==d?d:null==c?void 0:c.toAmount,null==c?void 0:null===(t=c.toToken)||void 0===t?void 0:t.decimals),I="".concat(y("Swapping")," ").concat(null!=w?w:""," ").concat(null!==(a=null==c?void 0:null===(i=c.fromToken)||void 0===i?void 0:i.symbol)&&void 0!==a?a:""," for ").concat(null!=A?A:""," ").concat(null!==(u=null==c?void 0:null===(o=c.toToken)||void 0===o?void 0:o.symbol)&&void 0!==u?u:""),k=(null==h?void 0:h.includes("INSUFFICIENT_OUTPUT_AMOUNT"))?y("Slippage Error: Please check your slippage using the ⚙️ icon & try again!"):(null==h?void 0:h.includes("user rejected transaction"))?y("Did you reject the transaction? I thought you were an Ape!"):(null==h?void 0:h.includes("transaction failed"))?y("It seems your transaction failed. Please check your tokens, amounts and slippage, then try again"):h,N=(null==h?void 0:h.includes("user rejected transaction"))?"Transaction Rejected":(null==h?void 0:h.includes("Exchange rate has changed!"))?"Rate Changed":(null==h?void 0:h.includes("transaction failed"))?"Transaction failed":(null==c?void 0:null===(l=c.fromToken)||void 0===l?void 0:l.chainId)!==(null==c?void 0:null===(r=c.toToken)||void 0===r?void 0:r.chainId)?"Confirm Bridge":"Confirm Swap";return(0,s.tZ)(m.u_,{title:N,children:(0,s.tZ)(m.kC,{sx:{width:"420px",maxWidth:"100%",flexDirection:"column"},children:h&&k?(0,s.tZ)(P.ht,{onDismiss:f,message:k,newRates:C,confirmNewRates:T}):v?(0,s.tZ)(P.PU,{pendingText:I}):p?(0,s.tZ)(P.rD,{hash:p,onDismiss:f}):(0,s.tZ)(V,{selectedRoute:c,fee:g,onConfirm:x})})})},Y=t(11163),$=t(67941),K=t(62873),Q=t(61928),J=t(28626),ee=t(16441),en=t(39499),et=t.n(en),ei=t(58671),eo=t(55083);(l=u||(u={}))[l.AMOUNT=1]="AMOUNT",l[l.ALLOWED=2]="ALLOWED";let el={1:{[T.Hz.address]:{type:u.AMOUNT,name:"USD Coin",version:"2"},[T.h1.address]:{type:u.ALLOWED,name:"Dai Stablecoin",version:"1"}}};(r=c||(c={}))[r.NOT_APPLICABLE=0]="NOT_APPLICABLE",r[r.LOADING=1]="LOADING",r[r.NOT_SIGNED=2]="NOT_SIGNED",r[r.SIGNED=3]="SIGNED";let er=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],ed=[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],ea=[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}],eu=[{name:"holder",type:"address"},{name:"spender",type:"address"},{name:"nonce",type:"uint256"},{name:"expiry",type:"uint256"},{name:"allowed",type:"bool"}];var ec=e=>{let{signatureState:n,approvalState:t,gatherPermitSignature:i,approveCallback:o}=e,[l,r]=(0,C.useState)(!1),d=(0,C.useCallback)(async()=>{r(!0);try{if(n===c.NOT_SIGNED&&i)try{await i()}catch(e){(null==e?void 0:e.code)!==4001&&await o()}else await o()}finally{r(!1)}},[n,i,o]);return(0,s.tZ)(m.zx,{fullWidth:!0,onClick:d,load:l||t===J.UK.PENDING,disabled:l||t===J.UK.PENDING,children:"Approve"})};let es=e=>"0x0000000000000000000000000000000000000000"===e?"ETH":e;var ev=t(97818),ep=t(1518);let eh=e=>{let{provider:n}=(0,h.useWeb3React)(),t=null==n?void 0:n.getSigner();return(0,C.useCallback)(async(n,i)=>{let o=new ep.Dd({integrator:"apeswap",apiKey:"6c74c061-6219-406c-a2f1-66fd812761f5.dadb1e80-4d43-43eb-bbb4-7ff4de0a7435"});if(t&&e)return await o.executeRoute(t,e,{updateRouteHook:n,acceptExchangeRateUpdateHook:i}).then(e=>(console.log("Executed route:",e),e)).catch(e=>{throw console.error("An error occurred while executing the route:",e),e})},[e,t])};var ex=e=>{var n,t,i;let{routingState:o,selectedRoute:l,wrapType:r,showWrap:a,wrapInputError:v,onWrap:x,inputError:f,inputCurrencyAmount:g,feeStructure:T}=e,I=(0,ev.Z)(),{chainId:k}=(0,h.useWeb3React)(),[{swapErrorMessage:E,attemptingTxn:Z,txHash:S},B]=(0,C.useState)({attemptingTxn:!1,swapErrorMessage:void 0,txHash:void 0}),P=(0,Q.Z)(),[_,D]=(0,J.re)(g),{state:O,gatherPermitSignature:W}=function(e,n){let{chainId:t}=(0,h.useWeb3React)(),i=t?eo.Cu[t]:void 0,o=(0,C.useMemo)(()=>(null==e?void 0:e.currency.isToken)?e:void 0,[e]);return function(e,n,t,i){var o,l;let{account:r,chainId:d,provider:a}=(0,h.useWeb3React)(),s=(null==e?void 0:null===(o=e.currency)||void 0===o?void 0:o.isToken)?e.currency.address:void 0,v=(0,A.N9)(s),p=(0,C.useMemo)(()=>[null!=r?r:void 0],[r]),x=(0,ei.Wk)(v,"nonces",p),m=null!=i?i:d&&s?null===(l=el[d])||void 0===l?void 0:l[s]:void 0,[f,g]=(0,C.useState)(null);return(0,C.useMemo)(()=>{var i,o;if(!e||!v||!r||!d||!t||!a||!x.valid||!s||!n||!m)return{state:c.NOT_APPLICABLE,signatureData:null,gatherPermitSignature:null};let l=null===(o=x.result)||void 0===o?void 0:null===(i=o[0])||void 0===i?void 0:i.toNumber();if(x.loading||"number"!=typeof l)return{state:c.LOADING,signatureData:null,gatherPermitSignature:null};let p=f&&f.owner===r&&f.deadline>=t.toNumber()&&f.tokenAddress===s&&f.nonce===l&&f.spender===n&&("allowed"in f||et().greaterThanOrEqual(et().BigInt(f.amount),e.quotient));return{state:p?c.SIGNED:c.NOT_SIGNED,signatureData:p?f:null,gatherPermitSignature:async function(){let i=m.type===u.ALLOWED,o=t.toNumber()+1200,c=e.quotient.toString(),v=i?{holder:r,spender:n,allowed:i,nonce:l,expiry:o}:{owner:r,spender:n,value:c,nonce:l,deadline:o},p=m.version?{name:m.name,version:m.version,verifyingContract:s,chainId:d}:{name:m.name,verifyingContract:s,chainId:d},h=JSON.stringify({types:{EIP712Domain:m.version?er:ed,Permit:i?eu:ea},domain:p,primaryType:"Permit",message:v});return a.send("eth_signTypedData_v4",[r,h]).then(ee.splitSignature).then(e=>{g({v:e.v,r:e.r,s:e.s,deadline:o,...i?{allowed:i}:{amount:c},nonce:l,chainId:d,owner:r,spender:n,tokenAddress:s,permitType:m.type})})}}},[e,v,r,d,t,a,x.loading,x.valid,x.result,s,n,m,f])}(o,i,n,null)}(g,P),L=!f&&_===J.UK.NOT_APPROVED||_===J.UK.PENDING,X=(0,Y.useRouter)(),z=(0,$.H)(),F=(0,y.Hn)(),M=eh(l),[j,G]=(0,C.useState)(null),[V,en]=(0,C.useState)(null),ep=(0,C.useCallback)((e,n)=>{B({attemptingTxn:!0,swapErrorMessage:"Exchange rate has changed!",txHash:void 0}),G(n),en(()=>n=>{B({attemptingTxn:!0,swapErrorMessage:void 0,txHash:void 0}),e(n)})},[]),ex=(0,C.useCallback)(async e=>!!ep&&await new Promise(n=>{ep(n,e)}),[ep]),em=(0,C.useRef)(!1),ef=(0,C.useCallback)(e=>{let n=(0,R.Q1)(e,!0);!n||S||em.current||(B({attemptingTxn:!1,swapErrorMessage:void 0,txHash:n}),F(n,{type:w.i.SWAP,tradeType:p.TradeType.EXACT_INPUT,inputCurrencyId:es(e.fromToken.address),inputCurrencyAmountRaw:e.fromAmount,expectedOutputCurrencyAmountRaw:e.toAmount,outputCurrencyId:es(e.toToken.address),minimumOutputCurrencyAmountRaw:e.toAmountMin}),em.current=!0)},[F,S]),eg=(0,C.useCallback)(()=>{M&&l&&(B({attemptingTxn:!0,swapErrorMessage:void 0,txHash:void 0}),M(ef,ex).then(e=>{var n,t,i,o,l,r,d;e&&(G(null),en(null),(0,K.Z)({event:"Swap",chain:k,data:{inputToken:null==e?void 0:e.fromToken.symbol,inputChain:null==e?void 0:e.fromToken.chainId,outputToken:null==e?void 0:e.toToken.symbol,outputChain:null==e?void 0:e.toToken.chainId,inputValue:(0,R.ky)(null==e?void 0:e.fromAmount,null==e?void 0:null===(n=e.fromToken)||void 0===n?void 0:n.decimals),outputValue:(0,R.ky)(null==e?void 0:e.toAmount,null==e?void 0:null===(t=e.toToken)||void 0===t?void 0:t.decimals),inputUsdValue:null==e?void 0:e.fromAmountUSD,outputUsdValue:null==e?void 0:e.toAmountUSD,fee:T.fee,feeTier:T.tier,dex:null==e?void 0:null===(l=e.steps)||void 0===l?void 0:null===(o=l[0])||void 0===o?void 0:null===(i=o.toolDetails)||void 0===i?void 0:i.name}}),em.current=!1,(null==e?void 0:null===(d=e.toToken)||void 0===d?void 0:null===(r=d.symbol)||void 0===r?void 0:r.toUpperCase())!=="BANANA"||z||X.push("?modal=circular-buy"))}).catch(e=>{G(null),en(null),B({attemptingTxn:!1,swapErrorMessage:e.message?e.message:e,txHash:void 0}),em.current=!1}))},[ex,M,k,T.fee,T.tier,z,X,l,ef]),eC=(0,C.useCallback)(()=>{B({attemptingTxn:!1,swapErrorMessage:void 0,txHash:void 0}),G(null),en(null)},[]),[eT]=(0,U.Z)((0,s.tZ)(q,{selectedRoute:l,attemptingTxn:Z,txHash:S,onConfirm:eg,swapErrorMessage:E,onDismiss:eC,fee:T.fee,newRates:j,confirmNewRates:V}),!0,!0,"swapConfirmModal"),ey=null!=l&&!!l.fromToken.chainId&&k!==(null==l?void 0:l.fromToken.chainId),ew=(null==l?void 0:null===(n=l.fromToken)||void 0===n?void 0:n.chainId)!==(null==l?void 0:null===(t=l.toToken)||void 0===t?void 0:t.chainId);return(f||o===b.q.NO_ROUTE_FOUND)&&!a?(0,s.tZ)(m.zx,{fullWidth:!0,disabled:!0,children:o===b.q.NO_ROUTE_FOUND?"No Route Found":f}):ey?(0,s.BX)(m.zx,{fullWidth:!0,onClick:()=>{var e,n;(null==l?void 0:null===(e=l.fromToken)||void 0===e?void 0:e.chainId)&&I(null==l?void 0:null===(n=l.fromToken)||void 0===n?void 0:n.chainId)},children:["Switch to ",H.zl[null==l?void 0:null===(i=l.fromToken)||void 0===i?void 0:i.chainId]]}):L?(0,s.tZ)(ec,{signatureState:O,approvalState:_,gatherPermitSignature:W,approveCallback:D}):a?(0,s.tZ)(m.zx,{disabled:!!v,onClick:x,fullWidth:!0,children:v?(0,s.tZ)(N,{wrapInputError:v}):r===d.WRAP?(0,s.tZ)(s.HY,{children:"Wrap"}):r===d.UNWRAP?(0,s.tZ)(s.HY,{children:"Unwrap"}):null}):(0,s.tZ)(m.zx,{fullWidth:!0,onClick:()=>{eT()},disabled:o===b.q.LOADING||o===b.q.SYNCING||o===b.q.INVALID||o===b.q.NO_ROUTE_FOUND,children:ew?"Bridge":"Swap"})},em=e=>{let{routingState:n,inputError:t,selectedRoute:i,showWrap:o,wrapType:l,wrapInputError:r,onWrap:d,inputCurrencyAmount:a,feeStructure:u}=e,{account:c}=(0,h.useWeb3React)();return(0,s.tZ)(m.kC,{mt:"10px",children:c?(0,s.tZ)(ex,{routingState:n,selectedRoute:i,showWrap:o,wrapInputError:r,wrapType:l,onWrap:d,inputError:t,inputCurrencyAmount:a,feeStructure:u}):(0,s.tZ)(B.Z,{})})},ef=t(80003),eg=t(62206),eC=e=>{let{onClick:n}=e;return(0,s.tZ)(m.kC,{sx:D.Z.swapSwitchContainer,children:(0,s.tZ)(m.kC,{sx:{...D.Z.swapSwitchButton,":hover":{...eg.hk}},onClick:n,children:(0,s.tZ)(m.ny,{icon:"swapArrows",width:"13px",color:"primaryBright"})})})},eT=()=>(0,s.tZ)(m.kC,{sx:{flexDirection:"column",width:"100%",maxWidth:"420px",height:"fit-content",background:"white2",padding:["15px 5px","15px 10px","15px"],borderRadius:"10px",justifyContent:"center",alignItems:"center"},children:(0,s.BX)(m.xv,{sx:{fontSize:"12px",fontWeight:"400",lineHeight:"14px",textAlign:"center"},children:["Are you swapping a reflext/tax token? If so, we recommend"," ",(0,s.tZ)(m.rU,{target:"_blank",href:"https://legacy.apeswap.finance/swap",children:"swapping on our V2 UI"})," ","for an optimized trading experience!"]})});let ey=[{address:"0x8a5d7fcd4c90421d21d30fcc4435948ac3618b2f",chain:56},{address:"0x98a2500a2c3b8877b0ed5ac3acc300c50bf7064b",chain:56},{address:"0x9Ae0290cD677dc69A5f2a1E435EF002400Da70F5",chain:56},{address:"0x37407D1CAbC422155A148bc7A3a0587C64225ea2",chain:56}];var ew=t(92182),eA=t(28145),eI=t(93359),ek=t(63949),eN=e=>{let{panelText:n,value:t,currency:i,currencyChain:o,onCurrencySelect:l,onUserInput:r,handleMaxInput:d,disabled:a,apiPrice:u}=e,{t:c}=(0,_.$G)(),{account:v}=(0,h.useWeb3React)(),p=(0,ek.c)(null!=v?v:void 0,null!=i?i:void 0,null!=o?o:void 0),x=(null==p?void 0:p.toSignificant(6))||"0",f="0.000000000000000001"===x?"0":x;return(0,s.BX)(m.kC,{sx:ew.Z.dexPanelContainer,children:[(0,s.BX)(m.kC,{sx:ew.Z.panelTopContainer,children:[(0,s.tZ)(m.xv,{sx:ew.Z.swapDirectionText,children:n}),(0,s.tZ)(m.Af,{disabled:a,onUserInput:r,value:t}),(0,s.tZ)(eA.Z,{currency:i,onCurrencySelect:l,variant:"omniChain"})]}),(0,s.BX)(m.kC,{sx:ew.Z.panelBottomContainer,children:[(0,s.tZ)(m.kC,{sx:{alignItems:"center",justifyContent:"center",opacity:a&&.4},children:t&&(0,s.tZ)(s.HY,{children:u?(0,s.tZ)(m.xv,{size:"12px",sx:ew.Z.panelBottomText,children:"."!==t&&t&&"$".concat(u)}):(0,s.tZ)(F.$j,{width:"15px",height:"15px"})})}),v&&(0,s.BX)(m.kC,{sx:{alignItems:"center"},children:[(0,s.tZ)(m.xv,{size:"12px",sx:ew.Z.panelBottomText,children:c("Balance: %balance%",{balance:f||"loading"})}),!f&&(0,s.tZ)(eI.Z,{}),parseFloat(f)>0&&d&&(0,s.tZ)(m.kC,{sx:ew.Z.maxButton,size:"sm",onClick:()=>d(E.gN.INPUT),children:(0,s.tZ)(m.xv,{color:"primaryBright",sx:{lineHeight:"0px"},children:c("MAX")})})]})]})]})},eb=t(86933),eE=e=>{var n,t,i,o;let{bond:l,route:r,chainId:d}=e,a=(0,Y.useRouter)(),[u,c]=(0,C.useState)(!1);return(0,s.BX)(m.kC,{sx:D.Z.dexTradeInfoContainer,children:[(0,s.BX)(m.kC,{sx:{width:"100%",justifyContent:"space-between"},children:[(0,s.BX)(m.kC,{sx:{minWidth:"fit-content",zIndex:1,gap:"10px"},children:[(0,s.tZ)(m.ny,{icon:"info",direction:"left",width:"16px",height:"16px"}),(0,s.BX)(m.xv,{size:"12px",children:[null==l?void 0:l.payoutTokenName," Bond Available"]})]}),(0,s.BX)(m.kC,{sx:{width:"100%",justifyContent:"flex-end",gap:"10px"},onClick:()=>c(e=>!e),children:[(0,s.tZ)(m.kC,{sx:D.Z.discountContainer,size:"sm",children:(0,s.BX)(m.xv,{color:"primaryBright",sx:{lineHeight:"0px"},children:[null==l?void 0:null===(n=l.discount)||void 0===n?void 0:n.toFixed(2),"% DISCOUNT"]})}),(0,s.tZ)(m.ny,{icon:"caret",direction:u?"up":"down"})]})]}),(0,s.tZ)(O.M,{children:u&&(0,s.BX)(W.E.div,{initial:{height:0},animate:{height:"fit-content"},transition:{opacity:{duration:.2}},exit:{height:0},sx:{overflow:"hidden",width:"100%"},children:[(0,s.tZ)(F.iz,{backgroundColor:"white4"}),(0,s.BX)(m.kC,{sx:{alignItems:"center",justifyContent:"space-between"},children:[(0,s.tZ)(m.xv,{size:"12px",children:"Discount"}),(0,s.BX)(m.xv,{size:"12px",color:"success",children:[null==l?void 0:null===(t=l.discount)||void 0===t?void 0:t.toFixed(2),"%"]})]}),(0,s.BX)(m.kC,{sx:{alignItems:"center",justifyContent:"space-between"},children:[(0,s.tZ)(m.xv,{size:"12px",children:" Market Price "}),(0,s.BX)(m.xv,{size:"12px",style:{textDecoration:"line-through"},children:["$",l&&l.earnTokenPrice&&(0,eb.w)(null!==(i=null==l?void 0:l.earnTokenPrice)&&void 0!==i?i:0)]})]}),(0,s.BX)(m.kC,{sx:{alignItems:"center",justifyContent:"space-between"},children:[(0,s.tZ)(m.xv,{size:"12px",children:"Discounted price"}),(0,s.BX)(m.xv,{size:"12px",children:["$",l&&l.priceUsd&&(0,eb.w)(null!==(o=null==l?void 0:l.priceUsd)&&void 0!==o?o:0)]})]}),(0,s.BX)(m.kC,{sx:{alignItems:"center",justifyContent:"space-between"},children:[(0,s.tZ)(m.xv,{size:"12px",children:"Vesting term"}),(0,s.BX)(m.xv,{size:"12px",children:[l&&(null==l?void 0:l.vestingTerm)&&+l.vestingTerm/86400," days"]})]}),(0,s.BX)(m.kC,{sx:{alignItems:"center",justifyContent:"space-between"},children:[(0,s.tZ)(m.xv,{size:"12px",children:"Updated payout"}),(0,s.tZ)(z,{fromAmount:null==r?void 0:r.fromAmount,fromToken:null==r?void 0:r.fromToken,toAmount:null==r?void 0:r.toAmount,toToken:null==r?void 0:r.toToken,discount:null==l?void 0:l.discount})]}),(0,s.tZ)(m.zx,{onClick:()=>{var e;a.push("/bonds?bondAddress=".concat(null==l?void 0:null===(e=l.billAddress)||void 0===e?void 0:e.toLowerCase(),"&bondChain=").concat(d),void 0,{shallow:!0})},sx:{height:"24px",marginTop:"10px"},fullWidth:!0,children:(0,s.tZ)(m.xv,{size:"12px",children:"BUY BOND"})})]})})]})},eZ=t(30650),eS=t(76260),eB=()=>{var e,n,t,i,o,l,r,u,c,v,f,N,B,U;(0,Z.jj)();let{account:P,chainId:_}=(0,h.useWeb3React)(),{data:D}=(0,eZ.Z)(),[O,W]=(0,C.useState)(void 0),{typedValue:L}=(0,Z.dU)(),{routing:z,currencies:F,inputError:j}=(0,Z.SM)(),{routes:H,routingState:G,feeStructure:V}=z,q=H[0],Y=G===b.q.NO_ROUTE_FOUND,$=G===b.q.LOADING,{wrapType:K,execute:Q,inputError:J}=function(e,n,t){let{chainId:i,account:o}=(0,h.useWeb3React)(),l=(0,A.Hj)(),r=(0,I.ZP)(null!=o?o:void 0,null!=e?e:void 0),u=(0,C.useMemo)(()=>(0,g.Z)(t,null!=e?e:void 0),[e,t]),c=(0,y.h7)(),[s,v]=(0,C.useState)();if(s)throw s;return(0,C.useMemo)(()=>{if(!l||!i||!e||!n||e.chainId!==n.chainId)return k;let t=T.Fl[i];if(!t)return k;let o=!!(null==u?void 0:u.greaterThan("0")),s=u&&r&&!r.lessThan(u);return e.isNative&&t.equals(n)?{wrapType:d.WRAP,execute:s&&u?async()=>{try{var e;let n=await l.provider.getNetwork();if(n.chainId!==i||l.address!==(null===(e=T.Fl[n.chainId])||void 0===e?void 0:e.address)){let e=Error("Invalid WETH contract\nPlease file a bug detailing how this happened - https://github.com/Uniswap/interface/issues/new?labels=bug&template=bug-report.md&title=Invalid%20WETH%20contract");throw v(e),e}let t=await l.deposit({value:"0x".concat(u.quotient.toString(16))});c(t,{type:w.i.WRAP,unwrapped:!1,currencyAmountRaw:null==u?void 0:u.quotient.toString(),chainId:i})}catch(e){console.error("Could not deposit",e)}}:void 0,inputError:s?void 0:o?a.INSUFFICIENT_NATIVE_BALANCE:a.ENTER_NATIVE_AMOUNT}:t.equals(e)&&n.isNative?{wrapType:d.UNWRAP,execute:s&&u?async()=>{try{let e=await l.withdraw("0x".concat(u.quotient.toString(16)));c(e,{type:w.i.WRAP,unwrapped:!0,currencyAmountRaw:null==u?void 0:u.quotient.toString(),chainId:i})}catch(e){console.error("Could not withdraw",e)}}:void 0,inputError:s?void 0:o?a.INSUFFICIENT_WRAPPED_BALANCE:a.ENTER_WRAPPED_AMOUNT}:k},[l,i,e,n,u,r,c])}(null===(e=F[E.gN.INPUT])||void 0===e?void 0:e.currency,null===(n=F[E.gN.OUTPUT])||void 0===n?void 0:n.currency,L),ee=K!==d.NOT_APPLICABLE,{onSwitchTokens:en,onCurrencySelection:ei,onUserInput:eo}=(0,Z._r)(),el=(null==F?void 0:null===(t=F.INPUT)||void 0===t?void 0:t.currency)&&(null==q?void 0:q.fromAmount)?p.CurrencyAmount.fromRawAmount(null==F?void 0:null===(i=F.INPUT)||void 0===i?void 0:i.currency,et().BigInt(null==q?void 0:q.fromAmount)):void 0,er=(0,ek.c)(P,null!==(U=null==F?void 0:null===(o=F.INPUT)||void 0===o?void 0:o.currency)&&void 0!==U?U:void 0,null==F?void 0:null===(r=F.INPUT)||void 0===r?void 0:null===(l=r.currency)||void 0===l?void 0:l.chainId),ed=(0,C.useMemo)(()=>(0,S.i)(er),[er]),ea=(0,X._i)(null==q?void 0:q.toAmount,null==q?void 0:null===(u=q.toToken)||void 0===u?void 0:u.decimals),eu=ea?(0,R.Y5)(ea,6):"",ec=null==F?void 0:null===(c=F.OUTPUT)||void 0===c?void 0:c.currency,es=null==ec?void 0:ec.address;return(0,C.useEffect)(()=>{if(es&&D&&_){let e=D[_].bonds.find(e=>{var n,t;return"migration"!==e.type&&(null===(n=e.billAddress)||void 0===n?void 0:n.toLowerCase())!==eS.s.toLowerCase()&&(null===(t=e.payoutToken)||void 0===t?void 0:t.toLowerCase())===es.toLowerCase()&&!e.soldOut&&!e.inactive&&e.discount&&e.discount>0});W(e)}},[es,null==D?void 0:D.length,_]),(0,s.BX)(m.kC,{sx:{flexDirection:"column",gap:"10px"},children:[ey.some(e=>{var n,t;return e.chain===_&&e.address.toLowerCase()===(null==q?void 0:null===(t=q.fromToken)||void 0===t?void 0:null===(n=t.address)||void 0===n?void 0:n.toLowerCase())})&&(0,s.tZ)(eT,{}),(0,s.BX)(m.kC,{variant:"flex.dexContainer",children:[(0,s.tZ)(x.Z,{}),(0,s.tZ)(m.kC,{sx:{margin:"25px 0px",maxWidth:"100%",width:"420px"}}),(0,s.tZ)(eN,{panelText:"From",value:L,currency:F[E.gN.INPUT].currency,currencyChain:null===(v=F[E.gN.INPUT].currency)||void 0===v?void 0:v.chainId,onCurrencySelect:(e,n)=>ei(E.gN.INPUT,e,n),onUserInput:e=>eo(E.gN.INPUT,e),handleMaxInput:()=>ed&&eo(E.gN.INPUT,ed.toExact()),apiPrice:null==q?void 0:q.fromAmountUSD}),(0,s.tZ)(m.kC,{sx:{width:"100%",justifyContent:"flex-end",height:"50px",alignItems:"center",position:"relative"},children:(0,s.tZ)(eC,{onClick:en})}),(0,s.tZ)(eN,{panelText:"To",value:eu,onCurrencySelect:(e,n)=>ei(E.gN.OUTPUT,e,n),currency:null===(f=F[E.gN.OUTPUT])||void 0===f?void 0:f.currency,currencyChain:null===(B=F[E.gN.OUTPUT])||void 0===B?void 0:null===(N=B.currency)||void 0===N?void 0:N.chainId,disabled:!0,apiPrice:null==q?void 0:q.toAmountUSD}),O&&q&&(0,s.tZ)(eE,{bond:O,route:q,chainId:_}),!ee&&$?(0,s.tZ)(ef.Z,{}):!Y&&!ee&&q&&(0,s.tZ)(M,{route:q,fee:V.fee}),(0,s.tZ)(em,{routingState:G,inputError:j,selectedRoute:q,inputCurrencyAmount:el,showWrap:ee,wrapInputError:J,wrapType:K,onWrap:Q,feeStructure:V})]})]})},eU=()=>(0,s.tZ)(v.Z,{variant:"dex",children:(0,s.tZ)(eB,{})})},30650:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var i=t(67848),o=t(9669),l=t.n(o),r=t(80666),d=t(81279);let a=async()=>{let{data:e}=await l().get("".concat(r.hU,"/stats?product=bonds"));return e};function u(){return(0,i.a)({queryKey:[d.U.BONDS_LANDING],queryFn:a,staleTime:1/0,refetchOnWindowFocus:!1,refetchInterval:12e4})}},23848:function(e,n,t){"use strict";t.d(n,{i:function(){return d}});var i=t(1113),o=t(39499),l=t.n(o);let r=l().exponentiate(l().BigInt(10),l().BigInt(16));function d(e){if(e)return e.currency.isNative?l().greaterThan(e.quotient,r)?i.CurrencyAmount.fromRawAmount(e.currency,l().subtract(e.quotient,r)):i.CurrencyAmount.fromRawAmount(e.currency,l().BigInt(0)):e}},80003:function(e,n,t){"use strict";var i=t(39977),o=t(5808),l=t(80795),r=t(30923);n.Z=()=>(0,i.tZ)(o.kC,{sx:r.Z.dexTradeInfoContainer,children:(0,i.BX)(o.kC,{sx:{alignItems:"center"},children:[(0,i.tZ)(l.$j,{size:22,mr:"15px",color:"text"}),(0,i.tZ)(o.xv,{size:"12px",sx:{wordBreak:"break-all",lineHeight:"15px"},children:"Fetching the best route"})]})})},30923:function(e,n){"use strict";n.Z={swapSwitchContainer:{width:"100%",height:"50px",alignItems:"center",justifyContent:"center"},swapSwitchButton:{background:"primaryButton",height:"30px",width:"30px",borderRadius:"30px",justifyContent:"center",border:"1px solid",color:"primaryBright",paddingRight:"1px",cursor:"pointer",transition:"all .3s linear","&:active":{transform:"scale(0.9)"}},SwapConfirmDisabledInputContainer:{backgroundColor:"white3",borderRadius:"10px",justifyContent:"space-between",alignItems:"center",width:"100%",padding:"10px",height:"60px"},outerLogoCircle:{zIndex:1,height:"30px",width:"30px",borderRadius:"30px",alignItems:"center",justifyContent:"center",backgroundColor:"white2",flexDirection:"column"},innerLogoCircle:{height:"22.5px",width:"22.5px",borderRadius:"22.5px",alignItems:"center",justifyContent:"center",backgroundColor:"yellow",paddingRight:".6px"},dexTradeInfoContainer:{border:"2px solid",borderRadius:"10px",borderColor:"white3",background:"white3",padding:"5px 10px",width:"100%",flexDirection:"column",height:"fit-content",cursor:"pointer",overflow:"hidden",mt:"10px"},inputContainer:{justifyContent:"space-between",height:"50px",background:"white3",borderRadius:"10px",alignItems:"center",padding:"0px 10px",transform:"translate(0px, 10px)"},container:{alignItems:"center",justifyContent:"center",height:"30px",width:"30px",borderRadius:"15px",background:"white2",zIndex:10},subContainer:{height:"20px",width:"20px",borderRadius:"10px",background:"primaryButton",alignItems:"center",justifyContent:"center"},outputContainer:{justifyContent:"space-between",height:"50px",background:"white3",borderRadius:"10px",alignItems:"center",padding:"0px 10px",transform:"translate(0px, -10px)"},discountContainer:{background:"linear-gradient(94deg, #1EBA5C -9.73%, #67E76C 40.14%, #218E05 93.01%)",boxShadow:"0px 5px 7px 0px rgba(0, 0, 0, 0.03) inset",alignItems:"center",justifyContent:"center",borderRadius:"6px",height:"22px",padding:"0px 8px",cursor:"pointer",fontSize:"10px",fontWeight:"600"}}}},function(e){e.O(0,[7848,8745,73,7835,9774,2888,179],function(){return e(e.s=88055)}),_N_E=e.O()}]);