(window.webpackJsonp=window.webpackJsonp||[]).push([[14,39,139,272],{1135:function(t,e,n){"use strict";n.r(e);var o={props:{id:{type:String,required:!0},baseApr:{type:Number,default:0},baseAprWithBonus:{type:Number,default:0},feesApr:{type:Number,default:0},campaignsApr:{type:Number,default:0},nitroApr:{type:Number,default:0},merklApr:{type:Number,default:0}}},r=n(23),component=Object(r.a)(o,(function(){var t=this,e=t._self._c;return e("span",[e("i",{staticClass:"mdi mdi-help-circle-outline check-nav-icon text-secondary font-size-14",attrs:{id:t.id,type:"button","data-toggle":"tooltip"}}),t._v(" "),e("b-tooltip",{attrs:{target:t.id,"no-fade":"",placement:"righttop"}},[e("div",[e("strong",[t._v("Swap fees APR:")]),t._v("\n      "+t._s(t.getLocaleString(t.feesApr,2,2))+"%\n    ")]),t._v(" "),t.baseApr>0?e("div",[e("strong",{staticClass:"text-primary"},[t._v("Farm APR:")]),t._v(" "),e("span",{staticClass:"text-primary"},[t._v("\n        "+t._s(t.getLocaleString(t.baseApr,2))+"% - "+t._s(t.getLocaleString(t.baseAprWithBonus,2))+"%\n      ")])]):t._e(),t._v(" "),t.campaignsApr>0?e("div",[e("strong",{staticClass:"text-primary"},[t._v("Market Maker APR:")]),t._v(" "),e("span",{staticClass:"text-primary"},[t._v(t._s(t.getLocaleString(t.campaignsApr,2))+"%")])]):t._e(),t._v(" "),t.merklApr>0?e("div",[e("strong",{staticClass:"text-merkl"},[t._v("Merkl APR:")]),t._v(" "),e("span",{staticClass:"text-merkl"},[t._v(t._s(t.getLocaleString(t.merklApr,2))+"%")])]):t._e(),t._v(" "),t.nitroApr>0?e("div",[e("strong",{staticClass:"text-info"},[t._v("Nitro rewards:")]),t._v(" "),e("span",{staticClass:"text-info"},[t._v(t._s(t.getLocaleString(t.nitroApr,2))+"%")])]):t._e()])],1)}),[],!1,null,null,null);e.default=component.exports},1139:function(t,e,n){"use strict";n.r(e);var o={props:{isLarge:{type:Boolean,default:!1}},computed:{buttonSize(){return this.isLarge?"-lg":""}},methods:{async connectWallet(){await this.$connectWallet.connect()}}},r=n(23),component=Object(r.a)(o,(function(){var t=this;return(0,t._self._c)("b-button",{class:"btn".concat(t.buttonSize," w-100"),attrs:{variant:"primary"},on:{click:function(e){return t.connectWallet()}}},[t._v("\n  Connect Wallet\n")])}),[],!1,null,null,null);e.default=component.exports},1162:function(t,e,n){"use strict";n.r(e);var o=n(13),r={components:{},props:{label:{type:String,default:"balance"},defaultSelectedToken:{type:Object,default:null},disabled:{type:Boolean,default:!1},hideMax:{type:Boolean,default:!1},hideBalance:{type:Boolean,default:!1},maxAmount:{type:String,default:null},unit:{type:String,default:null},value:{type:String,default:null},safeMax:{type:Boolean,default:!1},usdValue:{type:String,default:null}},data:()=>({tokenListModal:null,inputValue:null}),computed:{displayMaxButton(){return!this.disabled&&!this.hideMax}},watch:{value(){this.inputValue=this.value}},created(){this.inputValue=this.value},methods:{onInput(t){const e=t.target.value,n=e.match(/^\d*\.?\d*$/);this.inputValue=n?e:e.slice(0,-1),this.$emit("input",this.inputValue)},setMaxInputAmount(){this.safeMax&&this.maxAmount&&Object(o.parseUnits)(this.maxAmount).gt(Object(o.parseUnits)("0.0001"))?this.inputValue=Object(o.formatUnits)(Object(o.parseUnits)(this.maxAmount).sub(Object(o.parseUnits)("0.0001"))):this.inputValue=this.maxAmount,this.$emit("input",this.inputValue)}}},l=n(23),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"position-relative"},[e("div",{directives:[{name:"show",rawName:"v-show",value:Number(t.usdValue)>0,expression:"Number(usdValue) > 0"}],staticClass:"bg-dark rounded-lg p-1 text-white text-small position-absolute text-weight-300",staticStyle:{bottom:"-5px"}},[t._v("\n    $"+t._s(t.getLocaleString(t.usdValue,2,2))+"\n  ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"form-control text-right token-full-input p-0",class:{"text-secondary":t.disabled},attrs:{placeholder:"0.0",disabled:t.disabled},domProps:{value:t.inputValue},on:{input:[function(e){e.target.composing||(t.inputValue=e.target.value)},t.onInput]}}),t._v(" "),t.hideBalance?t._e():e("div",{staticClass:"text-secondary text-small text-right"},[t._v("\n    balance: "+t._s(t.getLocaleString(t.maxAmount,5,5))+"\n    "),t.hideMax||t.disabled?t._e():e("a",{staticClass:"text-primary ml-1",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.setMaxInputAmount()}}},[t._v("\n      Max\n    ")])])])}),[],!1,null,null,null);e.default=component.exports},1506:function(t,e,n){"use strict";n.r(e);var o=n(416),r=n(1128),l=n(103),c=n(1133),m=n(17),d=n(1130),h={components:{Accordion:c.default,Modal:l.default,TokenImg:o.default,DataRow:r.default},mixins:[d.a],props:{token0:{type:Object,default:null},token1:{type:Object,default:null},nftPool:{type:Object,default:null},token0Amount:{type:String,default:"0"},token1Amount:{type:String,default:"0"},token0MinAmount:{type:String,default:""},token1MinAmount:{type:String,default:""},token0Ratio:{type:String,default:""},token1Ratio:{type:String,default:""},tickStart:{type:Object,default:null},tickEnd:{type:Object,default:null},lp:{type:Object,default:null},lpAmount:{type:String,default:"0"},createPosition:{type:Boolean,required:!0},poolShare:{type:Number,default:()=>0},range:{type:Object,default:null},positionApr:{type:Number,default:null}},data:()=>({id:"add-cl-confirmation",error:null,isStale:!1}),computed:{lpAmountValue(){return this.token0&&this.token1?this.token0Amount*this.token0.price+this.token1Amount*this.token1.price:0},lpToken0Price(){return this.token0.address===this.lp.token0.address?this.lp.token0Price:this.lp.token1Price},lpToken1Price(){return this.token1.address===this.lp.token1.address?this.lp.token1Price:this.lp.token0Price}},watch:{token0Amount(){this.isStale=!0},token1Amount(){this.isStale=!0}},methods:{async addLiquidity(){this.header={title:this.lp.symbol,token:this.lp,version:"v3"},this.steps=[{description:"Adding liquidity...",label:"spnft",icon:"mdi mdi-tray-arrow-down"}],this.successMessage={title:'You\'ve successfully provided <span class="text-primary text-weight-500">~$'.concat(Object(m.b)(this.lpAmountValue,2,2)," of ").concat(this.lp.symbol,"</span> liquidity."),subtitleLinks:[{url:"/positions?type=v3",label:"Positions page"},{url:"/pools/".concat(this.lp.address),label:"pool page"}],subtitleMessage:"to check your position"},this.initLoading(this.id);const t=this.$store.getters["web3-provider/account"],e=this.$store.getters["exchange-config/deadlineDuration"]/1e3;let n;try{n=this.lp.isInitialized?await this.$contracts.clPoolPositionManager.mint(this.token0,this.token1,this.tickStart,this.tickEnd,this.token0Amount,this.token1Amount,this.token0MinAmount,this.token1MinAmount,t,e):await this.$contracts.clPoolPositionManager.initializePoolAndMint(this.token0,this.token1,this.lp.tick,this.tickStart,this.tickEnd,this.token0Amount,this.token1Amount,this.token0MinAmount,this.token1MinAmount,t,e),await this.checkTx(n,!0),this.$emit("liquidityAdded")}catch(t){this.txError("Error while adding liquidity. If the issue persists, please contact our support.")}},reset(){this.isStale=!1,this.error=null}}},k=n(23),component=Object(k.a)(h,(function(){var t=this,e=t._self._c;return e("modal",{attrs:{id:t.id},on:{shown:function(e){return t.reset()}},scopedSlots:t._u([t.lp?{key:"title",fn:function(){return[e("div",{staticClass:"text-center"},[e("h2",{staticClass:"mt-2 mb-1"},[e("span",{staticClass:"text-primary"},[t._v("Add")]),t._v("\n        V3 liquidity\n      ")]),t._v(" "),e("span",{staticClass:"text-large text-secondary"},[t._v("\n        Deposit assets on "+t._s(t.APP_NAME_GLOBAL)+" and start earning yield.\n      ")])])]},proxy:!0}:null,{key:"action",fn:function(){return[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-test",modifiers:{"modal-test":!0}}],staticClass:"w-50",attrs:{variant:"primary"},on:{click:t.addLiquidity}},[t._v("\n      Add Liquidity\n    ")])]},proxy:!0}],null,!0)},[t._v(" "),t.token0&&t.token1?e("div",[e("div",{staticClass:"d-flex align-items-center"},[e("token-img",{staticClass:"mr-2",attrs:{token:t.token0,size:"lg"}}),t._v(" "),e("div",[e("div",{staticClass:"text-secondary"},[t._v(t._s(t.token0.symbol))]),t._v(" "),e("div",{staticClass:"items-center"},[e("h3",{staticClass:"d-inline-flex flex-row align-items-baseline"},[t._v("\n            "+t._s(t.token0Amount?t.token0Amount:"0")+"\n          ")])])])],1),t._v(" "),e("div",{staticClass:"d-flex align-items-center justify-content-center rounded-circle hover-slight position-relative",staticStyle:{width:"25px",height:"25px","margin-left":"7px","margin-top":"0px","margin-bottom":"2px","background-color":"#121212"}},[e("i",{staticClass:"mdi mdi-plus text-primary font-size-16"})]),t._v(" "),e("div",{staticClass:"d-flex align-items-center"},[e("token-img",{staticClass:"mr-2",attrs:{token:t.token1,size:"lg"}}),t._v(" "),e("div",[e("div",{staticClass:"text-secondary"},[t._v(t._s(t.token1.symbol))]),t._v(" "),e("div",{staticClass:"items-center"},[e("h3",{staticClass:"d-inline-flex flex-row align-items-baseline"},[t._v("\n            "+t._s(t.token1Amount?t.token1Amount:"0")+"\n          ")])])])],1),t._v(" "),e("accordion",{staticClass:"bg-darker border-lighter rounded-sm mt-4 mb-3",attrs:{"force-between":""},scopedSlots:t._u([{key:"label",fn:function(){return[e("div",{staticClass:"w-100 p-2"},[e("div",[t._v("\n            1 "+t._s(t.token0.symbol)+" = "+t._s(t.getLocaleString(t.lpToken0Price,2,5))+" "+t._s(t.token1.symbol)+"\n            "),e("span",{staticClass:"text-secondary text-small"},[t._v("\n              ($"+t._s(t.getLocaleString(t.token0.price,2,2))+")\n            ")])]),t._v(" "),e("div",[t._v("\n            1 "+t._s(t.token1.symbol)+" = "+t._s(t.getLocaleString(t.lpToken1Price,2,5))+" "+t._s(t.token0.symbol)+"\n            "),e("span",{staticClass:"text-secondary text-small"},[t._v("\n              ($"+t._s(t.getLocaleString(t.token1.price,2,2))+")\n            ")])])])]},proxy:!0}],null,!1,4187018069)},[t._v(" "),e("div",{staticClass:"bg-darker border-lighter border-left-0 border-right-0 border-bottom-0 p-2"},[t.range?e("div",[e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v("Lower range")]},proxy:!0},{key:"value",fn:function(){return[t._v("\n              "+t._s(t.getLocaleString(t.range.min,2,5))+" "+t._s(t.token1.symbol)+"/"+t._s(t.token0.symbol)+"\n            ")]},proxy:!0}],null,!1,662717901)}),t._v(" "),e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v("Upper range")]},proxy:!0},{key:"value",fn:function(){return[t._v("\n              "+t._s(t.getLocaleString(t.range.max,2,5))+" "+t._s(t.token1.symbol)+"/"+t._s(t.token0.symbol)+"\n            ")]},proxy:!0}],null,!1,697572114)})],1):t._e(),t._v(" "),e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.token0.symbol)+" ratio")]},proxy:!0},{key:"value",fn:function(){return[t._v(t._s(t.getLocaleString(t.token0Ratio,2,2))+"%")]},proxy:!0}],null,!1,3790885475)}),t._v(" "),e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(t._s(t.token1.symbol)+" ratio")]},proxy:!0},{key:"value",fn:function(){return[t._v(t._s(t.getLocaleString(t.token1Ratio,2,2))+"%")]},proxy:!0}],null,!1,2258808867)})],1)])],1):t._e(),t._v(" "),e("div",{staticClass:"mt-3"},[e("h4",{staticClass:"mb-3 text-weight-400 bg-dark rounded-sm p-2"},[e("span",[t._v("Estimates")])]),t._v(" "),e("div",{staticClass:"px-2"},[e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"text-white"},[t._v("Deposit value")])]},proxy:!0},{key:"value",fn:function(){return[t._v("$"+t._s(t.getLocaleString(t.lpAmountValue,2,2)))]},proxy:!0}])}),t._v(" "),e("data-row",{scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"text-white"},[t._v("Position APR")])]},proxy:!0},{key:"value",fn:function(){return[e("span",{staticClass:"text-primary"},[t._v(t._s(t.getLocaleString(t.positionApr,2,2))+"%")])]},proxy:!0}])})],1)]),t._v(" "),t.isStale?e("b-alert",{staticClass:"d-flex justify-content-between border-primary align-items-center mt-3 mb-0",attrs:{show:"",variant:"warning"}},[e("div",[e("i",{staticClass:"mdi mdi-alert-circle-outline mr-1 text-primary"}),t._v("\n      Price updated\n    ")]),t._v(" "),e("b-button",{staticClass:"btn-sm",on:{click:function(e){return t.reset()}}},[t._v("Accept")])],1):t._e(),t._v(" "),null!==t.error?e("b-alert",{staticClass:"mt-3 mb-0",attrs:{show:"",variant:"danger"}},[t._v("\n    Error: "+t._s(t.error)+"\n  ")]):t._e()],1)}),[],!1,null,null,null);e.default=component.exports},1507:function(t,e,n){"use strict";n.r(e);n(8),n(1279);var o=n(420),r=n(67),l={props:{chartId:{type:String,default:"range-chart"},currentPrice:{type:String,required:!0},activeRange:{type:Array,required:!0},lp:{type:Object,required:!0},priceBaseOnToken0:{type:Boolean,required:!0}},data(){return{liquidityRange:[],precision:5,priceRangeMultiplierStep:.25,priceRangeMinMultiplier:.5,priceRangeMaxMultiplier:.5,manualRange:!1,minPrice:0,maxPrice:0,annotationElement:null,lastEvent:null,dragPlugin:{vm:this,id:"dragPlugin",beforeEvent(t,e){this.vm.handleDrag(e.event)&&(e.changed=!0)}}}},computed:{fullPriceRange(){if(this.manualRange)return[this.minPrice,this.maxPrice];const t=Number(this.currentPrice),e=t-t*this.priceRangeMinMultiplier,n=t+t*this.priceRangeMaxMultiplier;let o=this.toSignificantDigits(e>0?e:0),r=this.toSignificantDigits(n);return this.activeRange[0]<Number(o)&&(o=this.toSignificantDigits(this.activeRange[0])),this.activeRange[1]>Number(r)&&(r=this.activeRange[1]===Number.POSITIVE_INFINITY?10*t:this.toSignificantDigits(this.activeRange[1])),[o,r]},chartData(){return{datasets:[{borderColor:["rgba(255,175,29,.2)"],pointBackgroundColor:"rgba(255,175,29,.07)",borderWidth:1,pointBorderColor:"rgba(255,175,29,.2)",backgroundColor:"rgba(255,175,29,.07)",fill:!0,data:this.liquidityRange}]}},chartOptions(){const t=this;return{events:["mousedown","mouseup","mousemove","mouseout"],scales:{x:{min:this.fullPriceRange[0],max:this.fullPriceRange[1],display:!0,type:"linear",ticks:{format:{minimumFractionDigits:0,maximumFractionDigits:5}},grid:{display:!1}},y:{display:!1,grid:{display:!1}}},plugins:{filler:{propagate:!0},legend:{display:!1},tooltip:{enabled:!1},annotation:{enter(e){e.element.$context.id.includes("active")&&(e.chart.canvas.style.cursor="grab",t.lastEvent||(t.annotationElement=e.element))},leave(e){e.chart.canvas.style.cursor="default",t.lastEvent||(t.annotationElement=null,t.lastEvent=null)},animation:{duration:0},annotations:{priceRange:{type:"box",display:!0,xMin:this.activeRange[0],xMax:this.activeRange[1],backgroundColor:"rgba(255, 175, 29, 0.03)",borderWidth:0},currentPriceLine:{type:"line",display:!0,xMin:Number(this.currentPrice),xMax:Number(this.currentPrice),borderColor:"#FF3535",borderWidth:1},activeRangeStart:{type:"line",display:this.activeRange[1]<Number.POSITIVE_INFINITY,xMin:this.activeRange[0],xMax:this.activeRange[0],borderColor:"#ffaf1d",borderWidth:1,label:{content:"⋮  ".concat(Math.round(100*(100*this.activeRange[0]/this.currentPrice-100))/100,"%"),display:!0,position:"end"}},activeRangeEnd:{type:"line",display:this.activeRange[1]<Number.POSITIVE_INFINITY,xMin:this.activeRange[1]<Number.POSITIVE_INFINITY?this.activeRange[1]:this.fullPriceRange[1],xMax:this.activeRange[1]<Number.POSITIVE_INFINITY?this.activeRange[1]:this.fullPriceRange[1],borderColor:"#ffaf1d",borderWidth:1,label:{content:"".concat(Math.round(100*(100*this.activeRange[1]/this.currentPrice-100))/100,"%  ⋮"),display:!0,position:"end"}}}}},responsiveOptions:{responsive:!0},elements:{line:{tension:0},point:{radius:0}}}}},watch:{lp(){this.resetZoom(),this.updateLiquidityRepartition()},priceBaseOnToken0(){this.updateLiquidityRepartition()},fullPriceRange(){this.manualRange||(this.minPrice=this.fullPriceRange[0],this.maxPrice=this.fullPriceRange[1])}},mounted(){this.updateLiquidityRepartition(),this.resetZoom()},methods:{drag(t){if(this.annotationElement.x+=t,this.annotationElement.x2+=t,this.annotationElement.elements&&this.annotationElement.elements.length)for(const e of this.annotationElement.elements)e.x+=t,e.x2+=t},handleElementDragging(t){if(!this.lastEvent||!this.annotationElement)return;const e=t.x-this.lastEvent.x;return this.drag(e),this.lastEvent=t,!0},handleDrag(t){if(this.annotationElement)switch(t.type){case"mousemove":return this.getValueAndEmit(),this.handleElementDragging(t);case"mouseout":case"mouseup":this.lastEvent=void 0;break;case"mousedown":this.lastEvent=t}},getValueAndEmit:Object(o.throttle)((function(){if(!this.annotationElement)return;const t=[],e=this.annotationElement.$context.chart.scales.x;this.annotationElement.$context.id.includes("Start")?t[0]=e.getValueForPixel(this.annotationElement.x):t[1]=e.getValueForPixel(this.annotationElement.x),this.$emit("range",t)}),100),resetZoom(){this.manualRange=!1,(this.lp.token0.quote!==r.a.DERIVED_FROM_STABLE&&this.lp.token0.quote!==r.a.STABLE||this.lp.token1.quote!==r.a.DERIVED_FROM_STABLE&&this.lp.token1.quote!==r.a.STABLE)&&(this.lp.token0.quote!==r.a.DERIVED_FROM_NATIVE&&this.lp.token0.quote!==r.a.NATIVE||this.lp.token1.quote!==r.a.DERIVED_FROM_NATIVE&&this.lp.token1.quote!==r.a.NATIVE)||1!==this.lp.tickSpacing?this.priceRangeMultiplierStep=.25:this.priceRangeMultiplierStep=2e-4,this.priceRangeMinMultiplier=2*this.priceRangeMultiplierStep,this.priceRangeMaxMultiplier=2*this.priceRangeMultiplierStep},zoom(){this.manualRange=!1,this.priceRangeMinMultiplier>this.priceRangeMultiplierStep&&(this.priceRangeMinMultiplier=this.priceRangeMinMultiplier-this.priceRangeMultiplierStep),this.priceRangeMaxMultiplier>this.priceRangeMultiplierStep&&(this.priceRangeMaxMultiplier=this.priceRangeMaxMultiplier-this.priceRangeMultiplierStep)},dezoom(){this.manualRange=!1,this.priceRangeMinMultiplier=this.priceRangeMinMultiplier+this.priceRangeMultiplierStep,this.priceRangeMaxMultiplier=this.priceRangeMaxMultiplier+this.priceRangeMultiplierStep},zoomManual(){this.manualRange=!0},updateLiquidityRepartition(){this.liquidityRange=[],this.lp.fetchTicksData().then((data=>{if(null===data)return;const t=Number(data.liquidity),e=this.priceBaseOnToken0,n=Object.keys(data.ticks);for(const t of n){const[n,o]=[this.lp.token0,this.lp.token1];n.decimals!==o.decimals&&(n.decimals>o.decimals?(data.ticks[t].price0=Number(data.ticks[t].price0*10**(n.decimals-o.decimals)),data.ticks[t].price1=Number(data.ticks[t].price1/10**(n.decimals-o.decimals))):(data.ticks[t].price1=Number(data.ticks[t].price1*10**(o.decimals-n.decimals)),data.ticks[t].price0=Number(data.ticks[t].price0/10**(o.decimals-n.decimals)))),data.ticks[t].price=Number(e?data.ticks[t].price0:data.ticks[t].price1)}const o=n.filter((t=>Number(data.ticks[t].price0)<=Number(this.lp.token0Price))).sort(((a,b)=>Number(data.ticks[a].price0)>Number(data.ticks[b].price0)?-1:Number(data.ticks[a].price0)<Number(data.ticks[b].price0)?1:0)),r=n.filter((t=>Number(data.ticks[t].price0)>Number(this.lp.token0Price))).sort(((a,b)=>Number(data.ticks[a].price0)<Number(data.ticks[b].price0)?-1:Number(data.ticks[a].price0)>Number(data.ticks[b].price0)?1:0)),l=[],c=[];let m,d,h=t;for(const t of o){const e=this.toSignificantDigits(data.ticks[t].price),n=h-Number(data.ticks[t].liquidityNet);d&&l.unshift({x:e,y:h}),l.unshift({x:e,y:n}),h=n,d=e,m=Number(data.ticks[t].liquidityNet)}m=Number(data.ticks[o[0]].liquidityNet),d=l.lastItem.x,h=t;for(const t of r){const e=this.toSignificantDigits(data.ticks[t].price);let n=h+Number(data.ticks[t].liquidityNet);m&&0===m&&(n=h),0===c.length&&c.push({x:l.lastItem.x,y:h}),d&&c.push({x:e,y:h}),c.push({x:e,y:n}),h=n,d=e,m=Number(data.ticks[t].liquidityNet)}c.push({x:d,y:c[c.length-1].y>0?0:c[c.length-1].y});let k=[];k=e?l.concat(c):c.reverse().concat(l.reverse()),k.unshift({x:0,y:k[0].y>0?0:k[0].y}),k.push({x:Number.MAX_VALUE,y:k[k.length-1].y>0?0:k[k.length-1].y});const v=k.map((t=>t.y)),f=Math.min(...v);f<0&&k.forEach((t=>{t.y+=-f})),this.liquidityRange=[...k]}))}}},c=n(23),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",[e("h4",{staticClass:"d-flex align-items-center justify-content-between bg-black px-2 py-2 rounded-sm mb-0 text-uppercase text-weight-400"},[t._m(0),t._v(" "),e("div",{staticClass:"opacity-75"},[e("b-button",{staticClass:"py-0 px-1",staticStyle:{border:"none !important"},attrs:{variant:"simple-link",disabled:t.priceRangeMinMultiplier<=t.priceRangeMultiplierStep},on:{click:t.zoom}},[e("i",{staticClass:"mdi mdi-magnify-plus-outline font-size-20 pr-0"})]),t._v(" "),e("b-button",{staticClass:"py-0 px-1",staticStyle:{border:"none !important"},attrs:{variant:"simple-link"},on:{click:t.dezoom}},[e("i",{staticClass:"mdi mdi-magnify-minus-outline font-size-20 pr-0"})]),t._v(" "),e("b-button",{staticClass:"py-0 px-1",staticStyle:{border:"none !important"},attrs:{variant:"simple-link",disabled:t.priceRangeMinMultiplier===2*t.priceRangeMultiplierStep},on:{click:t.resetZoom}},[e("i",{staticClass:"mdi mdi-sync font-size-20 pr-0"})])],1)]),t._v(" "),e("div",{staticClass:"overflow-hidden mt-2"},[e("div",{staticClass:"text-small text-secondary mb-4 mb-sm-2 px-1"},[t._v("\n      From\n      "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.minPrice,expression:"minPrice"}],staticClass:"mr-2 p-1",staticStyle:{"max-width":"75px"},attrs:{type:"number"},domProps:{value:t.minPrice},on:{input:[function(e){e.target.composing||(t.minPrice=e.target.value)},t.zoomManual]}}),t._v("\n      To\n      "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.maxPrice,expression:"maxPrice"}],staticClass:"mr-2 p-1",staticStyle:{"max-width":"75px"},attrs:{type:"number"},domProps:{value:t.maxPrice},on:{input:[function(e){e.target.composing||(t.maxPrice=e.target.value)},t.zoomManual]}})]),t._v(" "),e("line-chart",{ref:"line-chart",attrs:{options:t.chartOptions,data:t.chartData,"chart-id":t.chartId,plugins:[t.dragPlugin]}}),t._v(" "),t._m(1)],1)])}),[function(){var t=this,e=t._self._c;return e("div",[e("span",{staticClass:"text-primary text-weight-500"},[t._v("Range")]),t._v("\n      visualizer\n    ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex align-items-center justify-content-evenly text-small text-secondary mt-4"},[e("div",{staticClass:"d-flex align-items-center justify-content-center"},[e("div",{staticClass:"mr-2 bg-primary",staticStyle:{height:"3px",width:"25px"}}),t._v("\n        Selected range\n      ")]),t._v(" "),e("div",{staticClass:"d-flex align-items-center justify-content-center"},[e("div",{staticClass:"mr-2 bg-danger",staticStyle:{height:"3px",width:"25px"}}),t._v("\n        Current price\n      ")]),t._v(" "),e("div",{staticClass:"d-flex align-items-center justify-content-center"},[e("div",{staticClass:"mr-2 rounded-sm",staticStyle:{height:"15px",width:"25px","background-color":"rgba(255, 175, 29, 0.07)",border:"1px solid rgba(255, 175, 29, 0.2)"}}),t._v("\n        Liquidity distribution\n      ")])])}],!1,null,null,null);e.default=component.exports},1605:function(t,e,n){"use strict";n.r(e);n(8);var o=n(1391),r=n(6),l=n(420),c=n(1506),m=n(1507),d=n(421),h=n(416),k=n(67),v=n(18),f=n(17),x=n(1162),y=n(1129),_=n(1128),A=n(1135),C=n(164),R=n(1139),L={components:{PoolAprTooltip:A.default,DataRow:_.default,Processing:y.default,TokenInputFull:x.default,TokenImg:h.default,ConfirmModal:c.default,RangeChart:m.default,ConnectWallet:R.default},props:{token0:{type:Object,default:null},token1:{type:Object,default:null},createPosition:{type:Boolean,required:!0}},data:()=>({debounceDelay:2500,selectToken0:null,selectToken1:null,token0InitialPriceTimeout:null,token0InitialPrice:null,token0Amount:null,token1Amount:null,token0AmountBn:null,token1AmountBn:null,token0MinAmount:null,token1MinAmount:null,token0Approved:!1,token1Approved:!1,token0Approving:!1,token1Approving:!1,ratioBasedOnToken0:!0,nftPool:null,loadingNftCreate:!1,error:null,rangeError:null,rangeWarning:null,initPriceError:null,rangeMinError:null,rangeMaxError:null,defaultRange:"common",presetSelected:null,inputStyle:{},range:{min:0,minBn:r.a.from(0),max:0,maxBn:r.a.from(0),current:r.a.from(0)},tokensRatio:{token0:0,token1:0},updateRangeTimeout:null,mintInfo:{current:null,start:null,end:null}}),computed:{account(){return this.$store.getters["web3-provider/account"]},slippage(){return this.$store.getters["exchange-config/slippage"]},token0Symbol(){return this.token0?this.token0.symbol:null},token1Symbol(){return this.token1?this.token1.symbol:null},token0PriceBn(){return this.selectedLp?this.selectedLp.token0Address===this.token0.address?this.selectedLp.token0PriceBn:this.selectedLp.token1PriceBn:r.a.from(0)},token1PriceBn(){return this.selectedLp?this.selectedLp.token0Address===this.token0.address?this.selectedLp.token1PriceBn:this.selectedLp.token0PriceBn:r.a.from(0)},token0Price(){return this.selectedLp?this.selectedLp.token0Address===this.token0.address?this.selectedLp.token0Price:this.selectedLp.token1Price:"0"},maxToken0Amount(){return this.token0&&this.account?this.token0.accountBalanceFormatted:null},maxToken1Amount(){return this.token1&&this.account?this.token1.accountBalanceFormatted:null},selectedLp(){return this.token0&&this.token1?this.$contracts.clPoolsFactory.getLpByTokens(this.token0,this.token1,!0):null},token0InputBottomInfos(){return"balance: ".concat(this.maxToken0Amount||"0"," ").concat(this.token0Symbol||"")},token1InputBottomInfos(){return"balance: ".concat(this.maxToken1Amount||"0"," ").concat(this.token1Symbol||"")},isDataInitialized(){return this.$store.getters["general/isDataInitialized"]},token0AmountDisabled(){return 0===this.tokensRatio.token0||!this.selectedLp.isInitialized&&this.selectedLp.mockTick.sqrtRatioX96.eq(r.a.from(0))},token1AmountDisabled(){return 0===this.tokensRatio.token1||!this.selectedLp.isInitialized&&this.selectedLp.mockTick.sqrtRatioX96.eq(r.a.from(0))},pairType(){let t=0;return this.token0.quote!==k.a.DERIVED_FROM_STABLE&&this.token0.quote!==k.a.STABLE||this.token1.quote!==k.a.DERIVED_FROM_STABLE&&this.token1.quote!==k.a.STABLE||1!==this.selectedLp.tickSpacing?1===this.selectedLp.tickSpacing?t=1:this.token0.quote!==k.a.NATIVE&&this.token0.quote!==k.a.DERIVED_FROM_STABLE&&this.token0.quote!==k.a.STABLE||this.token1.quote!==k.a.DERIVED_FROM_STABLE&&this.token1.quote!==k.a.STABLE&&this.token1.quote!==k.a.NATIVE?10===this.selectedLp.tickSpacing&&(t=2):t=2:t=1,t},estimatedAPRs(){if(!(this.selectedLp&&this.token0AmountBn&&this.token1AmountBn&&this.mintInfo&&this.mintInfo.current&&this.mintInfo.start&&this.mintInfo.end))return{fees:0,campaigns:0,total:0};let t=0,e=0;if(!this.token0AmountBn.eq(r.a.from(0))&&!this.token1AmountBn.eq(r.a.from(0))){const n=365*(this.selectedLp.oneWeekFeeUSD/7);let o,l;this.token0.isGreaterThan(this.token1)?(o=this.token1AmountBn,l=this.token0AmountBn):(o=this.token0AmountBn,l=this.token1AmountBn);const c=C.a.maxLiquidityForAmounts(r.a.from(this.mintInfo.current.sqrtRatioX96),r.a.from(this.mintInfo.start.sqrtRatioX96),r.a.from(this.mintInfo.end.sqrtRatioX96),o,l),m=Number(c)/Number(this.selectedLp.liquidity.add(c)),d=this.token0.price*this.token0Amount+this.token1.price*this.token1Amount;t=n*m/d*100;e=this.selectedLp.campaignsApr*this.selectedLp.totalLiquidityUSD/100*m/d*100}return{fees:t,campaigns:e,total:t+e}}},watch:{"$parent.localActive"(){this.$parent.localActive||this.clearData()},createPosition(){this.token0Approved=!1,this.token1Approved=!1,this.refreshApprove()},slippage(){this.syncLPRatio()},token0(){this.setRangeFromPreset(this.defaultRange)},token1(){this.setRangeFromPreset(this.defaultRange)},async"$contracts.clPoolsFactory.lastPairsUpdate"(){var t;null!==(t=this.selectedLp)&&void 0!==t&&t.address&&await this.syncLPRatio()},selectedLp(){this.$emit("setLp",this.selectedLp),this.mintInfo={current:null,start:null,end:null},this.resetInputAmounts()}},mounted(){this.setRangeFromPreset(this.defaultRange)},beforeDestroy(){this.clearData()},methods:{async connectWallet(){await this.$connectWallet.connect()},resetInputAmounts(){this.token1Amount=null,this.token0Amount=null},onUserInputToken0Amount(t){var e,n;null!==t&&this.token1&&((null!==(e=this.selectedLp)&&void 0!==e&&e.isInitialized||null!==(n=this.selectedLp)&&void 0!==n&&n.mock)&&(this.token1Amount=null),this.ratioBasedOnToken0=!0,this.syncLPRatio())},onUserInputToken1Amount(t){var e,n;null!=t&&this.token0&&((null!==(e=this.selectedLp)&&void 0!==e&&e.isInitialized||null!==(n=this.selectedLp)&&void 0!==n&&n.mock)&&(this.token0Amount=null),this.ratioBasedOnToken0=!1,this.syncLPRatio())},adjustTokenPrice(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.mintInfo||!this.mintInfo.start||this.mintInfo.start.sqrtRatioX96.eq(r.a.from(0)))return;const n="token0"===t,o=n?this.mintInfo.start.tick:this.mintInfo.end.tick,l=this.selectedLp.tickSpacing,c=this.mintInfo.invertPrice?o+(e?-l:l):o+(e?l:-l),m=this.getToken0PriceAtTick(c);n?this.setRangeMin(m,!1):this.setRangeMax(m,!1)},getToken0PriceAtTick(t){const e=v.e.getSqrtRatioBnAtTick(t);let n;return n=this.token0===this.selectedLp.token0?v.e.priceFromSqrtRatio(this.selectedLp.token0,this.selectedLp.token1,e,!1):v.e.priceFromSqrtRatio(this.selectedLp.token1,this.selectedLp.token0,e,!0),n=this.token1.getFormattedAmountFromFull(n),n},async syncLPRatio(){var t,e;if(this.error=null,this.selectedLp&&(0!==this.tokensRatio.token0||0!==this.tokensRatio.token1)&&this.mintInfo)if(null!==this.token0Amount&&!this.token0.isValidAmount(this.token0Amount)||null!==this.token1Amount&&!this.token1.isValidAmount(this.token1Amount))this.error="Invalid amount";else{if(null!==(t=this.selectedLp)&&void 0!==t&&t.isInitialized||null!==(e=this.selectedLp)&&void 0!==e&&e.mock)if(this.ratioBasedOnToken0)if(0===Number(this.token0Amount)||this.token1AmountDisabled){this.token1Amount=null,this.token1MinAmount="0";const t=this.token0.getFullAmountFromFormatted(this.token0Amount).mul(1e4-100*this.slippage).div(1e4);this.token0MinAmount=this.token0.getFormattedAmountFromFull(t),this.token0AmountBn=t,this.token1AmountBn=this.token1.getFullAmountFromFormatted("0")}else{const t=this.token0.getFullAmountFromFormatted(this.token0Amount),e=this.mintInfo.invertPrice?d.a.getAmount0FromAmount1(this.mintInfo.current,this.mintInfo.end,this.mintInfo.start,t):d.a.getAmount1FromAmount0(this.mintInfo.current,this.mintInfo.start,this.mintInfo.end,t);this.token1Amount=this.token1.getFormattedAmountFromFull(e),this.updateAmountsMin(t,e),this.token0AmountBn=t,this.token1AmountBn=e}else if(0===Number(this.token1Amount)||this.token0AmountDisabled){this.token0Amount=null,this.token0MinAmount="0";const t=this.token1.getFullAmountFromFormatted(this.token1Amount).mul(1e4-100*this.slippage).div(1e4);this.token1MinAmount=this.token1.getFormattedAmountFromFull(t),this.token0AmountBn=this.token0.getFullAmountFromFormatted("0"),this.token1AmountBn=t}else{const t=this.token1.getFullAmountFromFormatted(this.token1Amount),e=this.mintInfo.invertPrice?d.a.getAmount1FromAmount0(this.mintInfo.current,this.mintInfo.end,this.mintInfo.start,t):d.a.getAmount0FromAmount1(this.mintInfo.current,this.mintInfo.start,this.mintInfo.end,t);this.token0Amount=this.token0.getFormattedAmountFromFull(e),this.updateAmountsMin(e,t),this.token0AmountBn=e,this.token1AmountBn=t}(this.token0Amount&&Number(this.token0Amount)>0&&!this.token0.hasSufficientBalance(this.token0Amount)||this.token1Amount&&Number(this.token1Amount)>0&&!this.token1.hasSufficientBalance(this.token1Amount))&&(this.error="Insufficient balance"),await this.refreshApprove()}},updateAmountsMin(t,e){const n=this.mintInfo.invertPrice?d.a.getMinAmountsWithSlippage(this.token1,this.mintInfo.current,this.mintInfo.end,this.mintInfo.start,e,t,this.slippage):d.a.getMinAmountsWithSlippage(this.token0,this.mintInfo.current,this.mintInfo.start,this.mintInfo.end,t,e,this.slippage);this.token0MinAmount=this.mintInfo.invertPrice?this.token0.getFormattedAmountFromFull(n.amount1Min):this.token0.getFormattedAmountFromFull(n.amount0Min),this.token1MinAmount=this.mintInfo.invertPrice?this.token1.getFormattedAmountFromFull(n.amount0Min):this.token1.getFormattedAmountFromFull(n.amount1Min)},onRangeSelect(t){t[0]?this.setRangeMin(t[0],!1):this.setRangeMax(t[1],!1)},setRangeFromPreset(t){if(!this.selectedLp)return void(this.range={min:0,minBn:r.a.from(0),max:0,maxBn:r.a.from(0)});this.presetSelected=t;const e=this.token0PriceBn;switch(t){case"full":this.range.minBn=r.a.from(0),this.range.maxBn=o.a.constants.MaxUint256;break;case"safe":if(1===this.pairType){let t,n,o,l;this.token0.quote===k.a.STABLE?(o=9993,l=10003):this.token1.quote===k.a.STABLE&&(o=9997,l=10007),o&&l&&(t=this.token0.getFullAmountFromFormatted("1").mul(r.a.from(o)).div(r.a.from(1e4)),n=this.token0.getFullAmountFromFormatted("1").mul(r.a.from(l)).div(r.a.from(1e4))),t&&n&&t.lte(e)&&n.gte(e)?(this.range.minBn=t,this.range.maxBn=n):(this.range.minBn=e.mul(r.a.from(9995)).div(r.a.from(1e4)),this.range.maxBn=e.mul(r.a.from(10005)).div(r.a.from(1e4)))}else 2===this.pairType?(this.range.minBn=e.mul(r.a.from(89)).div(r.a.from(100)),this.range.maxBn=e.mul(r.a.from(111)).div(r.a.from(100))):(this.range.minBn=e.mul(r.a.from(80)).div(r.a.from(100)),this.range.maxBn=e.mul(r.a.from(120)).div(r.a.from(100)));break;case"common":1===this.pairType?(this.range.minBn=e.mul(r.a.from(9998)).div(r.a.from(1e4)),this.range.maxBn=e.mul(r.a.from(10002)).div(r.a.from(1e4))):2===this.pairType?(this.range.minBn=e.mul(r.a.from(93)).div(r.a.from(100)),this.range.maxBn=e.mul(r.a.from(107)).div(r.a.from(100))):(this.range.minBn=e.mul(r.a.from(90)).div(r.a.from(100)),this.range.maxBn=e.mul(r.a.from(110)).div(r.a.from(100)));break;case"expert":1===this.pairType?(this.range.minBn=e.mul(r.a.from(9999)).div(r.a.from(1e4)),this.range.maxBn=e.mul(r.a.from(10001)).div(r.a.from(1e4))):(this.pairType,this.range.minBn=e.mul(r.a.from(95)).div(r.a.from(100)),this.range.maxBn=e.mul(r.a.from(105)).div(r.a.from(100)))}this.range.min=Object(f.c)(this.token1.getFormattedAmountFromFull(this.range.minBn)),this.range.max=this.range.maxBn.eq(o.a.constants.MaxUint256)?Number.POSITIVE_INFINITY:Object(f.c)(this.token1.getFormattedAmountFromFull(this.range.maxBn)),this.startUpdateToValidRange()},transformScaleToValues(t){const e="number"==typeof t?t.toFixed(this.token1.decimals):t,n=this.token1.getFullAmountFromFormatted(e);return[e,n,Object(f.c)(this.token1.getFormattedAmountFromFull(n))]},setRangeMin(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const[n,o,r]=this.transformScaleToValues(t);this.range.min!==r&&(this.token1.isValidAmount(n)?this.rangeMinError=null:this.rangeMinError="Invalid min price",this.presetSelected=null,this.range.minBn=o,this.range.min=r,e?this.startUpdateToValidRange():this.updateToValidRange())},setRangeMax(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const[n,o,r]=this.transformScaleToValues(t);this.range.max!==r&&(this.token1.isValidAmount(n)?this.rangeMaxError=null:this.rangeMaxError="Invalid max price",this.presetSelected=null,this.range.maxBn=o,this.range.max=r,e?this.startUpdateToValidRange():this.updateToValidRange())},startSetInitialPrice(t){var e;this.token1.isValidAmount(t)?this.initPriceError=null:(t="0",this.initPriceError="Invalid price"),null===(e=this.token0InitialPriceTimeout)||void 0===e||e.cancel();const n=Object(l.debounce)((()=>this.setInitialPrice(t)),this.debounceDelay);this.token0InitialPriceTimeout=n,n()},setInitialPrice(t){!t||!Number(t)||Number(t)<=0?this.selectedLp.resetInitialTick():(this.selectedLp.mockInitialTick(t,this.token0,this.token1),this.setRangeFromPreset("common"),this.syncLPRatio().then((()=>{Number(this.range.max)||Number(this.range.min)||this.setRangeFromPreset("common")})))},isOutOfRange(){return this.range.minBn.gte(this.token0PriceBn)||this.range.maxBn.lte(this.token0PriceBn)},checkRangeValidity(){this.rangeWarning=null,this.rangeError=null,!this.selectedLp||!this.selectedLp.isInitialized&&this.selectedLp.mockTick.sqrtRatioX96.eq(r.a.from(0))||(this.range.minBn.gte(this.range.maxBn)?this.rangeError="Error: invalid range":this.isOutOfRange()&&(this.rangeWarning="This position will be out of range"))},startUpdateToValidRange(){var t;null===(t=this.updateRangeTimeout)||void 0===t||t.cancel();const e=Object(l.debounce)(this.updateToValidRange,this.debounceDelay);this.updateRangeTimeout=e,e()},updateToValidRange(){if(this.selectedLp.isInitialized||!this.selectedLp.mockTick.sqrtRatioX96.eq(r.a.from(0))){try{this.mintInfo=this.$contracts.clPoolsFactory.getLpMintInfo(this.token0,this.token1,this.token0PriceBn,this.range.minBn,this.range.maxBn,this.selectedLp),this.range.minBn=this.mintInfo.invertPrice?this.mintInfo.start.priceInverted:this.mintInfo.start.price,this.range.maxBn=this.mintInfo.invertPrice?this.mintInfo.end.priceInverted:this.mintInfo.end.price,this.range.currentBn=this.mintInfo.invertPrice?this.mintInfo.current.priceInverted:this.mintInfo.current.price,this.range.min=Object(f.c)(this.token1.getFormattedAmountFromFull(this.range.minBn)),this.range.maxBn.eq(o.a.constants.MaxUint256)?this.range.max=Number.POSITIVE_INFINITY:this.range.max=Object(f.c)(this.token1.getFormattedAmountFromFull(this.range.maxBn))}catch(t){}this.checkRangeValidity(),this.updateTokensRatio()}else this.mintInfo={current:null,start:null,end:null}},updateTokensRatio(){if(this.selectedLp&&null===this.rangeError)if(this.range.minBn.gt(this.range.currentBn))this.tokensRatio={token0:100,token1:0};else if(this.range.maxBn.lt(this.range.currentBn))this.tokensRatio={token0:0,token1:100};else if(this.range.minBn.eq(r.a.from(0))&&this.range.maxBn.eq(o.a.constants.MaxUint256))this.tokensRatio={token0:50,token1:50};else{const t=this.mintInfo.invertPrice?this.token1PriceBn:this.token0PriceBn,e=this.mintInfo.start.price,n=this.mintInfo.end.price,o=t.sub(e),r=n.sub(t),l=o.add(r),c=o.mul(1e4).div(l),m=r.mul(1e4).div(l);this.tokensRatio={token0:Number(m)/100,token1:Number(c/100)}}else this.token0Amount=null,this.token1Amount=null,this.tokensRatio={token0:0,token1:0};this.syncLPRatio()},async refreshApprove(){if(this.account){let t=this.$contracts.clPoolPositionManager.address;this.createPosition&&(t=this.$contracts.positionHelper.address),this.token0Approved=!!this.token0&&await this.token0.hasAccountApproval(this.account,t,this.token0Amount),this.token0Approved&&(this.token0Approving=!1),this.token1Approved=!!this.token1&&await this.token1.hasAccountApproval(this.account,t,this.token1Amount),this.token1Approved&&(this.token1Approving=!1)}},async approve(t){let e=this.$contracts.clPoolPositionManager.address;if(this.createPosition&&(e=this.$contracts.positionHelper.address),t.address===this.token0.address){this.token0Approving=!0,this.approveLoading=!0;const n=await t.approveMaxV2(e);n?n.wait().then((()=>{this.token0Approving=!1,this.approveLoading=!1,this.refreshApprove()})):(this.token0Approving=!1,this.approveLoading=!1)}else{this.token1Approving=!0;const n=await t.approveMaxV2(e);n?n.wait().then((()=>{this.token1Approving=!1,this.approveLoading=!1,this.refreshApprove()})):(this.token1Approving=!1,this.approveLoading=!1)}},clearData(){this.rangeError=null,this.rangeWarning=null,this.initPriceError=null,this.rangeMinError=null,this.rangeMaxError=null,this.token0Approved=!1,this.token1Approved=!1,this.token0Approving=!1,this.token1Approving=!1}}},S=L,P=n(23),component=Object(P.a)(S,(function(){var t,e=this,n=e._self._c;return n("div",[n("b-row",[n("b-col",{attrs:{xl:"6",lg:"12"}},[e._t("token-select"),e._v(" "),n("div",{staticClass:"my-4"},[n("h4",{staticClass:"d-flex align-items-center justify-content-between mb-3 text-weight-400 bg-dark rounded-sm p-2",class:{"text-secondary":!e.selectedLp}},[n("span",[e._v("3. Set a range")]),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:e.selectedLp&&!e.rangeError&&(e.selectedLp.isInitialized||Number(e.token0Price)>0),expression:"\n              selectedLp && !rangeError && (selectedLp.isInitialized || Number(token0Price) > 0)\n            "}],staticClass:"mdi mdi-check text-success"})]),e._v(" "),e.selectedLp?n("div",[e.selectedLp.isInitialized?e._e():n("div",{staticClass:"mb-4"},[n("span",{staticClass:"text-secondary text-weight-400"},[e._v("\n              Set initial "+e._s(e.token1.symbol)+" per "+e._s(e.token0.symbol)+" price\n            ")]),e._v(" "),n("b-input",{staticClass:"w-100",attrs:{value:e.toSignificantDigits(e.token0Price)},on:{input:function(t){return e.startSetInitialPrice(t)}}}),e._v(" "),n("b-alert",{staticClass:"mt-3 mb-0",attrs:{show:null!==e.initPriceError,variant:"danger"}},[e._v("\n              Error: "+e._s(e.initPriceError)+"\n            ")])],1),e._v(" "),e.selectedLp.isInitialized||Number(e.token0Price)>0?n("div",{staticClass:"d-flex justify-content-between align-items-baseline bg-darker border-width-2 border-lighter rounded mt-2 p-2"},[n("b-row",{staticClass:"flex-grow-1 p-1"},[n("b-col",{attrs:{md:"4",lg:"4",xl:"6"}},[n("span",{staticClass:"text-secondary text-weight-400"},[e._v("Current price")]),e._v(" "),n("br"),e._v(" "),n("span",{staticClass:"text-primary"},[e._v("\n                  1 "+e._s(e.token0.symbol)+" =\n                  "+e._s(e.toSignificantDigits(e.token0Price))+"\n                  "+e._s(e.token1.symbol)+"\n                ")])]),e._v(" "),n("b-col",{staticClass:"mt-2 mt-md-0",attrs:{cols:"6",md:"4",lg:"3",xl:"3"}},[n("span",{staticClass:"text-secondary text-weight-400"},[e._v(e._s(e.token0.symbol)+" ratio")]),e._v(" "),n("br"),e._v(" "),n("span",{staticClass:"text-white"},[e._v(e._s(e.tokensRatio.token0)+"%")])]),e._v(" "),n("b-col",{staticClass:"mt-2 mt-md-0",attrs:{cols:"6",md:"4",lg:"3",xl:"3"}},[n("span",{staticClass:"text-secondary text-weight-400"},[e._v(e._s(e.token1.symbol)+" ratio")]),e._v(" "),n("br"),e._v(" "),n("span",{staticClass:"text-white"},[e._v(e._s(e.tokensRatio.token1)+"%")])])],1),e._v(" "),n("div",{staticClass:"d-flex align-items-center justify-content-evenly bg-black text-secondary rounded p-1 cursor-pointer text-small",staticStyle:{height:"35px"},on:{click:function(t){return e.$emit("invertTokens")}}},[n("div",{staticClass:"w-100 rounded p-1 bg-dark text-white"},[e._v("\n                "+e._s(e.token0.symbol)+"\n              ")]),e._v(" "),n("div",{staticClass:"w-100 rounded p-1"},[e._v(e._s(e.token1.symbol))])])],1):e._e(),e._v(" "),n("div",{staticClass:"mt-3"},[n("div",{staticClass:"text-secondary text-weight-400 mb-1"},[e._v("Presets")]),e._v(" "),n("div",[1!==e.pairType?n("b-button",{class:{selected:"full"===e.presetSelected},attrs:{variant:"secondary"},on:{click:function(t){return e.setRangeFromPreset("full")}}},[e._v("\n                Full range\n              ")]):e._e(),e._v(" "),n("b-button",{class:{selected:"safe"===e.presetSelected},attrs:{variant:"secondary"},on:{click:function(t){return e.setRangeFromPreset("safe")}}},[e._v("\n                Wide\n              ")]),e._v(" "),n("b-button",{class:{selected:"common"===e.presetSelected},attrs:{variant:"secondary"},on:{click:function(t){return e.setRangeFromPreset("common")}}},[e._v("\n                Common\n              ")]),e._v(" "),1!==e.pairType?n("b-button",{class:{selected:"expert"===e.presetSelected},attrs:{variant:"secondary"},on:{click:function(t){return e.setRangeFromPreset("expert")}}},[e._v("\n                Narrow\n              ")]):e._e()],1)]),e._v(" "),e.selectedLp.isInitialized||Number(e.token0Price)>0?n("b-row",{staticClass:"mt-2 gy-2"},[n("b-col",{attrs:{md:"6"}},[n("div",{staticClass:"text-secondary text-weight-400 mb-1"},[e._v("\n                Min "+e._s(e.token1.symbol)+" per "+e._s(e.token0.symbol)+" price\n              ")]),e._v(" "),n("div",{staticClass:"d-flex align-items-center"},[n("b-button",{staticClass:"btn-input btn-input-left",attrs:{variant:"secondary",disabled:!(e.range&&Number(e.range.min)>0)},on:{click:()=>e.adjustTokenPrice("token0",!1)}},[n("i",{staticClass:"mdi mdi-minus px-2"})]),e._v(" "),n("b-input",{staticClass:"flex-grow-1 rounded-0",attrs:{value:e.range.min},on:{input:function(t){return e.setRangeMin(t)}}}),e._v(" "),n("b-button",{staticClass:"btn-input btn-input-right",attrs:{variant:"secondary",disabled:!(e.range&&Number(e.range.min)>0)},on:{click:()=>e.adjustTokenPrice("token0")}},[n("i",{staticClass:"mdi mdi-plus px-2"})])],1)]),e._v(" "),n("b-col",{attrs:{md:"6"}},[n("div",{staticClass:"text-secondary text-weight-400 mb-1"},[e._v("\n                Max "+e._s(e.token1.symbol)+" per "+e._s(e.token0.symbol)+" price\n              ")]),e._v(" "),n("div",{staticClass:"d-flex align-items-center"},[n("b-button",{staticClass:"btn-input btn-input-left",attrs:{variant:"secondary",disabled:!e.range||!Number.isFinite(Number(e.range.max))},on:{click:()=>e.adjustTokenPrice("token1",!1)}},[n("i",{staticClass:"mdi mdi-minus px-2"})]),e._v(" "),n("b-input",{staticClass:"flex-grow-1 rounded-0",attrs:{value:e.range.max},on:{input:function(t){return e.setRangeMax(t)}}}),e._v(" "),n("b-button",{staticClass:"btn-input btn-input-right",attrs:{variant:"secondary",disabled:!e.range||!Number.isFinite(Number(e.range.max))},on:{click:()=>e.adjustTokenPrice("token1")}},[n("i",{staticClass:"mdi mdi-plus px-2"})])],1)])],1):e._e(),e._v(" "),n("b-alert",{staticClass:"mt-3 mb-0",attrs:{show:null!==e.rangeWarning,variant:"warning"}},[n("i",{staticClass:"mdi mdi-alert-circle-outline text-primary mr-1"}),e._v("\n            "+e._s(e.rangeWarning)+"\n          ")]),e._v(" "),n("b-alert",{staticClass:"mt-3 mb-0",attrs:{show:null!==e.rangeMinError,variant:"danger"}},[e._v("\n            Error: "+e._s(e.rangeMinError)+"\n          ")]),e._v(" "),n("b-alert",{staticClass:"mt-3 mb-0",attrs:{show:null!==e.rangeMaxError,variant:"danger"}},[e._v("\n            Error: "+e._s(e.rangeMaxError)+"\n          ")]),e._v(" "),n("b-alert",{staticClass:"mt-3 mb-0",attrs:{show:null!==e.rangeError,variant:"danger"}},[e._v("\n            "+e._s(e.rangeError)+"\n          ")])],1):e._e()]),e._v(" "),n("div",{staticClass:"mt-4"},[n("h4",{staticClass:"d-flex align-items-center justify-content-between mb-0 text-weight-400 bg-dark rounded-sm p-2",class:{"text-secondary":!(e.selectedLp&&!e.rangeError),"mb-3":e.selectedLp&&!e.rangeError}},[n("span",[e._v("4. Input amounts")]),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:e.selectedLp&&Number(e.token0Price)>0&&(e.token0Amount||e.token1Amount)&&!e.error&&!e.rangeError,expression:"\n              selectedLp &&\n              Number(token0Price) > 0 &&\n              (token0Amount || token1Amount) &&\n              !error &&\n              !rangeError\n            "}],staticClass:"mdi mdi-check text-success"})]),e._v(" "),e.selectedLp&&!e.rangeError?n("div",[n("b-row",{staticClass:"d-flex align-items-center bg-darker rounded full-token-input-widget gx-0",class:{"opacity-50":e.token0AmountDisabled}},[n("b-col",{staticClass:"d-flex align-items-center bg-dark hover-slight h-100 p-0 rounded-left token-select-widget px-2",attrs:{cols:"5",sm:"4"}},[n("token-img",{staticClass:"d-none d-md-flex mr-2",attrs:{token:e.token0,size:"lg"}}),e._v(" "),n("token-img",{staticClass:"d-flex d-md-none mr-2",attrs:{token:e.token0}}),e._v(" "),n("h4",{staticClass:"d-inline-flex flex-row align-items-baseline mb-0"},[e._v("\n                "+e._s(e.token0Symbol)+"\n              ")])],1),e._v(" "),n("b-col",{staticClass:"flex-grow-1 pr-3"},[n("token-input-full",{staticClass:"flex-grow-1 ml-1",attrs:{id:"token-input-0",unit:e.token0Symbol,"usd-value":e.token0&&e.token0Amount?(e.token0.price*e.token0Amount).toString():null,"max-amount":e.maxToken0Amount,disabled:e.token0AmountDisabled,"safe-max":!!e.token0&&e.token0.isNative},on:{input:e.onUserInputToken0Amount},model:{value:e.token0Amount,callback:function(t){e.token0Amount=t},expression:"token0Amount"}})],1)],1),e._v(" "),n("b-row",{staticClass:"d-flex align-items-center token-input-between-icon"},[n("b-col",{staticClass:"d-flex justify-content-center",attrs:{cols:"4"}},[n("div",{staticClass:"d-flex align-items-center justify-content-center rounded-circle bg-black hover-slight position-relative icon-container"},[n("i",{staticClass:"mdi mdi-plus text-primary font-size-16"})])])],1),e._v(" "),n("b-row",{staticClass:"d-flex align-items-center bg-darker rounded full-token-input-widget gx-0",class:{"opacity-50":e.token1AmountDisabled}},[n("b-col",{staticClass:"d-flex align-items-center bg-dark hover-slight h-100 p-0 rounded-left token-select-widget px-2",attrs:{cols:"5",sm:"4"}},[n("token-img",{staticClass:"d-none d-md-flex mr-2",attrs:{token:e.token1,size:"lg"}}),e._v(" "),n("token-img",{staticClass:"d-flex d-md-none mr-2",attrs:{token:e.token1}}),e._v(" "),n("h4",{staticClass:"d-inline-flex flex-row align-items-baseline mb-0"},[e._v("\n                "+e._s(e.token1Symbol)+"\n              ")])],1),e._v(" "),n("b-col",{staticClass:"flex-grow-1 pr-3"},[n("token-input-full",{staticClass:"flex-grow-1 ml-1",attrs:{id:"token-input-1",unit:e.token1Symbol,"usd-value":e.token1&&e.token1Amount?(e.token1.price*e.token1Amount).toString():null,"max-amount":e.maxToken1Amount,disabled:e.token1AmountDisabled,"safe-max":!!e.token1&&e.token1.isNative},on:{input:e.onUserInputToken1Amount},model:{value:e.token1Amount,callback:function(t){e.token1Amount=t},expression:"token1Amount"}})],1)],1)],1):e._e()]),e._v(" "),e.selectedLp&&!e.rangeError?n("h4",{staticClass:"d-flex align-content-center justify-content-between border-lighter2 border-width-2 rounded bg-dark mt-3 mb-0 p-3",class:{"opacity-50":!(e.estimatedAPRs.total>0)}},[n("div",{staticClass:"d-flex align-content-center text-weight-400"},[n("div",{staticClass:"d-flex align-content-center"},[n("i",{staticClass:"mdi mdi-finance text-primary mr-2"})]),e._v(" "),n("span",[e._v("\n            Estimated APR\n            "),e.isOutOfRange?n("span",{staticClass:"text-small text-secondary"},[e._v("\n              (active ranges\n              "),n("span",{staticClass:"d-none d-sm-inline"},[e._v("only")]),e._v("\n              )\n            ")]):e._e()])]),e._v(" "),n("span",{staticClass:"text-primary"},[e._v("\n          "+e._s(e.getLocaleString(e.estimatedAPRs.total+e.selectedLp.merklApr,2,2))+"%\n          "),n("PoolAprTooltip",{staticClass:"ml-1",attrs:{id:"estimates-apr-".concat(e.selectedLp.address),"fees-apr":e.estimatedAPRs.fees,"campaigns-apr":e.estimatedAPRs.campaigns,"merkl-apr":e.selectedLp.merklApr}})],1)]):e._e()],2),e._v(" "),n("b-col",{staticClass:"mt-3 mt-xl-0 d-flex",attrs:{xl:"6",lg:"12"}},[e.selectedLp&&(e.selectedLp.isInitialized||0!==e.selectedLp.mockTick.tick)?n("div",{staticClass:"p-3 bg-dark w-100"},[n("range-chart",{staticClass:"w-100 mb-4",attrs:{height:450,lp:e.selectedLp,"current-price":e.token0Price,"active-range":[e.range.min,e.range.max],"price-base-on-token0":e.selectedLp.token0Address===e.token0.address},on:{range:e.onRangeSelect}}),e._v(" "),n("div",{staticClass:"mt-4 bg-darker px-2 mb-2 rounded-1",staticStyle:{"padding-top":"3px","padding-bottom":"3px"}},[n("data-row",{scopedSlots:e._u([{key:"label",fn:function(){return[n("span",{staticClass:"text-white text-weight-500"},[e._v("Total average APR")])]},proxy:!0},{key:"value",fn:function(){return[n("span",{staticClass:"text-primary text-weight-500"},[e._v("\n                "+e._s(e.getLocaleString(e.selectedLp.totalApr,2,2))+"%\n              ")])]},proxy:!0}],null,!1,899944661)})],1),e._v(" "),n("div",{staticClass:"px-2"},[n("data-row",{scopedSlots:e._u([{key:"label",fn:function(){return[n("span",{staticClass:"text-white"},[e._v("7D average fees APR")])]},proxy:!0},{key:"value",fn:function(){return[e._v(e._s(e.getLocaleString(e.selectedLp.feesApr,2,2))+"%")]},proxy:!0}],null,!1,620057452)}),e._v(" "),e.selectedLp.campaignsApr>0?n("data-row",{scopedSlots:e._u([{key:"label",fn:function(){return[n("span",{staticClass:"text-white"},[e._v("Market Maker APR")])]},proxy:!0},{key:"value",fn:function(){return[n("span",{staticClass:"text-primary"},[e._v("\n                "+e._s(e.getLocaleString(e.selectedLp.campaignsApr,2,2))+"%\n              ")])]},proxy:!0}],null,!1,3673916591)}):e._e(),e._v(" "),e.selectedLp.merklApr>0?n("data-row",{scopedSlots:e._u([{key:"label",fn:function(){return[n("span",{staticClass:"text-white"},[e._v("Merkl APR")])]},proxy:!0},{key:"value",fn:function(){return[n("span",{staticClass:"text-merkl"},[e._v(e._s(e.getLocaleString(e.selectedLp.merklApr,2,2))+"%")])]},proxy:!0}],null,!1,2101603980)}):e._e()],1),e._v(" "),n("div",{staticClass:"mt-3 bg-darker px-2 mb-2 rounded-1",staticStyle:{"padding-top":"3px","padding-bottom":"3px"}},[n("data-row",{scopedSlots:e._u([{key:"label",fn:function(){return[n("span",{staticClass:"text-white text-weight-500"},[e._v("TVL")])]},proxy:!0},{key:"value",fn:function(){return[n("span",{staticClass:"text-weight-500"},[e._v("\n                $"+e._s(e.getLocaleString(e.selectedLp.totalLiquidityUSDFormatted.value,e.selectedLp.totalLiquidityUSDFormatted.digits))+e._s(e.selectedLp.totalLiquidityUSDFormatted.unit)+"\n              ")])]},proxy:!0}],null,!1,2218745660)})],1),e._v(" "),n("div",{staticClass:"px-2"},[n("data-row",{scopedSlots:e._u([{key:"label",fn:function(){return[n("span",{staticClass:"text-white"},[e._v("Active TVL")])]},proxy:!0},{key:"value",fn:function(){return[e._v("\n              $"+e._s(e.getLocaleString(e.selectedLp.totalActiveLiquidityUSDFormatted.value,e.selectedLp.totalActiveLiquidityUSDFormatted.digits))+e._s(e.selectedLp.totalActiveLiquidityUSDFormatted.unit)+"\n            ")]},proxy:!0}],null,!1,2213683137)}),e._v(" "),n("data-row",{scopedSlots:e._u([{key:"label",fn:function(){return[n("span",{staticClass:"text-white"},[e._v("Inactive TVL")])]},proxy:!0},{key:"value",fn:function(){return[e._v("\n              $"+e._s(e.getLocaleString(e.selectedLp.totalInactiveLiquidityUSDFormatted.value,e.selectedLp.totalInactiveLiquidityUSDFormatted.digits))+e._s(e.selectedLp.totalInactiveLiquidityUSDFormatted.unit)+"\n            ")]},proxy:!0}],null,!1,106889985)})],1),e._v(" "),(null===(t=e.selectedLp.points)||void 0===t?void 0:t.length)>0?n("div",[n("div",{staticClass:"mt-3 bg-darker px-2 mb-2 rounded-1",staticStyle:{"padding-top":"3px","padding-bottom":"3px"}},[n("data-row",{scopedSlots:e._u([{key:"label",fn:function(){return[n("span",{staticClass:"text-white text-weight-500"},[e._v("Points programs eligibility")])]},proxy:!0}],null,!1,1462568204)})],1)]):e._e(),e._v(" "),e._l(e.selectedLp.points,(function(t){return n("div",{key:t.id,staticClass:"d-flex justify-content-between px-2 pb-2"},[n("div",{staticClass:"d-flex align-items-center"},[n("img",{staticClass:"mr-2",attrs:{src:t.logo,alt:t.id,width:"20"}}),e._v(" "),n("span",[e._v(e._s(t.name)+" points")])]),e._v(" "),n("a",{attrs:{href:t.link,target:"_blank"}},[n("i",{staticClass:"mdi mdi-open-in-new font-size-14"})])])}))],2):e.selectedLp&&!e.selectedLp.isInitialized&&0===e.selectedLp.mockTick.tick?n("div",{staticClass:"w-100 bg-dark d-flex flex-column align-items-center justify-content-center text-secondary py-2"},[n("i",{staticClass:"icam-chart-21 font-size-22"}),e._v("\n        Pair not initialized\n      ")]):n("div",{staticClass:"w-100 bg-dark d-flex flex-column align-items-center justify-content-center text-secondary py-2"},[n("i",{staticClass:"icam-chart-21 font-size-22"}),e._v("\n        Select a pair\n      ")])])],1),e._v(" "),n("div",{staticClass:"mb-2 mb-xl-0"},[n("b-alert",{staticClass:"mt-3 mb-0",attrs:{show:null!==e.selectedLp&&void 0!==e.selectedLp&&!e.selectedLp.isInitialized,variant:"warning"}},[n("i",{staticClass:"mdi mdi-alert-circle-outline text-primary mr-1"}),e._v("\n      You are the first liquidity provider! The token ratio that you choose here will set the\n      price on this pool.\n    ")]),e._v(" "),null!==e.selectedLp&&e.createPosition&&!e.nftPool?n("b-alert",{staticClass:"mt-3 mb-0",attrs:{show:"",variant:"warning"}},[n("i",{staticClass:"mdi mdi-alert-circle-outline text-primary mr-1"}),e._v("\n      You are the very first spNFT minter for this asset! You will need to initialize the spNFT\n      contract first.\n    ")]):e._e(),e._v(" "),n("b-alert",{staticClass:"mt-3 mb-0",attrs:{show:null!==e.error,variant:"danger"}},[e._v("\n      Error: "+e._s(e.error)+"\n    ")])],1),e._v(" "),e.account?n("div",{staticClass:"text-center mt-3"},[e.token1Approved&&e.token0Approved||!e.selectedLp?n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.add-cl-confirmation",modifiers:{"add-cl-confirmation":!0}}],staticClass:"btn-lg w-100",attrs:{disabled:!e.selectedLp||!e.token0Amount&&!e.token1Amount||null!==e.error||null!==e.rangeError,variant:"primary"}},[e.createPosition?n("span",[e._v("Create position")]):n("span",[e._v("Add liquidity")])]):!e.token0Approved&&e.token1Approved?n("b-button",{staticClass:"btn-lg w-100",attrs:{variant:"primary",disabled:!e.account||e.token0Approving},on:{click:function(t){return e.approve(e.token0)}}},[e.token0Approving?n("Processing"):n("span",[e._v("Approve "+e._s(e.token0.symbol))])],1):e.token0Approved&&!e.token1Approved?n("b-button",{staticClass:"btn-lg w-100",attrs:{variant:"primary",disabled:!e.account||e.token1Approving},on:{click:function(t){return e.approve(e.token1)}}},[e.token1Approving?n("Processing"):n("span",[e._v("Approve "+e._s(e.token1.symbol))])],1):n("b-row",[e.token0Approved?e._e():n("b-col",{attrs:{cols:"6"}},[n("b-button",{staticClass:"btn-lg w-100",attrs:{variant:"primary",disabled:!e.account||e.token0Approving},on:{click:function(t){return e.approve(e.token0)}}},[e.token0Approving?n("Processing"):n("span",[e._v("Approve "+e._s(e.token0.symbol))])],1)],1),e._v(" "),e.token1Approved?e._e():n("b-col",{attrs:{cols:"6"}},[n("b-button",{staticClass:"btn-lg w-100",attrs:{variant:"primary",disabled:!e.account||e.token1Approving},on:{click:function(t){return e.approve(e.token1)}}},[e.token1Approving?n("Processing"):n("span",[e._v("Approve "+e._s(e.token1.symbol))])],1)],1)],1)],1):n("connect-wallet",{staticClass:"mt-3",attrs:{"is-large":""}}),e._v(" "),n("confirm-modal",{attrs:{token0:e.token0,token1:e.token1,"token0-amount":e.token0Amount,"token1-amount":e.token1Amount,"token0-min-amount":e.token0MinAmount,"token1-min-amount":e.token1MinAmount,"token0-ratio":e.tokensRatio.token0.toString(),"token1-ratio":e.tokensRatio.token1.toString(),"tick-start":e.mintInfo.start,"tick-end":e.mintInfo.end,"ratio-based-on-token0":e.ratioBasedOnToken0,"create-position":e.createPosition,lp:e.selectedLp,range:e.range,"position-apr":e.estimatedAPRs.total},on:{liquidityAdded:e.resetInputAmounts}})],1)}),[],!1,null,null,null);e.default=component.exports}}]);