/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[3,39,239,243,271,274,276],{1139:function(t,e,o){"use strict";o.r(e);var n={props:{isLarge:{type:Boolean,default:!1}},computed:{buttonSize(){return this.isLarge?"-lg":""}},methods:{async connectWallet(){await this.$connectWallet.connect()}}},r=o(23),component=Object(r.a)(n,(function(){var t=this;return(0,t._self._c)("b-button",{class:"btn".concat(t.buttonSize," w-100"),attrs:{variant:"primary"},on:{click:function(e){return t.connectWallet()}}},[t._v("\n  Connect Wallet\n")])}),[],!1,null,null,null);e.default=component.exports},1144:function(t,e,o){"use strict";o.r(e);o(8);var n=o(27),r=o(1146),l=o(21),c=o(103),d=o(416),h=o(17),m={components:{Modal:c.default,TokenImg:d.default,ParticularTokensList:r.default},props:{modalId:{type:String,default:null},tokens:{type:Array,default:()=>[]},importMode:{type:Boolean,default:!1},showTopTraded:{type:Boolean,default:!0}},data:()=>({search:"",isSearching:!1,searchedTokens:[],isImporting:!1}),computed:{filteredTokens(){const t=this.tokens.concat(this.searchedTokens).filter((t=>t.symbol.toLowerCase().includes(this.search.toLowerCase())||t.address.toLowerCase()===this.search.toLowerCase()));return this.sortTokens(t)},commonTokens(){return[...this.tokens.filter((t=>t.isNative||t.isWNative)),...this.tokens.filter((t=>t.common&&!t.isNative&&!t.isWNative)).sort(((a,b)=>a.symbol.localeCompare(b.symbol)))]},topTradedTokens(){return Object.values(this.tokens).filter((t=>!t.common&&!t.isNative&&!t.isWNative)).sort(((a,b)=>b.volumeUSD-a.volumeUSD)).slice(0,4)},chainConfig(){return this.$store.getters["web3-provider/chainConfig"]}},watch:{search(){!this.filteredTokens.length&&Object(n.isAddress)(this.search)?this.searchForToken(this.search):this.searchedTokens.splice(0,this.searchedTokens.length)}},methods:{getLocaleString:h.b,clearFilters(){(""!==this.search||this.searchedTokens.length>0)&&(this.search="",this.searchedTokens=[])},sortTokens:t=>t.sort(((t,e)=>{if(t.accountBalanceUSD===e.accountBalanceUSD){const o=t.symbol.toLowerCase(),n=e.symbol.toLowerCase();return o<n?-1:o>n?1:0}return Number(t.accountBalanceUSD)<=Number(e.accountBalanceUSD)?1:-1})),selectToken(t){t.external&&!t.imported||this.isImporting?this.isImporting=!1:(this.$bvModal.hide(this.modalId),this.$emit("update-selected-token",t))},async searchForToken(address){this.isSearching=!0;const t=await Object(l.e)(this.$store.app,address);t&&!this.searchedTokens.find((t=>t.address===address))&&this.searchedTokens.push(t),this.isSearching=!1},async importToken(t){this.isImporting=!0;const e=this.searchedTokens.findIndex((e=>e.address===t.address));this.searchedTokens.splice(e,1);const o=this.chainConfig.frontend.featureFlags;await this.$contracts.pushSupportedToken(t,o)},async removeImportedToken(t){this.isImporting=!0,await this.$contracts.removeSupportedToken(t),await this.searchForToken(t.address)}}},f=o(23),component=Object(f.a)(m,(function(){var t=this,e=t._self._c;return e("modal",{ref:t.modalId,attrs:{id:t.modalId},on:{shown:t.clearFilters},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"w-100"},[e("h3",[t._v(t._s(t.importMode?"Import a token":"Select a token"))]),t._v(" "),e("div",{staticClass:"mt-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.importMode?"Search by address":"Search by name or address",onClick:"this.setSelectionRange(0, this.value.length)"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])])]},proxy:!0},{key:"cancel",fn:function(){return[e("b-button",{staticClass:"w-100",attrs:{variant:"secondary"},on:{click:function(e){return t.$bvModal.hide(t.modalId)}}},[t._v("Close")])]},proxy:!0}])},[t._v(" "),t.commonTokens.length?e("particular-tokens-list",{attrs:{tokens:t.commonTokens,"select-token":t.selectToken}}):t._e(),t._v(" "),t.topTradedTokens.length?e("particular-tokens-list",{attrs:{title:"Top traded",tokens:t.topTradedTokens,"select-token":t.selectToken}}):t._e(),t._v(" "),t.importMode?e("h4",{staticClass:"mt-3"},[t._v("Searched tokens")]):e("h4",{staticClass:"mt-3"},[t._v("Tokens list")]),t._v(" "),e("div",{staticClass:"w-100"},[t.isSearching?e("div",[e("div",{staticClass:"spinner-border"})]):t.filteredTokens.length||t.isSearching?e("div",{staticClass:"btn-group-vertical w-100",attrs:{role:"group"}},t._l(t.filteredTokens,(function(o){return e("div",{key:o.address+o.symbol,staticClass:"w-100 mb-1"},[e("div",{staticClass:"w-100 d-flex justify-content-between align-items-center px-1",class:!o.external||o.imported?"btn btn-simple-link":"",on:{click:function(e){return t.selectToken(o)}}},[e("div",{staticClass:"d-flex text-left align-items-center"},[o.external&&!o.imported?e("div",{staticClass:"mr-3"},[e("b-button",{attrs:{variant:"secondary"},on:{click:function(e){return t.importToken(o)}}},[t._v("Import")])],1):e("token-img",{staticClass:"mr-2",attrs:{token:o}}),t._v(" "),e("div",[e("div",[t._v("\n                "+t._s(o.symbol)+"\n                "),o.imported?e("span",{staticClass:"text-small ml-1 text-weight-300"},[t._v("\n                  (imported)\n                ")]):t._e()]),t._v(" "),e("div",{staticClass:"text-secondary text-weight-400"},[t._v("\n                "+t._s(o.fullname)+"\n              ")]),t._v(" "),o.imported?e("a",{staticClass:"text-small",attrs:{href:"#"},on:{click:function(e){return t.removeImportedToken(o)}}},[t._v("\n                remove token\n              ")]):t._e()])],1),t._v(" "),e("div",{staticClass:"text-right",class:{"text-muted":"0.0"===o.accountBalanceFormatted}},[e("div",[t._v("\n              "+t._s("0.0"===o.accountBalanceFormatted?"0":t.getLocaleString(o.accountBalanceFormatted))+"\n            ")]),t._v(" "),o.accountBalanceUSD>0?e("div",{staticClass:"text-small text-muted"},[t._v("\n              $"+t._s(t.getLocaleString(o.accountBalanceUSD,3,3))+"\n            ")]):t._e()])])])})),0):e("div",[t._v("No result found")])])],1)}),[],!1,null,null,null);e.default=component.exports},1146:function(t,e,o){"use strict";o.r(e);var n={components:{TokenImg:o(416).default},props:{title:{type:String,default:"Common bases"},tokens:{type:Array,default:()=>[]},selectToken:{type:Function,required:!0}}},r=o(23),component=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-1 mb-3"},[e("h4",[t._v(t._s(t.title))]),t._v(" "),e("b-row",{staticClass:"align-items-center"},t._l(t.tokens,(function(o){return e("b-col",{key:o.address+o.symbol,staticClass:"my-1",attrs:{cols:"4",sm:"3"}},[e("b-button",{staticClass:"align-items-center w-100 justify-content-start px-1 py-1 line-height-reset",attrs:{variant:"simple-link"},on:{click:function(e){return t.selectToken(o)}}},[e("token-img",{staticClass:"mr-2",attrs:{token:o,size:"sm"}}),t._v(" "),e("span",{staticClass:"text-weight-500"},[t._v(t._s(o.symbol))])],1)],1)})),1)],1)}),[],!1,null,null,null);e.default=component.exports},1147:function(t,e,o){t.exports=function(){"use strict";var t=1e3,e=60*t,o=60*e,n=24*o,r="visibilitychange";return{name:"countdown",data:function(){return{counting:!1,endTime:0,totalMilliseconds:0}},props:{autoStart:{type:Boolean,default:!0},emitEvents:{type:Boolean,default:!0},interval:{type:Number,default:1e3,validator:function(t){return t>=0}},now:{type:Function,default:function(){return Date.now()}},tag:{type:String,default:"span"},time:{type:Number,default:0,validator:function(t){return t>=0}},transform:{type:Function,default:function(t){return t}}},computed:{days:function(){return Math.floor(this.totalMilliseconds/n)},hours:function(){return Math.floor(this.totalMilliseconds%n/o)},minutes:function(){return Math.floor(this.totalMilliseconds%o/e)},seconds:function(){return Math.floor(this.totalMilliseconds%e/t)},milliseconds:function(){return Math.floor(this.totalMilliseconds%t)},totalDays:function(){return this.days},totalHours:function(){return Math.floor(this.totalMilliseconds/o)},totalMinutes:function(){return Math.floor(this.totalMilliseconds/e)},totalSeconds:function(){return Math.floor(this.totalMilliseconds/t)}},render:function(t){return t(this.tag,this.$scopedSlots.default?[this.$scopedSlots.default(this.transform({days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}))]:this.$slots.default)},watch:{$props:{deep:!0,immediate:!0,handler:function(){this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.autoStart&&this.start()}}},methods:{start:function(){this.counting||(this.counting=!0,this.emitEvents&&this.$emit("start"),"visible"===document.visibilityState&&this.continue())},continue:function(){var t=this;if(this.counting){var e=Math.min(this.totalMilliseconds,this.interval);if(e>0)if(window.requestAnimationFrame){var o,n,r=function r(l){o||(o=l),n||(n=l);var c=l-o;c>=e||c+(l-n)/2>=e?t.progress():t.requestId=requestAnimationFrame(r),n=l};this.requestId=requestAnimationFrame(r)}else this.timeoutId=setTimeout((function(){t.progress()}),e);else this.end()}},pause:function(){window.requestAnimationFrame?cancelAnimationFrame(this.requestId):clearTimeout(this.timeoutId)},progress:function(){this.counting&&(this.totalMilliseconds-=this.interval,this.emitEvents&&this.totalMilliseconds>0&&this.$emit("progress",{days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}),this.continue())},abort:function(){this.counting&&(this.pause(),this.counting=!1,this.emitEvents&&this.$emit("abort"))},end:function(){this.counting&&(this.pause(),this.totalMilliseconds=0,this.counting=!1,this.emitEvents&&this.$emit("end"))},update:function(){this.counting&&(this.totalMilliseconds=Math.max(0,this.endTime-this.now()))},handleVisibilityChange:function(){switch(document.visibilityState){case"visible":this.update(),this.continue();break;case"hidden":this.pause()}}},mounted:function(){document.addEventListener(r,this.handleVisibilityChange)},beforeDestroy:function(){document.removeEventListener(r,this.handleVisibilityChange),this.pause()}}}()},1151:function(t,e,o){"use strict";o.r(e);var n=o(1144),r={components:{TokenImg:o(416).default,TokenListModal:n.default},props:{id:{type:String,required:!0},tokens:{type:Array,default:null},label:{type:String,required:!0},largeDisplay:{type:Boolean,default:!1},defaultSelectedToken:{type:Object,default:null},labelClass:{type:String,default:"text-secondary"}},data:()=>({imageError:!1,selectedToken:null,tokenListModal:null}),mounted(){this.tokenListModal=this.$refs.selectedTokenModal,this.selectedToken=this.defaultSelectedToken},methods:{updateSelectedToken(t){this.selectedToken=t,this.$emit("onSelectToken",t)}}},l=o(23),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("div",[e("div",{directives:[{name:"b-modal",rawName:"v-b-modal",value:t.id,expression:"id"}],staticClass:"h-100"},[t.largeDisplay?e("div",{staticClass:"token-select text-center py-5 px-3"},[e("div",{staticClass:"d-flex justify-content-center"},[e("token-img",{staticClass:"mr-2",attrs:{token:t.selectedToken,size:"xxl"}})],1),t._v(" "),e("div",{staticClass:"items-center mt-3"},[e("h3",{staticClass:"d-inline-flex flex-row align-items-baseline"},[t.selectedToken?e("div",[e("div",[t._v(t._s(t.selectedToken.symbol))]),t._v(" "),t.selectedToken.isLpV3?e("div",{staticClass:"h5 text-weight-400 text-secondary"},[t._v("\n              "+t._s(t.selectedToken.fullname)+"\n            ")]):t._e()]):e("span",{staticClass:"text-secondary"},[t._v("Select")]),t._v(" "),e("i",{staticClass:"mdi mdi-chevron-down text-secondary ml-2 mr-1"})])])]):e("div",{staticClass:"d-flex align-items-center token-select h-100"},[e("token-img",{staticClass:"d-none d-md-flex mr-2",attrs:{token:t.selectedToken,size:"lxl"}}),t._v(" "),e("token-img",{staticClass:"d-flex d-md-none mr-2",attrs:{token:t.selectedToken,size:"lxl"}}),t._v(" "),e("div",[e("div",{staticClass:"d-none d-sm-block",class:t.labelClass},[t._v(t._s(t.label))]),t._v(" "),e("div",{staticClass:"items-center"},[t.selectedToken?e("h4",{staticClass:"d-inline-flex flex-row align-items-baseline mb-0"},[e("span",[t._v(t._s(t.selectedToken.symbol))]),t._v(" "),e("i",{staticClass:"d-none d-sm-flex mdi mdi-chevron-down text-secondary ml-1"})]):e("div",{staticClass:"d-flex align-items-center"},[e("span",{staticClass:"font-size-10"},[t._v("SELECT")]),t._v(" "),e("i",{staticClass:"mdi mdi-chevron-down text-secondary ml-1"})])])])],1)]),t._v(" "),e("token-list-modal",{ref:"selectedTokenModal",attrs:{"modal-id":t.id,tokens:t.tokens},on:{"update-selected-token":t.updateSelectedToken}})],1)}),[],!1,null,null,null);e.default=component.exports},1170:function(t,e,o){"use strict";o.r(e);var n=o(103),r=o(416),l={components:{Processing:o(1129).default,Modal:n.default,TokenImg:r.default},props:{id:{type:String,required:!0},tokens:{type:Array,required:!0}},data:()=>({loading:!1}),computed:{chainConfig(){return this.$store.getters["web3-provider/chainConfig"]}},watch:{},methods:{async importToken(){this.loading=!0;const t=this.chainConfig.frontend.featureFlags;await this.$contracts.pushSupportedTokens(this.tokens,t),this.loading=!1,this.$emit("confirm-import"),this.$bvModal.hide(this.id)},reset(){this.loading=!1}}},c=o(23),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("modal",{attrs:{id:t.id,title:t.tokens.length>1?"Import tokens":"Import token"},on:{reset:t.reset},scopedSlots:t._u([{key:"action",fn:function(){return[e("b-button",{staticClass:"w-50",attrs:{variant:"primary",disabled:t.loading},on:{click:t.importToken}},[t.loading?e("Processing"):e("span",[t._v("Import")])],1)]},proxy:!0}])},[t._l(t.tokens,(function(o,i){return e("div",{key:o.address,staticClass:"mt-3"},[i>0?e("hr"):t._e(),t._v(" "),e("div",{staticClass:"d-flex align-items-center"},[e("token-img",{staticClass:"mr-2",attrs:{token:o}}),t._v(" "),e("div",[e("h4",{staticClass:"text-weight-500 mb-1"},[t._v(t._s(o.fullname)+" ("+t._s(o.symbol)+")")]),t._v(" "),e("a",{staticClass:"text-secondary text-small d-flex",attrs:{href:t.getExplorerAddressUrl(t.$store.getters["web3-provider/chainConfig"],o.address),target:"_blank"}},[e("i",{staticClass:"mdi mdi-link mr-1"}),t._v("\n          "+t._s(o.address)+"\n        ")])])],1)])})),t._v(" "),e("b-alert",{staticClass:"mt-4",attrs:{show:"",variant:"warning"}},[e("i",{staticClass:"iexc-danger mr-1 icon-fix text-primary"}),t._v("\n    Anyone can create an ERC20 token with any name, including creating fake versions of existing\n    tokens and tokens that claim to represent projects that do not have a token. If you purchase\n    an arbitrary token, you may be unable to sell it back, so always double-check the address of\n    any imported token.\n  ")])],2)}),[],!1,null,null,null);e.default=component.exports},1206:function(t,e,o){o(419)("flat")},1214:function(t,e,o){"use strict";o.r(e);o(8);var n=o(1139),r=o(1344),l=o(1710),c=o(1144),d=o(1711),h={components:{CreatePositionModal:l.default,PositionsList:r.default,TokenListModal:c.default,ConnectWallet:n.default,MigrateSpnftsModal:d.default},props:{createLink:{type:Boolean,default:!1},initTokenAddress1:{type:String,default:null},initTokenAddress2:{type:String,default:null},displayHarvestAllWidgets:{type:Boolean,default:!1},flexTitleView:{type:Boolean,default:!1},positions:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},isWalletConnected:{type:Boolean,default:!1},_deprecatedIgnoreLoading:{type:Boolean,default:!1},incentivesEnabled:{type:Boolean,required:!0}},data:()=>({createModalId:"create-position-modal",isSelecting:!1,search:"",filtersCounter:0,filterYieldBearing:!1,filterBoosted:!1,filterLocked:!1,filterNitro:!1}),computed:{processedPositions(){let t=[...this.positions];return t=this.searchInPositions(t),t=this.filterPositions(t),t},stackedPositions(){return this.filterStackedPositions(this.positions)},showMigrationMessage(){return this.isWalletConnected&&this.positions.length>0&&this.incentivesEnabled}},mounted(){this.initTokenAddress1&&this.$bvModal.show(this.createModalId)},methods:{filterPositions(t){return this.filterYieldBearing&&(t=t.filter((t=>t.isGeneratingYield))),this.filterBoosted&&(t=t.filter((t=>t.isBoosted))),this.filterLocked&&(t=t.filter((t=>t.isLocked))),this.filterNitro&&(t=this.filterStackedPositions(t)),t},filterStackedPositions:t=>t.filter((t=>t.isStacked)),searchInPositions(t){return""!==this.search&&this.search?t.filter((t=>t.depositToken.symbol.toLowerCase().includes(this.search.toLowerCase()))):t},setFilterYieldBearing(){this.filterYieldBearing?this.filtersCounter-=1:this.filtersCounter+=1,this.filterYieldBearing=!this.filterYieldBearing},setFilterBoosted(){this.filterBoosted?this.filtersCounter-=1:this.filtersCounter+=1,this.filterBoosted=!this.filterBoosted},setFilterLocked(){this.filterLocked?this.filtersCounter-=1:this.filtersCounter+=1,this.filterLocked=!this.filterLocked},setFilterNitro(){this.filterNitro?this.filtersCounter-=1:this.filtersCounter+=1,this.filterNitro=!this.filterNitro}}},m=o(23),component=Object(m.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"card positions"},[t.showMigrationMessage?e("div",{staticClass:"mb-4"},[e("div",{staticClass:"text-secondary"},[t._m(0),t._v(" "),e("p",[t._v("\n        spNFTs and Nitro pools are being deprecated. Rewards will be entirely shifted to our\n        "),e("NuxtLink",{attrs:{to:"/campaigns"}},[t._v("new incentives system")]),t._v("\n        .\n        "),e("br"),t._v("\n        In order to keep being eligible for future incentives, please follow the process below. It\n        won't have any impact on your liquidity providing.\n      ")],1)]),t._v(" "),e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"migrate-spnfts",expression:"'migrate-spnfts'"}],attrs:{variant:"warning"}},[e("span",{staticClass:"d-none d-sm-block text-black"},[t._v("Migrate now")])]),t._v(" "),e("migrate-spnfts-modal",{attrs:{id:"migrate-spnfts",positions:t.positions,"stacked-positions":t.stackedPositions}})],1):t._e(),t._v(" "),t.isWalletConnected?e("div",{staticClass:"d-md-flex align-items-center justify-content-between",class:{"d-block":t.flexTitleView,"d-flex":t.flexTitleView}},[e("div",{staticClass:"d-flex align-items-center-center justify-content-between flex-grow-1"},[t._t("filters",(function(){return[e("b-form",{staticClass:"d-flex align-items-center justify-content-between flex-grow-1 mr-3",attrs:{inline:""}},[e("div",{staticClass:"flex-grow-1"},[e("b-input",{attrs:{type:"text",placeholder:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),e("div",{staticClass:"d-none d-lg-block ml-2"},[e("b-dropdown",{attrs:{variant:"black","toggle-class":"select-dropdown"},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("span",{staticClass:"text-secondary mr-3"},[t._v("Filters")]),t._v(" "),t.filtersCounter>0?e("span",{staticClass:"mr-2 badge"},[t._v("\n                  "+t._s(t.filtersCounter)+"\n                ")]):t._e()]},proxy:!0}],null,!1,2229948590)},[t._v(" "),e("b-dropdown-item",{staticClass:"dropdown-switch-item",attrs:{"link-class":"d-flex justify-content-start"},nativeOn:{"!click":function(e){return e.preventDefault(),e.stopPropagation(),t.setFilterYieldBearing()}}},[e("i",{staticClass:"mdi mdi-check text-secondary opacity-50 mr-2",class:{"text-primary opacity-100":t.filterYieldBearing}}),t._v(" "),e("span",[t._v("Yield-bearing only")])]),t._v(" "),e("b-dropdown-item",{staticClass:"dropdown-switch-item",attrs:{"link-class":"d-flex justify-content-start"},nativeOn:{"!click":function(e){return e.preventDefault(),e.stopPropagation(),t.setFilterLocked()}}},[e("i",{staticClass:"mdi mdi-check text-secondary opacity-50 mr-2",class:{"text-primary opacity-100":t.filterLocked}}),t._v(" "),e("span",[t._v("Locked only")])]),t._v(" "),e("b-dropdown-item",{staticClass:"dropdown-switch-item",attrs:{"link-class":"d-flex justify-content-start"},nativeOn:{"!click":function(e){return e.preventDefault(),e.stopPropagation(),t.setFilterBoosted()}}},[e("i",{staticClass:"mdi mdi-check text-secondary opacity-50 mr-2",class:{"text-primary opacity-100":t.filterBoosted}}),t._v(" "),e("span",[t._v("Boosted only")])]),t._v(" "),e("b-dropdown-item",{staticClass:"dropdown-switch-item",attrs:{"link-class":"d-flex justify-content-start"},nativeOn:{"!click":function(e){return e.preventDefault(),e.stopPropagation(),t.setFilterNitro()}}},[e("i",{staticClass:"mdi mdi-check text-secondary opacity-50 mr-2",class:{"text-primary opacity-100":t.filterNitro}}),t._v(" "),e("span",[t._v("Nitro-staking only")])])],1)],1),t._v(" "),e("div",{staticClass:"d-block d-lg-none ml-1"},[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.farms-filter-modal",modifiers:{"farms-filter-modal":!0}}],attrs:{variant:"black"}},[e("i",{staticClass:"icam-setting-4 font-size-20 text-muted p-0"})]),t._v(" "),e("b-modal",{attrs:{id:"farms-filter-modal",centered:"","hide-header":""},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("b-button",{staticClass:"w-100 mr-3",attrs:{variant:"primary"},on:{click:function(e){return t.$bvModal.hide("farms-filter-modal")}}},[t._v("\n                  Close\n                ")])]},proxy:!0}],null,!1,4198992877)},[e("h3",{staticClass:"mb-3"},[t._v("Filters")]),t._v(" "),e("b-button",{staticClass:"d-flex align-items-center justify-content-between w-100 py-1",attrs:{variant:"simple-link"},on:{click:function(e){return t.setFilterYieldBearing()}}},[e("span",[t._v("Yield-bearing only")]),t._v(" "),e("label",{staticClass:"ml-2 mb-0 vue-switcher vue-switcher--bold vue-switcher-theme--default vue-switcher-color--primary",class:{"vue-switcher--unchecked vue-switcher--bold--unchecked":!t.filterYieldBearing}},[e("input",{attrs:{type:"checkbox"},on:{click:function(e){return t.setFilterYieldBearing()}}}),t._v(" "),e("div")])]),t._v(" "),e("b-button",{staticClass:"d-flex align-items-center justify-content-between w-100 py-1",attrs:{variant:"simple-link"},on:{click:function(e){return t.setFilterLocked()}}},[e("span",[t._v("Locked only")]),t._v(" "),e("label",{staticClass:"ml-2 mb-0 vue-switcher vue-switcher--bold vue-switcher-theme--default vue-switcher-color--primary",class:{"vue-switcher--unchecked vue-switcher--bold--unchecked":!t.filterLocked}},[e("input",{attrs:{type:"checkbox"},on:{click:function(e){return t.setFilterLocked()}}}),t._v(" "),e("div")])]),t._v(" "),e("b-button",{staticClass:"d-flex align-items-center justify-content-between w-100 py-1",attrs:{variant:"simple-link"},on:{click:function(e){return t.setFilterBoosted()}}},[e("span",[t._v("Boosted only")]),t._v(" "),e("label",{staticClass:"ml-2 mb-0 vue-switcher vue-switcher--bold vue-switcher-theme--default vue-switcher-color--primary",class:{"vue-switcher--unchecked vue-switcher--bold--unchecked":!t.filterBoosted}},[e("input",{attrs:{type:"checkbox"},on:{click:function(e){return t.setFilterBoosted()}}}),t._v(" "),e("div")])]),t._v(" "),e("b-button",{staticClass:"d-flex align-items-center justify-content-between w-100 py-1",attrs:{variant:"simple-link"},on:{click:function(e){return t.setFilterNitro()}}},[e("span",[t._v("Nitro-staked only")]),t._v(" "),e("label",{staticClass:"ml-2 mb-0 vue-switcher vue-switcher--bold vue-switcher-theme--default vue-switcher-color--primary",class:{"vue-switcher--unchecked vue-switcher--bold--unchecked":!t.filterNitro}},[e("input",{attrs:{type:"checkbox"},on:{click:function(e){return t.setFilterNitro()}}}),t._v(" "),e("div")])])],1)],1)])]})),t._v(" "),t._t("buttons",(function(){return[e("div",[e("b-button",{directives:[{name:"show",rawName:"v-show",value:t.isWalletConnected&&!t.incentivesEnabled,expression:"isWalletConnected && !incentivesEnabled"},{name:"b-modal",rawName:"v-b-modal",value:"import-token",expression:"'import-token'"}],attrs:{variant:"secondary"}},[e("i",{staticClass:"mdi mdi-import mr-0 mr-sm-1"}),t._v(" "),e("span",{staticClass:"d-none d-sm-block"},[t._v("Import token")])]),t._v(" "),e("token-list-modal",{ref:"selectedTokenModal",attrs:{"modal-id":"import-token","import-mode":""}}),t._v(" "),t.isWalletConnected&&!t.incentivesEnabled?e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:t.createModalId,expression:"createModalId"}],staticClass:"ml-2",attrs:{variant:"primary"}},[e("i",{staticClass:"mdi mdi-plus-circle-outline mr-0 mr-sm-1"}),t._v(" "),e("span",{staticClass:"d-none d-sm-block"},[t._v("New position")])]):t._e(),t._v(" "),e("create-position-modal",{attrs:{id:t.createModalId,"init-token-address0":t.initTokenAddress1,"init-token-address1":t.initTokenAddress2}})],1)]}))],2)]):e("div",{staticClass:"text-center my-3"},[e("connect-wallet",{staticStyle:{"max-width":"175px"}})],1),t._v(" "),t.isWalletConnected?[t._deprecatedIgnoreLoading||t.loading||t.positions.length?e("PositionsList",{attrs:{loading:t.loading,positions:t.processedPositions}}):e("div",{staticClass:"my-4 text-large text-center"},[e("div",{staticClass:"text-secondary mb-1"},[t._v("You don't own any spNFT.")])])]:t._e()],2)}),[function(){var t=this._self._c;return t("h4",{staticClass:"text-warning"},[t("i",{staticClass:"mdi mdi-information-outline text-warning font-size-16"}),this._v("\n        Important Update: spNFT Deprecation\n      ")])}],!1,null,null,null);e.default=component.exports},1710:function(t,e,o){"use strict";o.r(e);var n=o(1200),r=o(103),input=o(1131),l=o(1151),c=o(1170),d=o(1145),h=o(21),m={components:{Processing:o(1129).default,Estimates:n.default,LockDuration:d.default,Modal:r.default,TokenInput:input.default,TokenSelect:l.default,TokenImportModal:c.default},props:{id:{type:String,required:!0},initTokenAddress0:{type:String,default:null},initTokenAddress1:{type:String,default:null}},data:()=>({amount:null,error:null,isApproved:!1,lockDuration:null,loading:!1,nftPool:null,selectToken:null,tokensToImport:[]}),computed:{account(){return this.$store.getters["web3-provider/account"]},inputPrice(){return this.nftPool?this.amount*this.nftPool.depositToken.price:"0"},inputMaxAmount(){return this.nftPool?this.nftPool.depositToken.accountBalanceFormatted:"0"},tokens(){let t=this.$contracts.supportedTokens.tokens;return this.v2Enabled&&(t=this.$contracts.factory.existentPairs.concat(t)),this.vaultsEnabled&&(t=t.concat(this.$contracts.liquidityManagerFactory.allLiquidityManagerArray)),t=t.filter((t=>!t.excludeFromExchange&&!t.isNative&&Number(t.accountBalanceFormatted)>0)),t},selectedToken(){var t;return null===(t=this.selectToken)||void 0===t?void 0:t.selectedToken}},watch:{amount(t){this.syncApproval(),this.checkInput(t)},"selectedToken.allowance"(){this.syncApproval()},selectedToken(){this.isApproved=!1,this.searchNftPool(),this.syncApproval(),this.checkInput(this.amount)},"$contracts.nftPoolFactory.lastUpdate"(){this.searchNftPool()}},methods:{async init(){this.selectToken=this.$refs.selectToken,await this.checkInitTokens(),this.tokensToImport.length>0&&this.$bvModal.show("importTokens"),await this.syncApproval()},async initializeNftPool(){this.loading=!0;try{const t=await this.$contracts.nftPoolFactory.initializeNftPool(this.selectedToken);t?await t.wait():this.loading=!1}catch(t){this.loading=!1}},async create(){this.loading=!0;try{const t=await this.nftPool.createPosition(this.amount,this.lockDuration);t&&(await t.wait(),this.$bvModal.hide(this.id))}catch(t){}this.loading=!1},async approve(){this.loading=!0,this.loading=await this.nftPool.depositToken.approveMax(this.nftPool.address),this.syncApproval()},searchNftPool(){this.selectedToken?this.nftPool=this.$contracts.nftPoolFactory.getNftPoolByToken(this.selectedToken):this.nftPool=null,this.nftPool&&this.loading&&(this.loading=!1)},async syncApproval(){this.selectedToken&&this.amount&&this.nftPool?(this.isApproved=await this.selectedToken.hasAccountApproval(this.$store.getters["web3-provider/account"],this.nftPool.address,this.amount),this.loading&&(this.loading=!this.isApproved)):this.isApproved=!1},checkInput(t){this.nftPool?(!t||Number(t)>0)&&this.nftPool.depositToken.isValidAmount(t)?this.nftPool.depositToken.hasSufficientAmount(t,this.inputMaxAmount)?this.error=null:this.error="not enough balance":this.error="invalid amount input":this.error=null},async checkInitTokens(){let t,e;this.tokensToImport=[],this.initTokenAddress0&&(t=await Object(h.e)(this.$store.app,this.initTokenAddress0),t&&t.external&&!t.imported&&this.tokensToImport.push(t)),this.initTokenAddress1&&this.initTokenAddress1!==this.initTokenAddress0&&(e=await Object(h.e)(this.$store.app,this.initTokenAddress1),e&&e.external&&!e.imported&&this.tokensToImport.push(e)),0===this.tokensToImport.length&&(t&&e?this.selectToken.selectedToken=this.$contracts.factory.getLpByTokens(t,e):t&&(this.selectToken.selectedToken=t))},reset(){this.loading=!1,this.amount=null,this.error=null,this.lockDuration=null,this.isApproved=!1}}},f=o(23),component=Object(f.a)(m,(function(){var t=this,e=t._self._c;return e("modal",{attrs:{id:t.id,title:"Create position"},on:{shown:function(e){return t.init()},reset:function(e){return t.reset()}},scopedSlots:t._u([{key:"action",fn:function(){return[t.selectedToken&&!t.nftPool?e("b-button",{staticClass:"w-50",attrs:{variant:"primary",disabled:!t.selectedToken||t.loading},on:{click:t.initializeNftPool}},[t.loading?e("Processing"):e("span",[t._v("Initialize")])],1):t.isApproved?e("b-button",{staticClass:"w-50",attrs:{variant:"primary",disabled:!t.selectedToken||t.loading||null!==t.error},on:{click:t.create}},[t.loading?e("Processing"):e("span",[t._v("Create")])],1):e("b-button",{staticClass:"w-50",attrs:{variant:"primary",disabled:!t.selectedToken||!t.amount||t.loading||null!==t.error},on:{click:t.approve}},[t.loading?e("Processing"):e("span",[t._v("Approve")])],1)]},proxy:!0}])},[e("div",{staticClass:"mt-2 mx-auto"},[e("token-select",{ref:"selectToken",staticClass:"token-select d-flex justify-content-center",attrs:{id:"select-token",tokens:t.tokens,label:"Token"}}),t._v(" "),e("TokenImportModal",{attrs:{id:"importTokens",tokens:t.tokensToImport},on:{"confirm-import":t.checkInitTokens}}),t._v(" "),t.selectedToken&&!t.nftPool?e("b-alert",{staticClass:"mt-4 mb-0",attrs:{show:"",variant:"warning"}},[e("i",{staticClass:"iexc-danger mr-1 icon-fix"}),t._v("\n      You are the very first spNFT minter for this asset! You will need to initialize the spNFT\n      contract first.\n    ")]):t._e()],1),t._v(" "),t.nftPool&&t.selectedToken?e("div",{staticClass:"mt-4"},[e("div",[e("h4",[t._v("Amount")]),t._v(" "),e("token-input",{attrs:{unit:t.nftPool.depositToken.symbol,label:"wallet balance","max-amount":t.inputMaxAmount,"display-bottom-infos":""},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1),t._v(" "),e("lock-duration",{staticClass:"mt-3",attrs:{"nft-pool":t.nftPool,min:0,max:t.nftPool.maxLockDurationDays},model:{value:t.lockDuration,callback:function(e){t.lockDuration=e},expression:"lockDuration"}}),t._v(" "),t.error?e("b-alert",{staticClass:"mt-3 mb-0",attrs:{show:"",variant:"danger"}},[t._v("Error: "+t._s(t.error))]):t.amount?e("estimates",{attrs:{"amount-value":t.inputPrice,"lock-duration":t.lockDuration,"nft-pool":t.nftPool,"nitro-pool-factory":t.$contracts.nitroPoolFactory}}):t._e()],1):t._e()])}),[],!1,null,null,null);e.default=component.exports},1711:function(t,e,o){"use strict";o.r(e);o(8),o(1206);var n=o(103),r=o(1130),l=o(21),c={components:{Modal:n.default},mixins:[r.a],props:{id:{type:String,required:!0},positions:{type:Array,required:!0},stackedPositions:{type:Array,required:!0}},computed:{hasStackedPositions(){return this.stackedPositions.length>0}},methods:{refreshBalances(){const t=this.positions.map((t=>{const e=[],o=t.nftPool;if(o.isLpV2)e.push([o.depositToken.token0,o.depositToken.token1]);else{const t=this.$contracts.liquidityManagerFactory.allLiquidityManagerArray.find((t=>t.address===o.depositToken.address));t&&e.push(t),e.push([o.depositToken])}return e}));Object(l.c)({store:this.$store,$contracts:this.$contracts},...t.flat())},refreshPositions(){const t=this.positions.map((t=>t.nftPool));this.$contracts.nftPoolFactory.refreshNFTPoolsData(t)},async unstakeFromAllNitroPools(){this.steps=[{description:"Unstaking all positions from its Nitro pool..."}],this.successMessage={title:"You've successfully unstaked all your positions from its Nitro pool."},this.initLoading();try{const t=[];this.stackedPositions.forEach((e=>{t.push(e.stackedOn.withdraw(e.id))}));const e=await Promise.all(t);if(e.every((t=>null===t)))return void this.txError("User rejected all transactions.");if(e.includes(null)){const t={title:"You've successfully unstaked some of your positions from its Nitro pool.",subtitleMessage:"Please make sure to remove the remaining positions from their Nitro pools soon."};this.$store.commit("loading-modal/UPDATE_SUCCESS_MESSAGE",t)}const o=e.filter((t=>null!==t)),n=await Promise.all(o.map((t=>t.wait())));n.some((t=>1!==t.status))&&this.txError("One or more transactions have been rejected. Please try again."),this.refreshPositions(),this.$store.commit("loading-modal/PUSH_PASSED_TX",o),this.txSuccess()}catch(t){this.txError("Error while unstaking your positions from its Nitro pools. If the issue persists, please contact our support.")}},async unwrapAllSpnfts(){this.steps=[{description:"Unwrapping all spNFTs..."}],this.successMessage={title:"You've successfully unwrapped all your spNFTs."},this.initLoading(this.id);try{const t=[];this.positions.forEach((e=>{t.push(e.withdrawFromPosition(e.amountFormatted))}));const e=(await Promise.all(t)).map((t=>{let{tx:e}=t;return e}));if(e.every((t=>null===t)))return void this.txError("User rejected all transactions.");if(e.includes(null)){const t={title:"You've successfully unwrapped some of your spNFTs.",subtitleMessage:"Please make sure to unwrap the remaining spNFTs soon."};this.$store.commit("loading-modal/UPDATE_SUCCESS_MESSAGE",t)}const o=e.filter((t=>null!==t)),n=await Promise.all(o.map((t=>t.wait())));n.some((t=>1!==t.status))&&this.txError("One or more transactions have been rejected. Please try again."),this.refreshPositions(),this.refreshBalances(),this.$store.commit("loading-modal/PUSH_PASSED_TX",o),this.txSuccess()}catch(t){this.txError("Error while unwrapping your spNFT positions. If the issue persists, please contact our support.")}}}},d=o(23),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("modal",{attrs:{id:t.id,title:"spNFT migration","hide-footer":""}},[e("div",{staticClass:"mb-4"},[e("p",{staticClass:"mb-2"},[t._v("This process allows you to migrate all of your spNFTs.")]),t._v(" "),e("p",{staticClass:"mb-4 text-danger"},[t._v("\n      Please note that this won't have any impact on your liquidity providing.\n    ")]),t._v(" "),e("ol",{staticClass:"text-primary text-large"},[e("li",{staticClass:"mb-4"},[e("p",{staticClass:"text-primary mb-2"},[t._v("\n          Unstake from Nitro pools\n          "),t.hasStackedPositions?t._e():e("i",{staticClass:"mdi mdi-check text-success"})]),t._v(" "),e("p",{staticClass:"text-secondary text-default"},[t._v("\n          All your positions in Nitro pools need to be unstaked first. This step is essential to\n          avoid disruptions.\n        ")]),t._v(" "),e("b-button",{style:t.hasStackedPositions?"":"cursor: not-allowed",attrs:{disabled:!t.hasStackedPositions,variant:"primary"},on:{click:t.unstakeFromAllNitroPools}},[t._v("\n          Unstake\n        ")])],1),t._v(" "),e("li",[e("p",{staticClass:"text-primary mb-2"},[t._v("Unwrap spNFTs")]),t._v(" "),e("p",{staticClass:"text-secondary text-default"},[t._v("\n          This will unwrap all your spNFTs while leaving your underlying liquidity untouched.\n        ")]),t._v(" "),e("b-button",{style:t.hasStackedPositions?"cursor: not-allowed":"",attrs:{disabled:t.hasStackedPositions,variant:"primary"},on:{click:t.unwrapAllSpnfts}},[t._v("\n          Unwrap\n          "),t.hasStackedPositions?e("i",{staticClass:"mdi mdi-help-circle-outline check-nav-icon text-secondary font-size-16 ml-1",attrs:{id:"unwrap-disabled"}}):t._e(),t._v(" "),e("b-tooltip",{attrs:{target:"unwrap-disabled","no-fade":"",placement:"righttop"}},[e("span",[t._v("Please unstake from Nitro pools first (see Step 1).")])])],1)],1)])])])}),[],!1,null,null,null);e.default=component.exports}}]);